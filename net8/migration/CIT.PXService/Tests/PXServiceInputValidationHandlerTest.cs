// <copyright file="PXServiceInputValidationHandlerTest.cs" company="Microsoft Corporation">Copyright (c) Microsoft 2020. All rights reserved.</copyright>

namespace CIT.PXService.Tests
{
    using System;
    using System.Collections.Generic;
    using System.Net;
    using System.Net.Http;
    using System.Threading.Tasks;
    using Microsoft.Commerce.Payments.Common.Web;
    using Microsoft.Commerce.Payments.PXCommon;
    using Microsoft.VisualStudio.TestTools.UnitTesting;
    using Newtonsoft.Json;

    [TestClass]
    public class PXServiceInputValidationHandlerTest : TestBase
    {
        [TestInitialize]
        public void TestInitialize()
        {
            PXHandler.CallInnerHandler = false;
            PXHandler.PostProcess = (HttpRequestMessage request, HttpResponseMessage response) =>
            {
                response = new HttpResponseMessage(HttpStatusCode.OK);
                return response;
            };
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/cc74ddd7-3417-40f0-8ff9-b1d2e6c1efe7/paymentMethodDescriptions?sessionId=3c858136-dadc-4035-af6b-3306ad2e2508&partner=xbox&orderId=79ef0fcd-6822-44fd-a092-b59fef46936d&operation=Select&country=br&language=pt-BR&filters=%7B%22chargeThreshold%22%3A39%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/ba30d069-2676-4aeb-913e-4367b855771e/paymentMethodDescriptions?sessionId=1fd116a1-702f-40da-abbb-9a5438b05c0a&partner=xbox&orderId=5887b75f-6ae1-4f35-a2f0-2f9e6eb6b216&operation=Select&country=za&language=en-ZA&filters=%7B%22chargeThreshold%22%3A299.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/b1e6d563-b4f0-43ac-8905-4f27f12e434e/paymentMethodDescriptions?sessionId=741b26a6-ba32-42a5-abd8-3485948ed497&partner=xbox&orderId=f0d9349a-d6c0-4711-9161-da3bfc9c51ea&operation=Select&country=br&language=pt-BR&filters=%7B%22chargeThreshold%22%3A15.5%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/5ef419fc-2e79-49d3-97c7-5ed31317c840/paymentMethodDescriptions?sessionId=5c667eda-9225-478b-94ac-b68435d71fd9&partner=webblends&operation=Select&country=br&language=pt-BR&filters=%7B%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/5ef419fc-2e79-49d3-97c7-5ed31317c840/paymentMethodDescriptions?sessionId=5c667eda-9225-478b-94ac-b68435d71fd9&partner=oxowebdirect&operation=Select&country=br&language=pt-BR&filters=%7B%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/7a002384-fcb0-4b69-ad75-fbc4a07a295c/paymentMethodDescriptions?sessionId=09da93e2-bd0d-41b0-9592-cb8a1391d3cd&partner=xbox&orderId=334d8702-1ff8-434e-a66a-7a23f7c73eba&operation=Select&country=za&language=en-ZA&filters=%7B%22chargeThreshold%22%3A99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(false, "Incoming request url is invalid. AllowedPaymentMethods param value is in invalid Json format. ", "v7.0/3273e3ac-bed8-4f4c-8842-02d2586172b9/paymentMethodDescriptions?sessionId=c7547aa7-486e-4552-8a1c-3380a1d01b5a&partner=xbox&orderId=d5f47335-39d9-4b66-8eab-7a9951de0a28&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A59.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%AS!$B5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D%SAHI!)!@7D")]
        [DataRow(false, "Incoming request url is invalid. AllowedPaymentMethods param value is longer than 1500(2,001).", "v7.0/0911b086-559e-48f5-9354-ed35dbf6c1d3/paymentMethodDescriptions?sessionId=acfa7163-7236-4f39-afe9-8701afa30d0c&partner=webblends&orderId=28fdb724-474b-4d9a-ac7f-32fc8933168c&operation=Select&country=es&language=es-ES&filters=%7B%22chargeThreshold%22%3A0%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(false, "Incoming request url is invalid. AllowedPaymentMethods param value is longer than 1500(2,001).", "v7.0/0911b086-559e-48f5-9354-ed35dbf6c1d3/paymentMethodDescriptions?sessionId=acfa7163-7236-4f39-afe9-8701afa30d0c&partner=oxowebdirect&orderId=28fdb724-474b-4d9a-ac7f-32fc8933168c&operation=Select&country=es&language=es-ES&filters=%7B%22chargeThreshold%22%3A0%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(false, "Incoming request url is invalid. AllowedPaymentMethods param value is in invalid Json format and is longer than 1500(2,026). ", "v7.0/7bf31f62-82d6-4a9f-9f0c-7fe2525ed153/paymentMethodDescriptions?sessionId=2f7fb8f2-25c4-4238-92c9-644f5e3eedf4&partner=webblends&orderId=ebea45d0-29ab-49fe-abf5-1295546cf49e&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A99.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%!@(!7B%22credit_card%22%3A1%2C%22ewallet.paypal%22%3A1%2C%22direct_debit.ach%22%3A1%2C%22direct_debit.sepa%22%3A1%2C%22direct_debit.ideal_billing_agreement%22%3A1%2C%22mobile_billing_non_sim%22%3A1%2C%22ewallet.stored_value%22%3A1%2C%AJAFAJSB22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22ewallet.paypal%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22$!!)A&!%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%5D%22credit_card%22%3A1%2C%22credit_card%22%2C%22ewallet.paypal%22%2C%22direct_debit.ach%22%2C%22direct_debit.sepa%22%22ewallet.paypal%22%3A1%2C%22direct_debit.ach%22%3A1%2C%22direct_debit.sepa%22%3A1%2C%22direct_debit.ideal_billing_agreement%22%3A1%2C%22mobile_billing_non_sim%22%3A1%2C%22ewallet.stored_value%22%3A1%2C%22ewallet.alipay_billing_agreement%22%3A1%2C%22online_bank_transfer.ideal%22%3A1%2C%22online_bank_transfer.sofort%22%3A1%*!&)!7D")]
        [DataRow(false, "Incoming request url is invalid. AllowedPaymentMethods param value is in invalid Json format and is longer than 1500(2,026). ", "v7.0/7bf31f62-82d6-4a9f-9f0c-7fe2525ed153/paymentMethodDescriptions?sessionId=2f7fb8f2-25c4-4238-92c9-644f5e3eedf4&partner=oxowebdirect&orderId=ebea45d0-29ab-49fe-abf5-1295546cf49e&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A99.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%!@(!7B%22credit_card%22%3A1%2C%22ewallet.paypal%22%3A1%2C%22direct_debit.ach%22%3A1%2C%22direct_debit.sepa%22%3A1%2C%22direct_debit.ideal_billing_agreement%22%3A1%2C%22mobile_billing_non_sim%22%3A1%2C%22ewallet.stored_value%22%3A1%2C%AJAFAJSB22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22ewallet.paypal%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22$!!)A&!%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%5D%22credit_card%22%3A1%2C%22credit_card%22%2C%22ewallet.paypal%22%2C%22direct_debit.ach%22%2C%22direct_debit.sepa%22%22ewallet.paypal%22%3A1%2C%22direct_debit.ach%22%3A1%2C%22direct_debit.sepa%22%3A1%2C%22direct_debit.ideal_billing_agreement%22%3A1%2C%22mobile_billing_non_sim%22%3A1%2C%22ewallet.stored_value%22%3A1%2C%22ewallet.alipay_billing_agreement%22%3A1%2C%22online_bank_transfer.ideal%22%3A1%2C%22online_bank_transfer.sofort%22%3A1%*!&)!7D")]
        [DataRow(false, "Incoming request url is invalid. AllowedPaymentMethods param value is longer than 1500(2,549).", "v7.0/c4b779cc-a501-4ae2-ba84-50535e63d550/paymentMethodDescriptions?sessionId=be5638af-23ae-40b9-87c1-eb7946183f3d&partner=xbox&orderId=94e10c96-843d-46f8-a167-d4d420a120a1&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A1%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22invoice_credit.klarna%22%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22invoice_credit.klarna%22%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%5D")]
        [DataRow(false, "Incoming request url is invalid. AllowedPaymentMethods param value is empty.", "v7.0/ddd424de-318c-4a10-8769-a932dad78777/paymentMethodDescriptions?sessionId=640b7dbb-65ef-49c9-a927-ee0b26cf0a3c&partner=xbox&orderId=c74994b4-289f-4de4-9a27-17f7b29e4402&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A17.99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=")]
        [DataRow(true, "Incoming request url is valid", "v7.0/cc74ddd7-3417-40f0-8ff9-b1d2e6c1efe7/paymentMethodDescriptions?sessionId=3c858136-dadc-4035-af6b-3306ad2e2508&partner=xbox&orderId=79ef0fcd-6822-44fd-a092-b59fef46936d&operation=Select&country=br&language=pt-BR&filters=%7B%22chargeThreshold%22%3A39%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/ba30d069-2676-4aeb-913e-4367b855771e/paymentMethodDescriptions?sessionId=1fd116a1-702f-40da-abbb-9a5438b05c0a&partner=xbox&orderId=5887b75f-6ae1-4f35-a2f0-2f9e6eb6b216&operation=Select&country=za&language=en-ZA&filters=%7B%22chargeThreshold%22%3A299.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/b1e6d563-b4f0-43ac-8905-4f27f12e434e/paymentMethodDescriptions?sessionId=741b26a6-ba32-42a5-abd8-3485948ed497&partner=xbox&orderId=f0d9349a-d6c0-4711-9161-da3bfc9c51ea&operation=Select&country=br&language=pt-BR&filters=%7B%22chargeThreshold%22%3A15.5%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/5ef419fc-2e79-49d3-97c7-5ed31317c840/paymentMethodDescriptions?sessionId=5c667eda-9225-478b-94ac-b68435d71fd9&partner=webblends&operation=Select&country=br&language=pt-BR&filters=%7B%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/5ef419fc-2e79-49d3-97c7-5ed31317c840/paymentMethodDescriptions?sessionId=5c667eda-9225-478b-94ac-b68435d71fd9&partner=oxowebdirect&operation=Select&country=br&language=pt-BR&filters=%7B%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/7a002384-fcb0-4b69-ad75-fbc4a07a295c/paymentMethodDescriptions?sessionId=09da93e2-bd0d-41b0-9592-cb8a1391d3cd&partner=xbox&orderId=334d8702-1ff8-434e-a66a-7a23f7c73eba&operation=Select&country=za&language=en-ZA&filters=%7B%22chargeThreshold%22%3A99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(false, "Incoming request url is invalid. AllowedPaymentMethods param value is in invalid Json format. ", "v7.0/3273e3ac-bed8-4f4c-8842-02d2586172b9/paymentMethodDescriptions?sessionId=c7547aa7-486e-4552-8a1c-3380a1d01b5a&partner=xbox&orderId=d5f47335-39d9-4b66-8eab-7a9951de0a28&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A59.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%AS!$B5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D%SAHI!)!@7D", true)]
        [DataRow(false, "Incoming request url is invalid. AllowedPaymentMethods param value is longer than 1500(2,001).", "v7.0/0911b086-559e-48f5-9354-ed35dbf6c1d3/paymentMethodDescriptions?sessionId=acfa7163-7236-4f39-afe9-8701afa30d0c&partner=webblends&orderId=28fdb724-474b-4d9a-ac7f-32fc8933168c&operation=Select&country=es&language=es-ES&filters=%7B%22chargeThreshold%22%3A0%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(false, "Incoming request url is invalid. AllowedPaymentMethods param value is longer than 1500(2,001).", "v7.0/0911b086-559e-48f5-9354-ed35dbf6c1d3/paymentMethodDescriptions?sessionId=acfa7163-7236-4f39-afe9-8701afa30d0c&partner=oxowebdirect&orderId=28fdb724-474b-4d9a-ac7f-32fc8933168c&operation=Select&country=es&language=es-ES&filters=%7B%22chargeThreshold%22%3A0%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(false, "Incoming request url is invalid. AllowedPaymentMethods param value is in invalid Json format and is longer than 1500(2,026). ", "v7.0/7bf31f62-82d6-4a9f-9f0c-7fe2525ed153/paymentMethodDescriptions?sessionId=2f7fb8f2-25c4-4238-92c9-644f5e3eedf4&partner=webblends&orderId=ebea45d0-29ab-49fe-abf5-1295546cf49e&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A99.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%!@(!7B%22credit_card%22%3A1%2C%22ewallet.paypal%22%3A1%2C%22direct_debit.ach%22%3A1%2C%22direct_debit.sepa%22%3A1%2C%22direct_debit.ideal_billing_agreement%22%3A1%2C%22mobile_billing_non_sim%22%3A1%2C%22ewallet.stored_value%22%3A1%2C%AJAFAJSB22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22ewallet.paypal%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22$!!)A&!%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%5D%22credit_card%22%3A1%2C%22credit_card%22%2C%22ewallet.paypal%22%2C%22direct_debit.ach%22%2C%22direct_debit.sepa%22%22ewallet.paypal%22%3A1%2C%22direct_debit.ach%22%3A1%2C%22direct_debit.sepa%22%3A1%2C%22direct_debit.ideal_billing_agreement%22%3A1%2C%22mobile_billing_non_sim%22%3A1%2C%22ewallet.stored_value%22%3A1%2C%22ewallet.alipay_billing_agreement%22%3A1%2C%22online_bank_transfer.ideal%22%3A1%2C%22online_bank_transfer.sofort%22%3A1%*!&)!7D", true)]
        [DataRow(false, "Incoming request url is invalid. AllowedPaymentMethods param value is in invalid Json format and is longer than 1500(2,026). ", "v7.0/7bf31f62-82d6-4a9f-9f0c-7fe2525ed153/paymentMethodDescriptions?sessionId=2f7fb8f2-25c4-4238-92c9-644f5e3eedf4&partner=oxowebdirect&orderId=ebea45d0-29ab-49fe-abf5-1295546cf49e&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A99.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%!@(!7B%22credit_card%22%3A1%2C%22ewallet.paypal%22%3A1%2C%22direct_debit.ach%22%3A1%2C%22direct_debit.sepa%22%3A1%2C%22direct_debit.ideal_billing_agreement%22%3A1%2C%22mobile_billing_non_sim%22%3A1%2C%22ewallet.stored_value%22%3A1%2C%AJAFAJSB22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22ewallet.paypal%22%%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22$!!)A&!%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%5D%22credit_card%22%3A1%2C%22credit_card%22%2C%22ewallet.paypal%22%2C%22direct_debit.ach%22%2C%22direct_debit.sepa%22%22ewallet.paypal%22%3A1%2C%22direct_debit.ach%22%3A1%2C%22direct_debit.sepa%22%3A1%2C%22direct_debit.ideal_billing_agreement%22%3A1%2C%22mobile_billing_non_sim%22%3A1%2C%22ewallet.stored_value%22%3A1%2C%22ewallet.alipay_billing_agreement%22%3A1%2C%22online_bank_transfer.ideal%22%3A1%2C%22online_bank_transfer.sofort%22%3A1%*!&)!7D", true)]
        [DataRow(false, "Incoming request url is invalid. AllowedPaymentMethods param value is longer than 1500(2,549).", "v7.0/c4b779cc-a501-4ae2-ba84-50535e63d550/paymentMethodDescriptions?sessionId=be5638af-23ae-40b9-87c1-eb7946183f3d&partner=xbox&orderId=94e10c96-843d-46f8-a167-d4d420a120a1&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A1%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22invoice_credit.klarna%22%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22invoice_credit.klarna%22%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%5D", true)]
        [DataRow(false, "Incoming request url is invalid. AllowedPaymentMethods param value is empty.", "v7.0/ddd424de-318c-4a10-8769-a932dad78777/paymentMethodDescriptions?sessionId=640b7dbb-65ef-49c9-a927-ee0b26cf0a3c&partner=xbox&orderId=c74994b4-289f-4de4-9a27-17f7b29e4402&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A17.99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=", true)]

        [DataTestMethod]
        public async Task AllowedPaymentMethodsParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/06f8926f-2cf0-48f9-ace7-95d6235bc2d3/paymentMethodDescriptions?partner=Azure&operation=SelectInstance&language=en&country=IT&classicProduct=azureClassic&billableAccountId=7z4H1wEAAAAAAAAA&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.mc%22%2C%22credit_card.amex%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/24eea625-77af-4d80-893b-b890b6ba463a/paymentMethodDescriptions?partner=Azure&operation=SelectInstance&language=fr&country=DZ&classicProduct=azureClassic&billableAccountId=fY6G4gEAAAAAAAAA&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.mc%22%2C%22credit_card.amex%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentInstrumentsEx?country=nl&language=en-US&partner=webblends&completePrerequisites=True&billableAccountId=12334")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentInstrumentsEx?country=nl&language=en-US&partner=oxowebdirect&completePrerequisites=True&billableAccountId=12334")]
        [DataRow(true, "Incoming request url is valid", "v7.0/312b79b2-f461-4919-8cc4-09d31056981e/challengeDescriptions?timezoneOffset=-60&paymentSessionOrData=%7B%22piid%22%3A%22xlGXewAAAAAEAACA%22%2C%22paymentMethodType%22%3A%22mc%22%2C%22partner%22%3A%22Azure%22%2C%22country%22%3A%22NG%22%2C%22language%22%3A%22en-us%22%2C%22piCid%22%3A%22312b79b2-f461-4919-8cc4-09d31056981e%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22caid%22%3A%225cbaca57-3d9b-4efd-9e9c-31ab48a44262%22%2C%22isLegacy%22%3Atrue%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22billableAccountId%22%3A%22xlGXewAAAAAAAAAA%22%2C%22classicProduct%22%3A%22azureClassic%22%2C%22challengeWindowSize%22%3A%2205%22%7D&operation=RenderPidlPage&classicProduct=azureClassic&billableAccountId=xlGXewAAAAAAAAAA&language=en-US")]
        [DataRow(true, "Incoming request url is valid", "v7.0/aec7c871-3abd-407b-9abd-efa757c109b6/paymentMethodDescriptions?scenario=azureIbiza&partner=Azure&operation=SelectInstance&language=fr-fr&country=DZ&classicProduct=azureClassic&billableAccountId=W5lz3QEAAAAAAAAA&allowedPaymentMethods=%5B%22credit_card%22%5D")]
        [DataRow(false, "Incoming request url is invalid. BillableAccountId param value is longer than 100.", "v7.0/a1f10e1c-64c2-46fd-ac35-d9e457ec100e/paymentInstrumentsEx?country=in&language=en&partner=Azure&classicProduct=azureClassic&billableAccountId=8Wqj5QEAAAAAAAAAZywo9AEAAAAAAAAAw2HmggAAAAAAAAAAPwmC9AEAAAAAAAAApZOLhgAAAAAAAAAAuZ3kgwAAAAAAAAAA9T5qhwAAAAAAAAAAQVGi3gEAAAAAAAAA70Gh9AEAAAAAAAAAFPhRmwEAAAAAAAAAPz%2B3hAAAAAAAAAAANXuLhgAAAAAAAAAAPmOGZQEAAAAAAAAAYUczfwAAAAAAAAAAcXorUAAAAAAAAAAAi5K%2B9AEAAAAAAAAA")]
        [DataRow(false, "Incoming request url is invalid. BillableAccountId param value is longer than 100.", "v7.0/dcd10449-1085-44d2-a444-6cf1ea2736da/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22umexaAAAAAAFAACA%22%2C%22paymentMethodType%22%3A%22mc%22%2C%22partner%22%3A%22Azure%22%2C%22country%22%3A%22EG%22%2C%22language%22%3A%22en-us%22%2C%22piCid%22%3A%22dcd10449-1085-44d2-a444-6cf1ea2736da%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22caid%22%3A%223eeaa679-890c-4fa7-8dec-8d8c89df41f4%22%2C%22isLegacy%22%3Atrue%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22billableAccountId%22%3A%22umexaAAAAAAAAAAA%22%2C%22classicProduct%22%3A%22azureClassic%22%2C%22challengeWindowSize%22%3A%2205%22%7D&operation=Add&classicProduct=azureClassic&billableAccountId=umexaAAAAAAAAAAAu1%2BJ3AEAAAAAAAAA5RrEhgAAAAAAAAAAXzne1gEAAAAAAAAAQPqOewAAAAAAAAAA9aLD3QEAAAAAAAAAYSDi1QEAAAAAAAAAd7ivAQAAAAAAAAAA7deJ9AEAAAAAAAAAD6qlgwAAAAAAAAAAWODEuQEAAAAAAAAAlcJMhwAAAAAAAAAAaS4HhAAAAAAAAAAA&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. BillableAccountId param value is longer than 100.", "v7.0/1b796cf7-447c-4555-b98a-bc836efee74e/challengeDescriptions?timezoneOffset=-60&paymentSessionOrData=%7B%22piid%22%3A%22OpzUIAAAAAAFAACA%22%2C%22paymentMethodType%22%3A%22visa%22%2C%22partner%22%3A%22Azure%22%2C%22country%22%3A%22GB%22%2C%22language%22%3A%22en-gb%22%2C%22piCid%22%3A%221b796cf7-447c-4555-b98a-bc836efee74e%22%2C%22amount%22%3A0%2C%22currency%22%3A%22GBP%22%2C%22caid%22%3A%225d181929-879b-420b-9602-f2544d076c5b%22%2C%22isLegacy%22%3Atrue%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22billableAccountId%22%3A%22OpzUIAAAAAAAAAAA%22%2C%22classicProduct%22%3A%22azureClassic%22%2C%22challengeWindowSize%22%3A%2205%22%7D&operation=RenderPidlPage&classicProduct=azureClassic&billableAccountId=OpzUIAAAAAAAAAAAcTkGfwAAAAAAAAAAT3E%2BSQAAAAAAAAAAAAW3UD1QEAAAAAAAAAA03GHAATRSVVA923AAAAAAAAAAGAEXPWAAAAAAAAAAA&language=en-GB")]
        [DataRow(false, "Incoming request url is invalid. BillableAccountId param value is longer than 100.", "v7.0/c8c99d10-e368-4fcf-a584-1fb0cbedba29/paymentInstrumentsEx?country=vn&language=en&partner=Azure&classicProduct=azureClassic&billableAccountId=8f5B1QEAAAAAAAAAe%2BKPhAAAAAAAAAAAe7wlhwAAAAAAAAAAkXRB9QEAAAAAAAAA e%2BKPhAAAAAAAAAAAe7wlhwAAAAAAAAAA6G5ZIwAAAAAAAAAA")]
        [DataRow(false, "Incoming request url is invalid. BillableAccountId param value is empty.", "v7.0/bd45a89d-48bf-429c-9130-15e3202771b8/paymentMethodDescriptions?type=visa&scenario=azureIbiza&partner=Azure&operation=Update&language=zh-cn&family=credit_card&country=CN&classicProduct=azureClassic&billableAccountId=")]
        [DataRow(true, "Incoming request url is valid", "v7.0/06f8926f-2cf0-48f9-ace7-95d6235bc2d3/paymentMethodDescriptions?partner=Azure&operation=SelectInstance&language=en&country=IT&classicProduct=azureClassic&billableAccountId=7z4H1wEAAAAAAAAA&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.mc%22%2C%22credit_card.amex%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/24eea625-77af-4d80-893b-b890b6ba463a/paymentMethodDescriptions?partner=Azure&operation=SelectInstance&language=fr&country=DZ&classicProduct=azureClassic&billableAccountId=fY6G4gEAAAAAAAAA&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.mc%22%2C%22credit_card.amex%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentInstrumentsEx?country=nl&language=en-US&partner=webblends&completePrerequisites=True&billableAccountId=12334", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentInstrumentsEx?country=nl&language=en-US&partner=oxowebdirect&completePrerequisites=True&billableAccountId=12334", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/312b79b2-f461-4919-8cc4-09d31056981e/challengeDescriptions?timezoneOffset=-60&paymentSessionOrData=%7B%22piid%22%3A%22xlGXewAAAAAEAACA%22%2C%22paymentMethodType%22%3A%22mc%22%2C%22partner%22%3A%22Azure%22%2C%22country%22%3A%22NG%22%2C%22language%22%3A%22en-us%22%2C%22piCid%22%3A%22312b79b2-f461-4919-8cc4-09d31056981e%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22caid%22%3A%225cbaca57-3d9b-4efd-9e9c-31ab48a44262%22%2C%22isLegacy%22%3Atrue%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22billableAccountId%22%3A%22xlGXewAAAAAAAAAA%22%2C%22classicProduct%22%3A%22azureClassic%22%2C%22challengeWindowSize%22%3A%2205%22%7D&operation=RenderPidlPage&classicProduct=azureClassic&billableAccountId=xlGXewAAAAAAAAAA&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/aec7c871-3abd-407b-9abd-efa757c109b6/paymentMethodDescriptions?scenario=azureIbiza&partner=Azure&operation=SelectInstance&language=fr-fr&country=DZ&classicProduct=azureClassic&billableAccountId=W5lz3QEAAAAAAAAA&allowedPaymentMethods=%5B%22credit_card%22%5D", true)]
        [DataRow(false, "Incoming request url is invalid. BillableAccountId param value is longer than 100.", "v7.0/a1f10e1c-64c2-46fd-ac35-d9e457ec100e/paymentInstrumentsEx?country=in&language=en&partner=Azure&classicProduct=azureClassic&billableAccountId=8Wqj5QEAAAAAAAAAZywo9AEAAAAAAAAAw2HmggAAAAAAAAAAPwmC9AEAAAAAAAAApZOLhgAAAAAAAAAAuZ3kgwAAAAAAAAAA9T5qhwAAAAAAAAAAQVGi3gEAAAAAAAAA70Gh9AEAAAAAAAAAFPhRmwEAAAAAAAAAPz%2B3hAAAAAAAAAAANXuLhgAAAAAAAAAAPmOGZQEAAAAAAAAAYUczfwAAAAAAAAAAcXorUAAAAAAAAAAAi5K%2B9AEAAAAAAAAA", true)]
        [DataRow(false, "Incoming request url is invalid. BillableAccountId param value is longer than 100.", "v7.0/dcd10449-1085-44d2-a444-6cf1ea2736da/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22umexaAAAAAAFAACA%22%2C%22paymentMethodType%22%3A%22mc%22%2C%22partner%22%3A%22Azure%22%2C%22country%22%3A%22EG%22%2C%22language%22%3A%22en-us%22%2C%22piCid%22%3A%22dcd10449-1085-44d2-a444-6cf1ea2736da%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22caid%22%3A%223eeaa679-890c-4fa7-8dec-8d8c89df41f4%22%2C%22isLegacy%22%3Atrue%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22billableAccountId%22%3A%22umexaAAAAAAAAAAA%22%2C%22classicProduct%22%3A%22azureClassic%22%2C%22challengeWindowSize%22%3A%2205%22%7D&operation=Add&classicProduct=azureClassic&billableAccountId=umexaAAAAAAAAAAAu1%2BJ3AEAAAAAAAAA5RrEhgAAAAAAAAAAXzne1gEAAAAAAAAAQPqOewAAAAAAAAAA9aLD3QEAAAAAAAAAYSDi1QEAAAAAAAAAd7ivAQAAAAAAAAAA7deJ9AEAAAAAAAAAD6qlgwAAAAAAAAAAWODEuQEAAAAAAAAAlcJMhwAAAAAAAAAAaS4HhAAAAAAAAAAA&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. BillableAccountId param value is longer than 100.", "v7.0/1b796cf7-447c-4555-b98a-bc836efee74e/challengeDescriptions?timezoneOffset=-60&paymentSessionOrData=%7B%22piid%22%3A%22OpzUIAAAAAAFAACA%22%2C%22paymentMethodType%22%3A%22visa%22%2C%22partner%22%3A%22Azure%22%2C%22country%22%3A%22GB%22%2C%22language%22%3A%22en-gb%22%2C%22piCid%22%3A%221b796cf7-447c-4555-b98a-bc836efee74e%22%2C%22amount%22%3A0%2C%22currency%22%3A%22GBP%22%2C%22caid%22%3A%225d181929-879b-420b-9602-f2544d076c5b%22%2C%22isLegacy%22%3Atrue%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22billableAccountId%22%3A%22OpzUIAAAAAAAAAAA%22%2C%22classicProduct%22%3A%22azureClassic%22%2C%22challengeWindowSize%22%3A%2205%22%7D&operation=RenderPidlPage&classicProduct=azureClassic&billableAccountId=OpzUIAAAAAAAAAAAcTkGfwAAAAAAAAAAT3E%2BSQAAAAAAAAAAAAW3UD1QEAAAAAAAAAA03GHAATRSVVA923AAAAAAAAAAGAEXPWAAAAAAAAAAA&language=en-GB", true)]
        [DataRow(false, "Incoming request url is invalid. BillableAccountId param value is longer than 100.", "v7.0/c8c99d10-e368-4fcf-a584-1fb0cbedba29/paymentInstrumentsEx?country=vn&language=en&partner=Azure&classicProduct=azureClassic&billableAccountId=8f5B1QEAAAAAAAAAe%2BKPhAAAAAAAAAAAe7wlhwAAAAAAAAAAkXRB9QEAAAAAAAAA e%2BKPhAAAAAAAAAAAe7wlhwAAAAAAAAAA6G5ZIwAAAAAAAAAA", true)]
        [DataRow(false, "Incoming request url is invalid. BillableAccountId param value is empty.", "v7.0/bd45a89d-48bf-429c-9130-15e3202771b8/paymentMethodDescriptions?type=visa&scenario=azureIbiza&partner=Azure&operation=Update&language=zh-cn&family=credit_card&country=CN&classicProduct=azureClassic&billableAccountId=", true)]

        [DataTestMethod]
        public async Task BillableAccountIdParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/9469f9fd-5651-4556-b31f-f6e6eebd0d17/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=officeoobe&operation=Add&country=pl&language=pl&family=credit_card&completePrerequisites=true&classicProduct=classicProduct")]
        [DataRow(true, "Incoming request url is valid", "v7.0/9469f9fd-5651-4556-b31f-f6e6eebd0d17/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=oxooobe&operation=Add&country=pl&language=pl&family=credit_card&completePrerequisites=true&classicProduct=classicProduct")]
        [DataRow(true, "Incoming request url is valid", "v7.0/fa4b5bfc-d480-4881-bdb2-9d06497e07b3/paymentMethodDescriptions?type=sepa&partner=webblends_inline&operation=Add&country=es&language=es-ES&family=direct_debit&completePrerequisites=true&classicProduct=azureclassic")]
        [DataRow(true, "Incoming request url is valid", "v7.0/fa4b5bfc-d480-4881-bdb2-9d06497e07b3/paymentMethodDescriptions?type=sepa&partner=oxowebdirect&operation=Add&country=es&language=es-ES&family=direct_debit&completePrerequisites=true&classicProduct=azureclassic")]
        [DataRow(true, "Incoming request url is valid", "v7.0/776c1626-968a-49fe-884f-84a115b780f0/paymentMethodDescriptions?type=visa%2Camex%2Cmc&partner=webblends&operation=Add&country=tr&language=tr-TR&family=credit_card&completePrerequisites=true&classicProduct=azureClassic")]
        [DataRow(true, "Incoming request url is valid", "v7.0/199730e1-8f9d-4198-849d-ecfa23061bc5/paymentMethodDescriptions?type=visa%2Camex%2Cmc&partner=webblends&operation=Add&country=in&language=en-IN&family=credit_card&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(true, "Incoming request url is valid", "v7.0/776c1626-968a-49fe-884f-84a115b780f0/paymentMethodDescriptions?type=visa%2Camex%2Cmc&partner=oxowebdirect&operation=Add&country=tr&language=tr-TR&family=credit_card&completePrerequisites=true&classicProduct=azureClassic")]
        [DataRow(true, "Incoming request url is valid", "v7.0/199730e1-8f9d-4198-849d-ecfa23061bc5/paymentMethodDescriptions?type=visa%2Camex%2Cmc&partner=oxowebdirect&operation=Add&country=in&language=en-IN&family=credit_card&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(true, "Incoming request url is valid", "v7.0/82813662-185b-4a41-9b14-c973e64e57fa/paymentInstrumentsEx?country=us&language=en-US&partner=xbox&classicProduct=xboxClassic&completePrerequisites=True")]
        [DataRow(false, "Incoming request url is invalid. ClassicProduct param value has special char.", "v7.0/6cb6ca76-e4e8-4d38-80cb-3c56b4c6e7cc/paymentMethodDescriptions?type=visa%2Camex%2Cmc&partner=webblends&operation=Add&country=kr&language=ko-KR&family=credit_card&completePrerequisites=true&classicProduct=azureClassic^*_Omex")]
        [DataRow(false, "Incoming request url is invalid. ClassicProduct param value has special char.", "v7.0/6cb6ca76-e4e8-4d38-80cb-3c56b4c6e7cc/paymentMethodDescriptions?type=visa%2Camex%2Cmc&partner=oxowebdirect&operation=Add&country=kr&language=ko-KR&family=credit_card&completePrerequisites=true&classicProduct=azureClassic^*_Omex")]
        [DataRow(false, "Incoming request url is invalid. ClassicProduct param value is longer than 30.", "v7.0/dcd10449-1085-44d2-a444-6cf1ea2736da/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22umexaAAAAAAFAACA%22%2C%22paymentMethodType%22%3A%22mc%22%2C%22partner%22%3A%22Azure%22%2C%22country%22%3A%22EG%22%2C%22language%22%3A%22en-us%22%2C%22piCid%22%3A%22dcd10449-1085-44d2-a444-6cf1ea2736da%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22caid%22%3A%223eeaa679-890c-4fa7-8dec-8d8c89df41f4%22%2C%22isLegacy%22%3Atrue%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22billableAccountId%22%3A%22umexaAAAAAAAAAAA%22%2C%22classicProduct%22%3A%22azureClassic%22%2C%22challengeWindowSize%22%3A%2205%22%7D&operation=Add&classicProduct=azureClassic3452azureClassic2033xbocClassic&billableAccountId=umexaAAAAAAAAAAA&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. ClassicProduct param value has special char & is longer than 30.", "v7.0/82813662-185b-4a41-9b14-c973e64e57fa/paymentInstrumentsEx?country=us&language=en-US&partner=xbox&classicProduct=xboxClassi&cazure$#Cl@as(sicxbo[xClassic&completePrerequisites=True")]
        [DataRow(false, "Incoming request url is invalid. ClassicProduct param value has special char & is longer than 30.", "v7.0/465c310a-34bc-41f8-a966-1197c394e3fb/challengeDescriptions?paymentSessionOrData=%7B%22piid%22%3A%22VfC61gEAAAAEAACA%22%2C%22paymentMethodType%22%3A%22mc%22%2C%22partner%22%3A%22Azure%22%2C%22country%22%3A%22DE%22%2C%22language%22%3A%22en%22%2C%22piCid%22%3A%22465c310a-34bc-41f8-a966-1197c394e3fb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22EUR%22%2C%22caid%22%3A%22290bc560-cf57-4ad2-a8fe-08f1dc004053%22%2C%22isLegacy%22%3Atrue%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2205%22%2C%22billableAccountId%22%3A%22VfC61gEAAAAAAAAA%22%2C%22classicProduct%22%3A%22azureClassic%22%7D&operation=RenderPidlPage&classicProduct=azureClassic%%645azure!#Clas?:sic5=69281&billableAccountId=VfC61gEAAAAAAAAA&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. ClassicProduct param value is empty.", "v7.0/71c80eb1-da28-4086-97e0-03fbe3e3e841/paymentInstrumentsEx?country=in&language=en&partner=Azure&classicProduct=&billableAccountId=Tdob3QEAAAAAAAAA")]        
        [DataRow(true, "Incoming request url is valid", "v7.0/9469f9fd-5651-4556-b31f-f6e6eebd0d17/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=officeoobe&operation=Add&country=pl&language=pl&family=credit_card&completePrerequisites=true&classicProduct=classicProduct", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/9469f9fd-5651-4556-b31f-f6e6eebd0d17/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=oxooobe&operation=Add&country=pl&language=pl&family=credit_card&completePrerequisites=true&classicProduct=classicProduct", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/fa4b5bfc-d480-4881-bdb2-9d06497e07b3/paymentMethodDescriptions?type=sepa&partner=webblends_inline&operation=Add&country=es&language=es-ES&family=direct_debit&completePrerequisites=true&classicProduct=azureclassic", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/fa4b5bfc-d480-4881-bdb2-9d06497e07b3/paymentMethodDescriptions?type=sepa&partner=oxowebdirect&operation=Add&country=es&language=es-ES&family=direct_debit&completePrerequisites=true&classicProduct=azureclassic", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/776c1626-968a-49fe-884f-84a115b780f0/paymentMethodDescriptions?type=visa%2Camex%2Cmc&partner=webblends&operation=Add&country=tr&language=tr-TR&family=credit_card&completePrerequisites=true&classicProduct=azureClassic", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/199730e1-8f9d-4198-849d-ecfa23061bc5/paymentMethodDescriptions?type=visa%2Camex%2Cmc&partner=webblends&operation=Add&country=in&language=en-IN&family=credit_card&completePrerequisites=true&classicProduct=Omex", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/776c1626-968a-49fe-884f-84a115b780f0/paymentMethodDescriptions?type=visa%2Camex%2Cmc&partner=oxowebdirect&operation=Add&country=tr&language=tr-TR&family=credit_card&completePrerequisites=true&classicProduct=azureClassic", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/199730e1-8f9d-4198-849d-ecfa23061bc5/paymentMethodDescriptions?type=visa%2Camex%2Cmc&partner=oxowebdirect&operation=Add&country=in&language=en-IN&family=credit_card&completePrerequisites=true&classicProduct=Omex", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/82813662-185b-4a41-9b14-c973e64e57fa/paymentInstrumentsEx?country=us&language=en-US&partner=xbox&classicProduct=xboxClassic&completePrerequisites=True", true)]
        [DataRow(false, "Incoming request url is invalid. ClassicProduct param value has special char.", "v7.0/6cb6ca76-e4e8-4d38-80cb-3c56b4c6e7cc/paymentMethodDescriptions?type=visa%2Camex%2Cmc&partner=webblends&operation=Add&country=kr&language=ko-KR&family=credit_card&completePrerequisites=true&classicProduct=azureClassic^*_Omex", true)]
        [DataRow(false, "Incoming request url is invalid. ClassicProduct param value has special char.", "v7.0/6cb6ca76-e4e8-4d38-80cb-3c56b4c6e7cc/paymentMethodDescriptions?type=visa%2Camex%2Cmc&partner=oxowebdirect&operation=Add&country=kr&language=ko-KR&family=credit_card&completePrerequisites=true&classicProduct=azureClassic^*_Omex", true)]
        [DataRow(false, "Incoming request url is invalid. ClassicProduct param value is longer than 30.", "v7.0/dcd10449-1085-44d2-a444-6cf1ea2736da/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22umexaAAAAAAFAACA%22%2C%22paymentMethodType%22%3A%22mc%22%2C%22partner%22%3A%22Azure%22%2C%22country%22%3A%22EG%22%2C%22language%22%3A%22en-us%22%2C%22piCid%22%3A%22dcd10449-1085-44d2-a444-6cf1ea2736da%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22caid%22%3A%223eeaa679-890c-4fa7-8dec-8d8c89df41f4%22%2C%22isLegacy%22%3Atrue%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22billableAccountId%22%3A%22umexaAAAAAAAAAAA%22%2C%22classicProduct%22%3A%22azureClassic%22%2C%22challengeWindowSize%22%3A%2205%22%7D&operation=Add&classicProduct=azureClassic3452azureClassic2033xbocClassic&billableAccountId=umexaAAAAAAAAAAA&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. ClassicProduct param value has special char & is longer than 30.", "v7.0/82813662-185b-4a41-9b14-c973e64e57fa/paymentInstrumentsEx?country=us&language=en-US&partner=xbox&classicProduct=xboxClassi&cazure$#Cl@as(sicxbo[xClassic&completePrerequisites=True", true)]
        [DataRow(false, "Incoming request url is invalid. ClassicProduct param value has special char & is longer than 30.", "v7.0/465c310a-34bc-41f8-a966-1197c394e3fb/challengeDescriptions?paymentSessionOrData=%7B%22piid%22%3A%22VfC61gEAAAAEAACA%22%2C%22paymentMethodType%22%3A%22mc%22%2C%22partner%22%3A%22Azure%22%2C%22country%22%3A%22DE%22%2C%22language%22%3A%22en%22%2C%22piCid%22%3A%22465c310a-34bc-41f8-a966-1197c394e3fb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22EUR%22%2C%22caid%22%3A%22290bc560-cf57-4ad2-a8fe-08f1dc004053%22%2C%22isLegacy%22%3Atrue%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2205%22%2C%22billableAccountId%22%3A%22VfC61gEAAAAAAAAA%22%2C%22classicProduct%22%3A%22azureClassic%22%7D&operation=RenderPidlPage&classicProduct=azureClassic%%645azure!#Clas?:sic5=69281&billableAccountId=VfC61gEAAAAAAAAA&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. ClassicProduct param value is empty.", "v7.0/71c80eb1-da28-4086-97e0-03fbe3e3e841/paymentInstrumentsEx?country=in&language=en&partner=Azure&classicProduct=&billableAccountId=Tdob3QEAAAAAAAAA", true)]

        [DataTestMethod]
        public async Task ClassicProductParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool isURLValidForParametervalidaters = urlToTest.Contains("classicProduct=xboxClassi&cazure$#Cl@as(sicxbo[xClassic") ? true : false;
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            //  For isURLValidForParametervalidaters, skipping the test because the parameter value is invalid and fails at the check parameterValidators.ContainsKey(queryParam.Key). As a result, we are unable to get the response content as null with a success status code. Therefore, we are skipping this test.
            if (flightStatus && !isURLValidForParametervalidaters && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=webblends&complete=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=oxowebdirect&complete=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=xbox&complete=false")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=bing&complete=True")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=webblends_inline&complete=False")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=oxowebdirect&complete=False")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=webblends&complete=True")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=oxowebdirect&complete=True")]
        [DataRow(false, "Incoming request url is valid. Complete param value has special char.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=xbox&complete=true%2CTrue")]
        [DataRow(false, "Incoming request url is valid. Complete param value has special char and num.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=bing&complete=true&1265")]
        [DataRow(false, "Incoming request url is valid. Complete param value has num.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=webblends_inline&complete=9645true")]
        [DataRow(false, "Incoming request url is valid. Complete param value has num.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=oxowebdirect&complete=9645true")]
        [DataRow(false, "Incoming request url is valid. Complete param value has special char and num.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=webblends&complete=true_1098Yttrue-false")]
        [DataRow(false, "Incoming request url is valid. Complete param value has special char and num.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=oxowebdirect&complete=true_1098Yttrue-false")]
        [DataRow(false, "Incoming request url is valid. Complete param value is empty", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=xbox&complete=")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=webblends&complete=true", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=oxowebdirect&complete=true", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=xbox&complete=false", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=bing&complete=True", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=webblends_inline&complete=False", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=oxowebdirect&complete=False", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=webblends&complete=True", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=oxowebdirect&complete=True", true)]
        [DataRow(false, "Incoming request url is valid. Complete param value has special char.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=xbox&complete=true%2CTrue", true)]
        [DataRow(false, "Incoming request url is valid. Complete param value has special char and num.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=bing&complete=true&1265", true)]
        [DataRow(false, "Incoming request url is valid. Complete param value has num.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=webblends_inline&complete=9645true", true)]
        [DataRow(false, "Incoming request url is valid. Complete param value has num.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=oxowebdirect&complete=9645true", true)]
        [DataRow(false, "Incoming request url is valid. Complete param value has special char and num.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=webblends&complete=true_1098Yttrue-false", true)]
        [DataRow(false, "Incoming request url is valid. Complete param value has special char and num.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=oxowebdirect&complete=true_1098Yttrue-false", true)]
        [DataRow(false, "Incoming request url is valid. Complete param value is empty", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?family=credit_card&country=US&language=en-US&partner=xbox&complete=", true)]

        [DataTestMethod]
        public async Task CompleteProductParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool isURLValidForParametervalidaters = urlToTest.Contains("complete=true&1265") ? true : false;
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            //  For isURLValidForParametervalidaters, skipping the test because the parameter value is invalid and fails at the check parameterValidators.ContainsKey(queryParam.Key). As a result, we are unable to get the response content as null with a success status code. Therefore, we are skipping this test.
            if (flightStatus && !isValidUrl && !isURLValidForParametervalidaters)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/8c3d7cde-c4f6-43a9-b235-6719589616af/addressDescriptions?partner=onedrive&country=GB&language=en-gb&sessionId=ea4dd114-8b34-fd13-668e-27708728e684&completePrerequisites=true&type=billing&operation=Add")]
        [DataRow(true, "Incoming request url is valid", "v7.0/ce5246dc-5a23-48ba-a5f1-cca0e82b880b/paymentInstrumentsEx?country=us&language=en-US&partner=webblends&completePrerequisites=True")]
        [DataRow(true, "Incoming request url is valid", "v7.0/ce5246dc-5a23-48ba-a5f1-cca0e82b880b/paymentInstrumentsEx?country=us&language=en-US&partner=oxowebdirect&completePrerequisites=True")]
        [DataRow(true, "Incoming request url is valid", "v7.0/e9e27c19-dab7-44ff-a94d-ef1ba033daf9/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=officeoobe&operation=Add&country=us&language=en-US&family=credit_card&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(true, "Incoming request url is valid", "v7.0/e9e27c19-dab7-44ff-a94d-ef1ba033daf9/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=oxooobe&operation=Add&country=us&language=en-US&family=credit_card&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(true, "Incoming request url is valid", "v7.0/35b4fcb5-3a28-44dc-b3ea-9e9837d950cd/paymentInstrumentsEx?country=jp&language=ja-JP&partner=cart&completePrerequisites=True&deviceId=6896148170165869")]
        [DataRow(true, "Incoming request url is valid", "v7.0/23d755ef-5ef5-4255-ab60-6ea34abdf944/paymentMethodDescriptions?type=visa%2Camex%2Cmc&partner=webblends&operation=Add&country=in&language=en-IN&family=credit_card&completePrerequisites=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/23d755ef-5ef5-4255-ab60-6ea34abdf944/paymentMethodDescriptions?type=visa%2Camex%2Cmc&partner=oxowebdirect&operation=Add&country=in&language=en-IN&family=credit_card&completePrerequisites=true")]
        [DataRow(false, "Incoming request url is invalid. CompletePrerequisites param value has special char.", "v7.0/89023fb7-3ef8-4e7d-b863-d297ed226ac1/addressDescriptions?partner=onedrive&country=NL&language=en&sessionId=4e28dfd5-2c04-6708-3f39-138b1965b4fd&completePrerequisites=Truetrue%&type=billing&operation=Add")]
        [DataRow(false, "Incoming request url is invalid. CompletePrerequisites param value has special char and num.", "v7.0/40a95793-4ce0-4e0d-917d-7155c9eadb2d/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=officeoobe&operation=Add&country=us&language=en-GB&family=credit_card&completePrerequisites=true%31u278173049sjahjhafhuh19748785&^%$#@16267&classicProduct=Omex")]
        [DataRow(false, "Incoming request url is invalid. CompletePrerequisites param value has special char and num.", "v7.0/40a95793-4ce0-4e0d-917d-7155c9eadb2d/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=oxooobe&operation=Add&country=us&language=en-GB&family=credit_card&completePrerequisites=true%31u278173049sjahjhafhuh19748785&^%$#@16267&classicProduct=Omex")]
        [DataRow(false, "Incoming request url is invalid. CompletePrerequisites param value has num.", "v7.0/099313d7-15d8-4705-bbf8-cae6f9d1a5e2/paymentInstrumentsEx?country=us&language=en-US&partner=webblends&completePrerequisites=True1239772")]
        [DataRow(false, "Incoming request url is invalid. CompletePrerequisites param value has num.", "v7.0/099313d7-15d8-4705-bbf8-cae6f9d1a5e2/paymentInstrumentsEx?country=us&language=en-US&partner=oxowebdirect&completePrerequisites=True1239772")]
        [DataRow(false, "Incoming request url is invalid. CompletePrerequisites param value has special char and num.", "v7.0/52667ea2-4362-4d5c-a897-da5bf704110a/paymentMethodDescriptions?partner=onedrive&country=US&language=en&family=credit_card&sessionId=9f00c850-2f74-acf9-6e01-2b8eddf49af5&completePrerequisites=true%%12*[rue{!`~2193&type=visa%2Camex%2Cmc%2Cdiscover&operation=Add")]
        [DataRow(false, "Incoming request url is invalid. CompletePrerequisites param value is empty.", "v7.0/a23c3a72-d88a-4db2-9b93-538b97e1b534/paymentInstrumentsEx/ee302e02-440d-48a5-b581-1798cc242131?language=zh-CHS&partner=amcweb&country=cn&completePrerequisites=")]        
        [DataRow(true, "Incoming request url is valid", "v7.0/8c3d7cde-c4f6-43a9-b235-6719589616af/addressDescriptions?partner=onedrive&country=GB&language=en-gb&sessionId=ea4dd114-8b34-fd13-668e-27708728e684&completePrerequisites=true&type=billing&operation=Add", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/ce5246dc-5a23-48ba-a5f1-cca0e82b880b/paymentInstrumentsEx?country=us&language=en-US&partner=webblends&completePrerequisites=True", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/ce5246dc-5a23-48ba-a5f1-cca0e82b880b/paymentInstrumentsEx?country=us&language=en-US&partner=oxowebdirect&completePrerequisites=True", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/e9e27c19-dab7-44ff-a94d-ef1ba033daf9/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=officeoobe&operation=Add&country=us&language=en-US&family=credit_card&completePrerequisites=true&classicProduct=Omex", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/e9e27c19-dab7-44ff-a94d-ef1ba033daf9/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=oxooobe&operation=Add&country=us&language=en-US&family=credit_card&completePrerequisites=true&classicProduct=Omex", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/35b4fcb5-3a28-44dc-b3ea-9e9837d950cd/paymentInstrumentsEx?country=jp&language=ja-JP&partner=cart&completePrerequisites=True&deviceId=6896148170165869", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/23d755ef-5ef5-4255-ab60-6ea34abdf944/paymentMethodDescriptions?type=visa%2Camex%2Cmc&partner=webblends&operation=Add&country=in&language=en-IN&family=credit_card&completePrerequisites=true", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/23d755ef-5ef5-4255-ab60-6ea34abdf944/paymentMethodDescriptions?type=visa%2Camex%2Cmc&partner=oxowebdirect&operation=Add&country=in&language=en-IN&family=credit_card&completePrerequisites=true", true)]
        [DataRow(false, "Incoming request url is invalid. CompletePrerequisites param value has special char.", "v7.0/89023fb7-3ef8-4e7d-b863-d297ed226ac1/addressDescriptions?partner=onedrive&country=NL&language=en&sessionId=4e28dfd5-2c04-6708-3f39-138b1965b4fd&completePrerequisites=Truetrue%&type=billing&operation=Add", true)]
        [DataRow(false, "Incoming request url is invalid. CompletePrerequisites param value has special char and num.", "v7.0/40a95793-4ce0-4e0d-917d-7155c9eadb2d/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=officeoobe&operation=Add&country=us&language=en-GB&family=credit_card&completePrerequisites=true%31u278173049sjahjhafhuh19748785&^%$#@16267&classicProduct=Omex", true)]
        [DataRow(false, "Incoming request url is invalid. CompletePrerequisites param value has special char and num.", "v7.0/40a95793-4ce0-4e0d-917d-7155c9eadb2d/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=oxooobe&operation=Add&country=us&language=en-GB&family=credit_card&completePrerequisites=true%31u278173049sjahjhafhuh19748785&^%$#@16267&classicProduct=Omex", true)]
        [DataRow(false, "Incoming request url is invalid. CompletePrerequisites param value has num.", "v7.0/099313d7-15d8-4705-bbf8-cae6f9d1a5e2/paymentInstrumentsEx?country=us&language=en-US&partner=webblends&completePrerequisites=True1239772", true)]
        [DataRow(false, "Incoming request url is invalid. CompletePrerequisites param value has num.", "v7.0/099313d7-15d8-4705-bbf8-cae6f9d1a5e2/paymentInstrumentsEx?country=us&language=en-US&partner=oxowebdirect&completePrerequisites=True1239772", true)]
        [DataRow(false, "Incoming request url is invalid. CompletePrerequisites param value has special char and num.", "v7.0/52667ea2-4362-4d5c-a897-da5bf704110a/paymentMethodDescriptions?partner=onedrive&country=US&language=en&family=credit_card&sessionId=9f00c850-2f74-acf9-6e01-2b8eddf49af5&completePrerequisites=true%%12*[rue{!`~2193&type=visa%2Camex%2Cmc%2Cdiscover&operation=Add", true)]
        [DataRow(false, "Incoming request url is invalid. CompletePrerequisites param value is empty.", "v7.0/a23c3a72-d88a-4db2-9b93-538b97e1b534/paymentInstrumentsEx/ee302e02-440d-48a5-b581-1798cc242131?language=zh-CHS&partner=amcweb&country=cn&completePrerequisites=", true)]

        [DataTestMethod]
        public async Task CompletePrerequisitesParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/259e658d-f29c-4ce6-9a72-2ba15f0f6d44/challengeDescriptions?type=Sms&sessionId=818ff0da-0e5e-4228-847f-e871d7aa0c55&piid=fbe2af43-eaa6-4752-8300-c655c0f8d16f&partner=xbox&operation=RenderPidlPage&country=gb&language=en-GB")]
        [DataRow(true, "Incoming request url is valid", "v7.0/f040e88a-1da9-4f85-8bb1-a70d9e2da5b9/AddressDescriptions?language=es-mx&country=AR&operation=Update&partner=commercialstores&type=hapiServiceUsageAddress")]
        [DataRow(true, "Incoming request url is valid", "v7.0/8d9286ed-1657-4c59-aa94-16b50627a86a/paymentInstrumentsEx?country=us&language=en-US&partner=xbox&completePrerequisites=True")]
        [DataRow(true, "Incoming request url is valid", "v7.0/151e06a7-c2c0-4bd9-814e-131f1bc7a366/paymentMethodDescriptions?partner=amcxbox&operation=Add&country=us&language=en-US&family=mobile_billing_non_sim&completePrerequisites=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4adc12a4-1edf-4e55-8497-2504d15e5e07/TaxIdDescriptions?language=en-us&country=EE&operation=Add&partner=commercialstores&type=commercial_tax_id")]
        [DataRow(false, "Incoming request url is invalid. Country param value is longer than 2.", "v7.0/4404c7a3-64b5-425f-9447-4d3b52ad35c6/paymentMethodDescriptions?type=visa%2Camex%2Cmc&partner=xbox&operation=Add&country=USA&language=es-AR&family=credit_card&completePrerequisites=true")]
        [DataRow(false, "Incoming request url is invalid. Country param value has num and is longer than 2.", "v7.0/8ebd3d80-d429-4611-9751-2c414d1782fc/paymentInstrumentsEx?country=us23&language=en-US&partner=xbox&completePrerequisites=True")]
        [DataRow(false, "Incoming request url is invalid. Country param value has special char and is longer than two.", "v7.0/3b2bf996-a508-4ece-87ef-bf00dbdb6a21/TaxIdDescriptions?language=it-it&country=IT-@$%!it&operation=Add&partner=commercialstores&type=commercial_tax_id")]
        [DataRow(false, "Incoming request url is invalid. Country param value has special char.", "v7.0/124ba958-bfb7-4e13-ba3a-0912036dce67/challengeDescriptions?type=Sms&sessionId=686aaecc-4721-4a1e-a966-f42bdb200b71&piid=ec815252-9586-4a54-a1d3-56d9a66189aa&partner=webblends&operation=RenderPidlPage&country=ru*@[{&}]&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. Country param value has special char.", "v7.0/124ba958-bfb7-4e13-ba3a-0912036dce67/challengeDescriptions?type=Sms&sessionId=686aaecc-4721-4a1e-a966-f42bdb200b71&piid=ec815252-9586-4a54-a1d3-56d9a66189aa&partner=oxowebdirect&operation=RenderPidlPage&country=ru*@[{&}]&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. Country param value is empty.", "v7.0/ab9dbe83-9d47-4e53-8f8c-4807bbb7105d/AddressDescriptions?type=shipping&partner=cart&operation=Add&language=en-US&country=")]
        [DataRow(true, "Incoming request url is valid", "v7.0/259e658d-f29c-4ce6-9a72-2ba15f0f6d44/challengeDescriptions?type=Sms&sessionId=818ff0da-0e5e-4228-847f-e871d7aa0c55&piid=fbe2af43-eaa6-4752-8300-c655c0f8d16f&partner=xbox&operation=RenderPidlPage&country=gb&language=en-GB", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/f040e88a-1da9-4f85-8bb1-a70d9e2da5b9/AddressDescriptions?language=es-mx&country=AR&operation=Update&partner=commercialstores&type=hapiServiceUsageAddress", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/8d9286ed-1657-4c59-aa94-16b50627a86a/paymentInstrumentsEx?country=us&language=en-US&partner=xbox&completePrerequisites=True", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/151e06a7-c2c0-4bd9-814e-131f1bc7a366/paymentMethodDescriptions?partner=amcxbox&operation=Add&country=us&language=en-US&family=mobile_billing_non_sim&completePrerequisites=true", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4adc12a4-1edf-4e55-8497-2504d15e5e07/TaxIdDescriptions?language=en-us&country=EE&operation=Add&partner=commercialstores&type=commercial_tax_id", true)]
        [DataRow(false, "Incoming request url is invalid. Country param value is longer than 2.", "v7.0/4404c7a3-64b5-425f-9447-4d3b52ad35c6/paymentMethodDescriptions?type=visa%2Camex%2Cmc&partner=xbox&operation=Add&country=USA&language=es-AR&family=credit_card&completePrerequisites=true", true)]
        [DataRow(false, "Incoming request url is invalid. Country param value has num and is longer than 2.", "v7.0/8ebd3d80-d429-4611-9751-2c414d1782fc/paymentInstrumentsEx?country=us23&language=en-US&partner=xbox&completePrerequisites=True", true)]
        [DataRow(false, "Incoming request url is invalid. Country param value has special char and is longer than two.", "v7.0/3b2bf996-a508-4ece-87ef-bf00dbdb6a21/TaxIdDescriptions?language=it-it&country=IT-@$%!it&operation=Add&partner=commercialstores&type=commercial_tax_id", true)]
        [DataRow(false, "Incoming request url is invalid. Country param value has special char.", "v7.0/124ba958-bfb7-4e13-ba3a-0912036dce67/challengeDescriptions?type=Sms&sessionId=686aaecc-4721-4a1e-a966-f42bdb200b71&piid=ec815252-9586-4a54-a1d3-56d9a66189aa&partner=webblends&operation=RenderPidlPage&country=ru*@[{&}]&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. Country param value has special char.", "v7.0/124ba958-bfb7-4e13-ba3a-0912036dce67/challengeDescriptions?type=Sms&sessionId=686aaecc-4721-4a1e-a966-f42bdb200b71&piid=ec815252-9586-4a54-a1d3-56d9a66189aa&partner=oxowebdirect&operation=RenderPidlPage&country=ru*@[{&}]&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. Country param value is empty.", "v7.0/ab9dbe83-9d47-4e53-8f8c-4807bbb7105d/AddressDescriptions?type=shipping&partner=cart&operation=Add&language=en-US&country=", true)]

        [DataTestMethod]
        public async Task CountryParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/d1ff41c0-e6ff-498e-b115-8ec183db3c35/paymentInstrumentsEx?country=us&language=en-US&partner=oxowebdirect&completePrerequisites=True&deviceId=6825772397968998 ")]
        [DataRow(true, "Incoming request url is valid", "v7.0/b1c2b78a-810a-40bc-9952-5f527fe717d7/paymentInstrumentsEx?country=us&language=en-US&partner=oxowebdirect&completePrerequisites=True&deviceId=6966501665539155 ")]
        [DataRow(true, "Incoming request url is valid", "v7.0/b1941b81-0c26-44cd-afe7-c65d03becd6f/paymentInstrumentsEx?country=us&language=en-US&partner=oxowebdirect&completePrerequisites=True&deviceId=6966493256189520 ")]
        [DataRow(true, "Incoming request url is valid", " v7.0/ae893e93-2d7e-4351-8da2-8d99d4bfeb53/paymentInstrumentsEx?country=us&language=en-US&partner=oxowebdirect&completePrerequisites=True&deviceId=6896144019849332 ")]
        [DataRow(true, "Incoming request url is valid", "v7.0/d1ff41c0-e6ff-498e-b115-8ec183db3c35/paymentInstrumentsEx?country=us&language=en-US&partner=webblends&completePrerequisites=True&deviceId=6825772397968998 ")]
        [DataRow(true, "Incoming request url is valid", "v7.0/b1c2b78a-810a-40bc-9952-5f527fe717d7/paymentInstrumentsEx?country=us&language=en-US&partner=webblends&completePrerequisites=True&deviceId=6966501665539155 ")]
        [DataRow(true, "Incoming request url is valid", "v7.0/b1941b81-0c26-44cd-afe7-c65d03becd6f/paymentInstrumentsEx?country=us&language=en-US&partner=webblends&completePrerequisites=True&deviceId=6966493256189520 ")]
        [DataRow(true, "Incoming request url is valid", " v7.0/ae893e93-2d7e-4351-8da2-8d99d4bfeb53/paymentInstrumentsEx?country=us&language=en-US&partner=webblends&completePrerequisites=True&deviceId=6896144019849332 ")]
        [DataRow(false, "Incoming request url is invalid. DeviceId param value is longer than 16.", "v7.0/6afa2a12-542b-4fbc-ad5a-012a2dd1b826/paymentInstrumentsEx?country=mx&language=es-MX&partner=webblends&completePrerequisites=True&deviceId=675540424541227487651")]
        [DataRow(false, "Incoming request url is invalid. DeviceId param value is longer than 16.", "v7.0/6afa2a12-542b-4fbc-ad5a-012a2dd1b826/paymentInstrumentsEx?country=mx&language=es-MX&partner=oxowebdirect&completePrerequisites=True&deviceId=675540424541227487651")]
        [DataRow(false, "Incoming request url is invalid. DeviceId param value is less than 16.", "v7.0/485973f6-1ec8-4b17-8829-2cafaf1424b1/paymentInstrumentsEx?country=us&language=en-US&partner=officeoobe&completePrerequisites=True&scenario=rs5&deviceId=6898477193931")]
        [DataRow(false, "Incoming request url is invalid. DeviceId param value is less than 16.", "v7.0/485973f6-1ec8-4b17-8829-2cafaf1424b1/paymentInstrumentsEx?country=us&language=en-US&partner=oxooobe&completePrerequisites=True&scenario=rs5&deviceId=6898477193931")]
        [DataRow(false, "Incoming request url is invalid. DeviceId param value has special char and letters.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentInstrumentsEx?country=us&partner=wallet&language=en-US&deviceId=6GA$%&^*5394077T")]
        [DataRow(false, "Incoming request url is invalid. DeviceId param value has special char, letters and is is longer than 16", "v7.0/2e8855b4-120e-4125-b320-16db522bd50a/paymentInstrumentsEx?country=us&language=en-US&partner=webblends&completePrerequisites=True&deviceId=6825!@#$&*(){}:”!FGUSAVBM()_+#$SHCNMYHJKETAHKA784052446505")]
        [DataRow(false, "Incoming request url is invalid. DeviceId param value has special char, letters and is is longer than 16", "v7.0/2e8855b4-120e-4125-b320-16db522bd50a/paymentInstrumentsEx?country=us&language=en-US&partner=oxowebdirect&completePrerequisites=True&deviceId=6825!@#$&*(){}:”!FGUSAVBM()_+#$SHCNMYHJKETAHKA784052446505")]
        [DataRow(false, "Incoming request url is invalid. DeviceId param value is empty.", "v7.0/dd66480d-00e7-4345-a439-547e4af7432e/paymentInstrumentsEx?country=ca&language=fr-FR&partner=webblends&completePrerequisites=True&deviceId=")]
        [DataRow(false, "Incoming request url is invalid. DeviceId param value is empty.", "v7.0/dd66480d-00e7-4345-a439-547e4af7432e/paymentInstrumentsEx?country=ca&language=fr-FR&partner=oxowebdirect&completePrerequisites=True&deviceId=")]        
        [DataRow(true, "Incoming request url is valid", "v7.0/d1ff41c0-e6ff-498e-b115-8ec183db3c35/paymentInstrumentsEx?country=us&language=en-US&partner=oxowebdirect&completePrerequisites=True&deviceId=6825772397968998 ", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/b1c2b78a-810a-40bc-9952-5f527fe717d7/paymentInstrumentsEx?country=us&language=en-US&partner=oxowebdirect&completePrerequisites=True&deviceId=6966501665539155 ", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/b1941b81-0c26-44cd-afe7-c65d03becd6f/paymentInstrumentsEx?country=us&language=en-US&partner=oxowebdirect&completePrerequisites=True&deviceId=6966493256189520 ", true)]
        [DataRow(true, "Incoming request url is valid", " v7.0/ae893e93-2d7e-4351-8da2-8d99d4bfeb53/paymentInstrumentsEx?country=us&language=en-US&partner=oxowebdirect&completePrerequisites=True&deviceId=6896144019849332 ", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/d1ff41c0-e6ff-498e-b115-8ec183db3c35/paymentInstrumentsEx?country=us&language=en-US&partner=webblends&completePrerequisites=True&deviceId=6825772397968998 ", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/b1c2b78a-810a-40bc-9952-5f527fe717d7/paymentInstrumentsEx?country=us&language=en-US&partner=webblends&completePrerequisites=True&deviceId=6966501665539155 ", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/b1941b81-0c26-44cd-afe7-c65d03becd6f/paymentInstrumentsEx?country=us&language=en-US&partner=webblends&completePrerequisites=True&deviceId=6966493256189520 ", true)]
        [DataRow(true, "Incoming request url is valid", " v7.0/ae893e93-2d7e-4351-8da2-8d99d4bfeb53/paymentInstrumentsEx?country=us&language=en-US&partner=webblends&completePrerequisites=True&deviceId=6896144019849332 ", true)]
        [DataRow(false, "Incoming request url is invalid. DeviceId param value is longer than 16.", "v7.0/6afa2a12-542b-4fbc-ad5a-012a2dd1b826/paymentInstrumentsEx?country=mx&language=es-MX&partner=webblends&completePrerequisites=True&deviceId=675540424541227487651", true)]
        [DataRow(false, "Incoming request url is invalid. DeviceId param value is longer than 16.", "v7.0/6afa2a12-542b-4fbc-ad5a-012a2dd1b826/paymentInstrumentsEx?country=mx&language=es-MX&partner=oxowebdirect&completePrerequisites=True&deviceId=675540424541227487651", true)]
        [DataRow(false, "Incoming request url is invalid. DeviceId param value is less than 16.", "v7.0/485973f6-1ec8-4b17-8829-2cafaf1424b1/paymentInstrumentsEx?country=us&language=en-US&partner=officeoobe&completePrerequisites=True&scenario=rs5&deviceId=6898477193931", true)]
        [DataRow(false, "Incoming request url is invalid. DeviceId param value is less than 16.", "v7.0/485973f6-1ec8-4b17-8829-2cafaf1424b1/paymentInstrumentsEx?country=us&language=en-US&partner=oxooobe&completePrerequisites=True&scenario=rs5&deviceId=6898477193931", true)]
        [DataRow(false, "Incoming request url is invalid. DeviceId param value has special char and letters.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentInstrumentsEx?country=us&partner=wallet&language=en-US&deviceId=6GA$%&^*5394077T", true)]
        [DataRow(false, "Incoming request url is invalid. DeviceId param value has special char, letters and is is longer than 16", "v7.0/2e8855b4-120e-4125-b320-16db522bd50a/paymentInstrumentsEx?country=us&language=en-US&partner=webblends&completePrerequisites=True&deviceId=6825!@#$&*(){}:”!FGUSAVBM()_+#$SHCNMYHJKETAHKA784052446505", true)]
        [DataRow(false, "Incoming request url is invalid. DeviceId param value has special char, letters and is is longer than 16", "v7.0/2e8855b4-120e-4125-b320-16db522bd50a/paymentInstrumentsEx?country=us&language=en-US&partner=oxowebdirect&completePrerequisites=True&deviceId=6825!@#$&*(){}:”!FGUSAVBM()_+#$SHCNMYHJKETAHKA784052446505", true)]
        [DataRow(false, "Incoming request url is invalid. DeviceId param value is empty.", "v7.0/dd66480d-00e7-4345-a439-547e4af7432e/paymentInstrumentsEx?country=ca&language=fr-FR&partner=webblends&completePrerequisites=True&deviceId=", true)]
        [DataRow(false, "Incoming request url is invalid. DeviceId param value is empty.", "v7.0/dd66480d-00e7-4345-a439-547e4af7432e/paymentInstrumentsEx?country=ca&language=fr-FR&partner=oxowebdirect&completePrerequisites=True&deviceId=", true)]

        [DataTestMethod]
        public async Task DeviceIdParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/eb1efefd-0848-40fa-b9ea-812e6303c851/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true&country=us&deviceId=6755405641226928 ")]
        [DataRow(true, "Incoming request url is valid", "v7.0/eec4ce27-2eb9-4f6d-825f-ddbdba32626f/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true&country=us&deviceId=6966507150908440 ")]
        [DataRow(true, "Incoming request url is valid", "v7.0/0621c000-1b76-4cb2-978e-f1415b87810f/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true&country=us&deviceId=6755406754968599 ")]
        [DataRow(true, "Incoming request url is valid", "v7.0/d5f66da2-b811-4fea-8951-fe28fd363787/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true&country=us&deviceId=6825783707455008 ")]
        [DataRow(true, "Incoming request url is valid", "v7.0/abc40002-b967-497b-bb80-9f9ed5d04cd6/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true&country=us&deviceId=6755404093767478 ")]
        [DataRow(false, "Incoming request url is invalid. DeviceIdFilter param value has special char.", "v7.0/323c2e4d-7a44-4c5b-b232-7814158f830c/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true%$#!@&country=us&deviceId=6755416278627891 ")]
        [DataRow(false, "Incoming request url is invalid. DeviceIdFilter param value has num.", "v7.0/33b31667-9dc4-4d16-9e09-d3c93b69f2f4/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true45&country=us&deviceId=6755407980169025")]
        [DataRow(false, "Incoming request url is invalid. DeviceIdFilter param value has special char and num.", "v7.0/7b39822e-14f0-484d-b7fc-93d9b5fb2eb1/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true(*^&%$12483&country=us&deviceId=6896145055307709 ")]
        [DataRow(false, "Incoming request url is invalid. DeviceIdFilter param value has special char and num.", "v7.0/b3aaa9c9-fdae-47c3-8478-83e3db79c498/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true>:?:{}+#$%121489315ASFHJ&^%#!B&country=us&deviceId=6896135476858205")]
        [DataRow(false, "Incoming request url is invalid. DeviceIdFilter param value is empty.", "v7.0/4c8dfffb-2069-434f-959f-7a338db2c716/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=&country=us&deviceId=6896142025489202 ")]
        [DataRow(true, "Incoming request url is valid", "v7.0/eb1efefd-0848-40fa-b9ea-812e6303c851/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true&country=us&deviceId=6755405641226928 ", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/eec4ce27-2eb9-4f6d-825f-ddbdba32626f/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true&country=us&deviceId=6966507150908440 ", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/0621c000-1b76-4cb2-978e-f1415b87810f/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true&country=us&deviceId=6755406754968599 ", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/d5f66da2-b811-4fea-8951-fe28fd363787/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true&country=us&deviceId=6825783707455008 ", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/abc40002-b967-497b-bb80-9f9ed5d04cd6/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true&country=us&deviceId=6755404093767478 ", true)]
        [DataRow(false, "Incoming request url is invalid. DeviceIdFilter param value has special char.", "v7.0/323c2e4d-7a44-4c5b-b232-7814158f830c/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true%$#!@&country=us&deviceId=6755416278627891 ", true)]
        [DataRow(false, "Incoming request url is invalid. DeviceIdFilter param value has num.", "v7.0/33b31667-9dc4-4d16-9e09-d3c93b69f2f4/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true45&country=us&deviceId=6755407980169025", true)]
        [DataRow(false, "Incoming request url is invalid. DeviceIdFilter param value has special char and num.", "v7.0/7b39822e-14f0-484d-b7fc-93d9b5fb2eb1/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true(*^&%$12483&country=us&deviceId=6896145055307709 ", true)]
        [DataRow(false, "Incoming request url is invalid. DeviceIdFilter param value has special char and num.", "v7.0/b3aaa9c9-fdae-47c3-8478-83e3db79c498/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true>:?:{}+#$%121489315ASFHJ&^%#!B&country=us&deviceId=6896135476858205", true)]
        [DataRow(false, "Incoming request url is invalid. DeviceIdFilter param value is empty.", "v7.0/4c8dfffb-2069-434f-959f-7a338db2c716/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=&country=us&deviceId=6896142025489202 ", true)]

        [DataTestMethod]
        public async Task DeviceIdFilterParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/58d2a64d-e486-4347-a813-890ba2f52f75/paymentInstrumentsEx/2aykzQEAAAABAACA?family=credit_card&language=ja-jp&country=JP&partner=commercialstores&scenario=includecvv")]
        [DataRow(true, "Incoming request url is valid", "v7.0/57e29703-925d-4a3a-bf8c-d555acaa2a04/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover&partner=xbox&operation=Add&country=us&language=en-US&family=direct_debit&completePrerequisites=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/0f5bb1a3-d6d1-4bd1-b35b-1173f5047d32/paymentInstrumentsEx/NCqLegAAAAACAACA?family=invoice_credit&language=en-gb&country=GB&partner=commercialstores&scenario=includecvv")]
        [DataRow(true, "Incoming request url is valid", "v7.0/0af25d0a-9acc-4bf6-8e0c-7264740dd78a/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover&partner=webblends&operation=Add&country=us&language=en-US&family=credit_card&completePrerequisites=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/0af25d0a-9acc-4bf6-8e0c-7264740dd78a/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover&partner=oxowebdirect&operation=Add&country=us&language=en-US&family=credit_card&completePrerequisites=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/3273e3ac-bed8-4f4c-8842-02d2586172b9/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover&partner=xbox&operation=Add&country=us&language=en-US&family=credit_card&completePrerequisites=true")]
        [DataRow(false, "Incoming request url is invalid. Family param value has special char.", "v7.0/0911b086-559e-48f5-9354-ed35dbf6c1d3/paymentMethodDescriptions?type=sepa&partner=webblends_inline&operation=Add&country=es&language=es-ES&family=direct-debit$*!*(&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(false, "Incoming request url is invalid. Family param value has special char.", "v7.0/0911b086-559e-48f5-9354-ed35dbf6c1d3/paymentMethodDescriptions?type=sepa&partner=oxowebdirect&operation=Add&country=es&language=es-ES&family=direct-debit$*!*(&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(false, "Incoming request url is invalid. Family param value is longer than 25.", "v7.0/b2c59224-862d-4a74-b3f8-271cd5bb49d1/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cjcb&partner=webblends&operation=Add&country=jp&language=ja-JP&family=credit_carddirect_debitinvoice_credit&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(false, "Incoming request url is invalid. Family param value is longer than 25.", "v7.0/b2c59224-862d-4a74-b3f8-271cd5bb49d1/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cjcb&partner=oxowebdirect&operation=Add&country=jp&language=ja-JP&family=credit_carddirect_debitinvoice_credit&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(false, "Incoming request url is invalid. Family param value special char and longer than 25.", "v7.0/79b4d0b9-63cb-4805-b419-bb7623aa961e/paymentInstrumentsEx/lNNTuAEAAAABAACA?family=direct_debit^&<?:&*direct_debitdirect_debit^&*:{mobile_billing_non_sim!@$offline_bank_transfer)(+&language=de-de&country=DE&partner=commercialstores&scenario=includecvv")]
        [DataRow(false, "Incoming request url is invalid. Family param value is special char and longer than 25", "v7.0/2d554ddf-fb96-4a31-a2dd-833112d2a2ba/paymentInstrumentsEx/kuM7nwEAAAABAACA?type=mc&scenario=azureIbiza&partner=Azure&language=en-us&family=virtual!@*()credit_card!<>”{&direct_debit$%>:{*$%#ewallet$%^&_}:<country=FI")]
        [DataRow(false, "Incoming request url is invalid. Family param value is empty.", "v7.0/3f4d88d7-6728-4512-a2ff-a5cb6e099333/paymentInstrumentsEx/7mQvfAAAAAABAACA?family=&language=en-gb&country=GB&partner=commercialstores&scenario=includecvv")]
        [DataRow(true, "Incoming request url is valid", "v7.0/58d2a64d-e486-4347-a813-890ba2f52f75/paymentInstrumentsEx/2aykzQEAAAABAACA?family=credit_card&language=ja-jp&country=JP&partner=commercialstores&scenario=includecvv", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/57e29703-925d-4a3a-bf8c-d555acaa2a04/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover&partner=xbox&operation=Add&country=us&language=en-US&family=direct_debit&completePrerequisites=true", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/0f5bb1a3-d6d1-4bd1-b35b-1173f5047d32/paymentInstrumentsEx/NCqLegAAAAACAACA?family=invoice_credit&language=en-gb&country=GB&partner=commercialstores&scenario=includecvv", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/0af25d0a-9acc-4bf6-8e0c-7264740dd78a/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover&partner=webblends&operation=Add&country=us&language=en-US&family=credit_card&completePrerequisites=true", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/0af25d0a-9acc-4bf6-8e0c-7264740dd78a/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover&partner=oxowebdirect&operation=Add&country=us&language=en-US&family=credit_card&completePrerequisites=true", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/3273e3ac-bed8-4f4c-8842-02d2586172b9/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover&partner=xbox&operation=Add&country=us&language=en-US&family=credit_card&completePrerequisites=true", true)]
        [DataRow(false, "Incoming request url is invalid. Family param value has special char.", "v7.0/0911b086-559e-48f5-9354-ed35dbf6c1d3/paymentMethodDescriptions?type=sepa&partner=webblends_inline&operation=Add&country=es&language=es-ES&family=direct-debit$*!*(&completePrerequisites=true&classicProduct=Omex", true)]
        [DataRow(false, "Incoming request url is invalid. Family param value has special char.", "v7.0/0911b086-559e-48f5-9354-ed35dbf6c1d3/paymentMethodDescriptions?type=sepa&partner=oxowebdirect&operation=Add&country=es&language=es-ES&family=direct-debit$*!*(&completePrerequisites=true&classicProduct=Omex", true)]
        [DataRow(false, "Incoming request url is invalid. Family param value is longer than 25.", "v7.0/b2c59224-862d-4a74-b3f8-271cd5bb49d1/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cjcb&partner=webblends&operation=Add&country=jp&language=ja-JP&family=credit_carddirect_debitinvoice_credit&completePrerequisites=true&classicProduct=Omex", true)]
        [DataRow(false, "Incoming request url is invalid. Family param value is longer than 25.", "v7.0/b2c59224-862d-4a74-b3f8-271cd5bb49d1/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cjcb&partner=oxowebdirect&operation=Add&country=jp&language=ja-JP&family=credit_carddirect_debitinvoice_credit&completePrerequisites=true&classicProduct=Omex", true)]
        [DataRow(false, "Incoming request url is invalid. Family param value special char and longer than 25.", "v7.0/79b4d0b9-63cb-4805-b419-bb7623aa961e/paymentInstrumentsEx/lNNTuAEAAAABAACA?family=direct_debit^&<?:&*direct_debitdirect_debit^&*:{mobile_billing_non_sim!@$offline_bank_transfer)(+&language=de-de&country=DE&partner=commercialstores&scenario=includecvv", true)]
        [DataRow(false, "Incoming request url is invalid. Family param value is special char and longer than 25", "v7.0/2d554ddf-fb96-4a31-a2dd-833112d2a2ba/paymentInstrumentsEx/kuM7nwEAAAABAACA?type=mc&scenario=azureIbiza&partner=Azure&language=en-us&family=virtual!@*()credit_card!<>”{&direct_debit$%>:{*$%#ewallet$%^&_}:<country=FI", true)]
        [DataRow(false, "Incoming request url is invalid. Family param value is empty.", "v7.0/3f4d88d7-6728-4512-a2ff-a5cb6e099333/paymentInstrumentsEx/7mQvfAAAAAABAACA?family=&language=en-gb&country=GB&partner=commercialstores&scenario=includecvv", true)]

        [DataTestMethod]
        public async Task FamilyParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/ff38df2b-f0b0-4c72-8eed-9b1f7aa34308/paymentMethodDescriptions?sessionId=75e97fc3-320e-426b-a8e8-eef1b89eb7c5&partner=webblends&orderId=fb714078-b427-4273-8edc-2b781b81cf7a&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A0%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/ff38df2b-f0b0-4c72-8eed-9b1f7aa34308/paymentMethodDescriptions?sessionId=75e97fc3-320e-426b-a8e8-eef1b89eb7c5&partner=oxowebdirect&orderId=fb714078-b427-4273-8edc-2b781b81cf7a&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A0%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/65e8dc0e-1c86-455c-acdf-7e2c0fbdda44/paymentMethodDescriptions?sessionId=a77bcb44-9775-44af-8cd3-b2dd530933da&partner=xbox&orderId=c36d33bf-441e-4087-8225-e605932349ce&operation=Select&country=mx&language=es-MX&filters=%7B%22chargeThreshold%22%3A99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/bfe23ebc-d86f-4019-a2fd-1a4da328fdb0/paymentMethodDescriptions?sessionId=720f64ba-9154-495c-97e4-a463f94c68b5&partner=xbox&orderId=13b7de7b-9da0-43a3-9a28-0823328362c4&operation=Select&country=mx&language=es-MX&filters=%7B%22chargeThreshold%22%3A10%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/0e8d89db-4da7-46c0-9bef-0af6f8e7f98c/paymentMethodDescriptions?sessionId=c04144b2-bc70-4337-8f06-04762139d333&partner=xbox&orderId=f3691721-e5a5-413a-9d20-797346dac4bc&operation=Select&country=mx&language=es-MX&filters=%7B%22chargeThreshold%22%3A10%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/89ed3b7b-79fb-45de-8dfc-3348cf11560a/paymentMethodDescriptions?sessionId=20821ef7-e8f5-4be1-86f0-50c34d098678&partner=xbox&orderId=67d6e989-16be-4677-8310-56a81ab4f0c1&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A9.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(false, "Incoming request url is invalid. Filters param value is in invalid Json format. ", "v7.0/0be617c4-c00a-4d04-bdbe-6d776e22ac3b/paymentMethodDescriptions?sessionId=a2f403ae-7345-4fe8-8dcc-b813e3044851&partner=xbox&orderId=fa460bb0-7afa-4bb9-933a-d9ac47f71313&operation=Select&country=us&language=en-US&filters=%22chargeThreshold%22%3A69.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D")]
        [DataRow(false, "Incoming request url is invalid. Filters param value is longer than 500(668).", "v7.0/d3f68fd1-5067-4e4b-93f1-1b69491d1d08/paymentMethodDescriptions?sessionId=0f1abedb-d2bf-4a8b-a3e0-92a08028c48f&partner=xbox&orderId=7452fda4-e64f-4550-a6be-b243c9dd8d09&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A24.99%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A1%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%22chargeThreshold%22%3A208.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%22chargeThreshold%22%3A19.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%5D%%22chargeThreshold%22%3A9.99%2C%22splitPaymentSupported%22%3A%22true%22%7D%22chargeThreshold%22%3A0%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D")]
        [DataRow(false, "Incoming request url is invalid. Filters param value is invalid Json format and is longer than 500(835).", "v7.0/d3f68fd1-5067-4e4b-93f1-1b69491d1d08/paymentMethodDescriptions?sessionId=0f1abedb-d2bf-4a8b-a3e0-92a08028c48f&partner=xbox&orderId=7452fda4-e64f-4550-a6be-b243c9dd8d09&operation=Select&country=us&language=en-US&filters=%22chargeThreshold%22%3A59.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%22chargeThreshold%22%3A14.99%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A79.99%2C%22exclusionTags%22%3A%5B%5D%22chargeThreshold%22%3A9.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%22chargeThreshold%22%3A9.99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A192%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22")]
        [DataRow(false, "Incoming request url is invalid. Filters param value is longer than 500(1186).", "v7.0/6f9162a5-5428-4a10-b47c-1a988725ea30/paymentMethodDescriptions?sessionId=794dce42-5863-4308-9c63-bc43f6ea441e&partner=webblends&orderId=e2d877d2-e0fe-48b3-a47e-7ac34c19c77b&operation=Select&country=au&language=en-US&filters=%7B%22chargeThreshold%22%3A20.07%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%22chargeThreshold%22%3A7.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A9.99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%5D%22chargeThreshold%22%3A4.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%22chargeThreshold%22%3A19.99%2C%22exclusionTags%22%3A%5B%5D%22chargeThreshold%22%3A349%2C%22exclusionTags%22%3A%5B%5D%22chargeThreshold%22%3A62%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A3.99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A2.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A44.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22LowMarginContentVideo%22%5D%22chargeThreshold%22%3A99.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D")]
        [DataRow(false, "Incoming request url is invalid. Filters param value is longer than 500(1186).", "v7.0/6f9162a5-5428-4a10-b47c-1a988725ea30/paymentMethodDescriptions?sessionId=794dce42-5863-4308-9c63-bc43f6ea441e&partner=oxowebdirect&orderId=e2d877d2-e0fe-48b3-a47e-7ac34c19c77b&operation=Select&country=au&language=en-US&filters=%7B%22chargeThreshold%22%3A20.07%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%22chargeThreshold%22%3A7.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A9.99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%5D%22chargeThreshold%22%3A4.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%22chargeThreshold%22%3A19.99%2C%22exclusionTags%22%3A%5B%5D%22chargeThreshold%22%3A349%2C%22exclusionTags%22%3A%5B%5D%22chargeThreshold%22%3A62%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A3.99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A2.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A44.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22LowMarginContentVideo%22%5D%22chargeThreshold%22%3A99.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D")]
        [DataRow(false, "Incoming request url is invalid. Filters param value is empty.", "v7.0/834b9b20-5514-474d-8ff5-36b969358b58/paymentMethodDescriptions?sessionId=627822fc-6795-4ad8-9091-b1c9fe2785f2&partner=xbox&orderId=9e71576c-9b88-4d9c-8dc0-0d2a2422c8e2&operation=Select&country=us&language=en-US&filters=%5D%7D")]       
        [DataRow(true, "Incoming request url is valid", "v7.0/ff38df2b-f0b0-4c72-8eed-9b1f7aa34308/paymentMethodDescriptions?sessionId=75e97fc3-320e-426b-a8e8-eef1b89eb7c5&partner=webblends&orderId=fb714078-b427-4273-8edc-2b781b81cf7a&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A0%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/ff38df2b-f0b0-4c72-8eed-9b1f7aa34308/paymentMethodDescriptions?sessionId=75e97fc3-320e-426b-a8e8-eef1b89eb7c5&partner=oxowebdirect&orderId=fb714078-b427-4273-8edc-2b781b81cf7a&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A0%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/65e8dc0e-1c86-455c-acdf-7e2c0fbdda44/paymentMethodDescriptions?sessionId=a77bcb44-9775-44af-8cd3-b2dd530933da&partner=xbox&orderId=c36d33bf-441e-4087-8225-e605932349ce&operation=Select&country=mx&language=es-MX&filters=%7B%22chargeThreshold%22%3A99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/bfe23ebc-d86f-4019-a2fd-1a4da328fdb0/paymentMethodDescriptions?sessionId=720f64ba-9154-495c-97e4-a463f94c68b5&partner=xbox&orderId=13b7de7b-9da0-43a3-9a28-0823328362c4&operation=Select&country=mx&language=es-MX&filters=%7B%22chargeThreshold%22%3A10%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/0e8d89db-4da7-46c0-9bef-0af6f8e7f98c/paymentMethodDescriptions?sessionId=c04144b2-bc70-4337-8f06-04762139d333&partner=xbox&orderId=f3691721-e5a5-413a-9d20-797346dac4bc&operation=Select&country=mx&language=es-MX&filters=%7B%22chargeThreshold%22%3A10%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/89ed3b7b-79fb-45de-8dfc-3348cf11560a/paymentMethodDescriptions?sessionId=20821ef7-e8f5-4be1-86f0-50c34d098678&partner=xbox&orderId=67d6e989-16be-4677-8310-56a81ab4f0c1&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A9.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(false, "Incoming request url is invalid. Filters param value is in invalid Json format. ", "v7.0/0be617c4-c00a-4d04-bdbe-6d776e22ac3b/paymentMethodDescriptions?sessionId=a2f403ae-7345-4fe8-8dcc-b813e3044851&partner=xbox&orderId=fa460bb0-7afa-4bb9-933a-d9ac47f71313&operation=Select&country=us&language=en-US&filters=%22chargeThreshold%22%3A69.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D", true)]
        [DataRow(false, "Incoming request url is invalid. Filters param value is longer than 500(668).", "v7.0/d3f68fd1-5067-4e4b-93f1-1b69491d1d08/paymentMethodDescriptions?sessionId=0f1abedb-d2bf-4a8b-a3e0-92a08028c48f&partner=xbox&orderId=7452fda4-e64f-4550-a6be-b243c9dd8d09&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A24.99%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A1%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%22chargeThreshold%22%3A208.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%22chargeThreshold%22%3A19.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%5D%%22chargeThreshold%22%3A9.99%2C%22splitPaymentSupported%22%3A%22true%22%7D%22chargeThreshold%22%3A0%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D", true)]
        [DataRow(false, "Incoming request url is invalid. Filters param value is invalid Json format and is longer than 500(835).", "v7.0/d3f68fd1-5067-4e4b-93f1-1b69491d1d08/paymentMethodDescriptions?sessionId=0f1abedb-d2bf-4a8b-a3e0-92a08028c48f&partner=xbox&orderId=7452fda4-e64f-4550-a6be-b243c9dd8d09&operation=Select&country=us&language=en-US&filters=%22chargeThreshold%22%3A59.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%22chargeThreshold%22%3A14.99%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A79.99%2C%22exclusionTags%22%3A%5B%5D%22chargeThreshold%22%3A9.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%22chargeThreshold%22%3A9.99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A192%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22", true)]
        [DataRow(false, "Incoming request url is invalid. Filters param value is longer than 500(1186).", "v7.0/6f9162a5-5428-4a10-b47c-1a988725ea30/paymentMethodDescriptions?sessionId=794dce42-5863-4308-9c63-bc43f6ea441e&partner=webblends&orderId=e2d877d2-e0fe-48b3-a47e-7ac34c19c77b&operation=Select&country=au&language=en-US&filters=%7B%22chargeThreshold%22%3A20.07%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%22chargeThreshold%22%3A7.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A9.99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%5D%22chargeThreshold%22%3A4.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%22chargeThreshold%22%3A19.99%2C%22exclusionTags%22%3A%5B%5D%22chargeThreshold%22%3A349%2C%22exclusionTags%22%3A%5B%5D%22chargeThreshold%22%3A62%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A3.99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A2.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A44.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22LowMarginContentVideo%22%5D%22chargeThreshold%22%3A99.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D", true)]
        [DataRow(false, "Incoming request url is invalid. Filters param value is longer than 500(1186).", "v7.0/6f9162a5-5428-4a10-b47c-1a988725ea30/paymentMethodDescriptions?sessionId=794dce42-5863-4308-9c63-bc43f6ea441e&partner=oxowebdirect&orderId=e2d877d2-e0fe-48b3-a47e-7ac34c19c77b&operation=Select&country=au&language=en-US&filters=%7B%22chargeThreshold%22%3A20.07%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%22chargeThreshold%22%3A7.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A9.99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%5D%22chargeThreshold%22%3A4.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%22chargeThreshold%22%3A19.99%2C%22exclusionTags%22%3A%5B%5D%22chargeThreshold%22%3A349%2C%22exclusionTags%22%3A%5B%5D%22chargeThreshold%22%3A62%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A3.99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A2.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%22chargeThreshold%22%3A44.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22LowMarginContentVideo%22%5D%22chargeThreshold%22%3A99.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D", true)]
        [DataRow(false, "Incoming request url is invalid. Filters param value is empty.", "v7.0/834b9b20-5514-474d-8ff5-36b969358b58/paymentMethodDescriptions?sessionId=627822fc-6795-4ad8-9091-b1c9fe2785f2&partner=xbox&orderId=9e71576c-9b88-4d9c-8dc0-0d2a2422c8e2&operation=Select&country=us&language=en-US&filters=%5D%7D", true)]

        [DataTestMethod]
        public async Task FiltersParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));
                    
                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/0aaaef6d-2379-48e1-83db-4ea5ad3948d8/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Chipercard&partner=webblends&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&ignoreMissingTaxId=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/0aaaef6d-2379-48e1-83db-4ea5ad3948d8/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Chipercard&partner=oxowebdirect&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&ignoreMissingTaxId=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/9adc9b86-0cf7-47e1-8fbf-b7ef714f3f6a/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=officeoobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4e54a88d-8b9b-4e82-b9eb-cb2a47c547d2/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=officeoobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/9adc9b86-0cf7-47e1-8fbf-b7ef714f3f6a/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=oxooobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4e54a88d-8b9b-4e82-b9eb-cb2a47c547d2/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=oxooobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/3b7fd045-d6bc-4d07-b544-2fb6df20913d/paymentMethodDescriptions?type=paypal&partner=xbox&operation=Add&country=br&language=pt-BR&family=ewallet&completePrerequisites=true&ignoreMissingTaxId=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/22e9b71f-c761-40fe-bef1-b13394aaf816/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=officeoobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/22e9b71f-c761-40fe-bef1-b13394aaf816/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=oxooobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true")]
        [DataRow(false, "Incoming request url is invalid. IgnoreMissingTaxId param value has special char.", "v7.0/69f7a957-acbe-4ab4-a323-4ef6e022cf83/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Chipercard&partner=webblends&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true&%$>!$&()@")]
        [DataRow(false, "Incoming request url is invalid. IgnoreMissingTaxId param value has special char.", "v7.0/69f7a957-acbe-4ab4-a323-4ef6e022cf83/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Chipercard&partner=oxowebdirect&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true&%$>!$&()@")]
        [DataRow(false, "Incoming request url is invalid. IgnoreMissingTaxId param value has special char and num.", "v7.0/47196e5a-5fda-4a12-aa47-90c1d3f99bad/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=officeoobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true147941$%^&*(){}@145723")]
        [DataRow(false, "Incoming request url is invalid. IgnoreMissingTaxId param value has special char and num.", "v7.0/47196e5a-5fda-4a12-aa47-90c1d3f99bad/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=oxooobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true147941$%^&*(){}@145723")]
        [DataRow(false, "Incoming request url is invalid. IgnoreMissingTaxId param value has num.", "v7.0/396ea48a-777a-49c1-bc46-6b2d4768eeb1/paymentMethodDescriptions?type=paypal&partner=amcxbox&operation=Add&country=br&language=pt-BR&family=ewallet&completePrerequisites=true&ignoreMissingTaxId=true789416")]
        [DataRow(false, "Incoming request url is invalid. IgnoreMissingTaxId param value has special char and num.", "v7.0/74faa584-c282-40f3-ba02-25eda8ebc437/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=officeoobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true1279%@#%457")]
        [DataRow(false, "Incoming request url is invalid. IgnoreMissingTaxId param value has special char and num.", "v7.0/74faa584-c282-40f3-ba02-25eda8ebc437/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=oxooobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true1279%@#%457")]
        [DataRow(false, "Incoming request url is invalid. IgnoreMissingTaxId param value is empty", "v7.0/67026729-fa7a-4f7c-ad95-542080762455/paymentMethodDescriptions?partner=amcweb&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&ignoreMissingTaxId=")]      
        [DataRow(true, "Incoming request url is valid", "v7.0/0aaaef6d-2379-48e1-83db-4ea5ad3948d8/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Chipercard&partner=webblends&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&ignoreMissingTaxId=true", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/0aaaef6d-2379-48e1-83db-4ea5ad3948d8/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Chipercard&partner=oxowebdirect&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&ignoreMissingTaxId=true", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/9adc9b86-0cf7-47e1-8fbf-b7ef714f3f6a/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=officeoobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4e54a88d-8b9b-4e82-b9eb-cb2a47c547d2/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=officeoobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/9adc9b86-0cf7-47e1-8fbf-b7ef714f3f6a/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=oxooobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4e54a88d-8b9b-4e82-b9eb-cb2a47c547d2/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=oxooobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/3b7fd045-d6bc-4d07-b544-2fb6df20913d/paymentMethodDescriptions?type=paypal&partner=xbox&operation=Add&country=br&language=pt-BR&family=ewallet&completePrerequisites=true&ignoreMissingTaxId=true", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/22e9b71f-c761-40fe-bef1-b13394aaf816/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=officeoobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/22e9b71f-c761-40fe-bef1-b13394aaf816/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=oxooobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true", true)]
        [DataRow(false, "Incoming request url is invalid. IgnoreMissingTaxId param value has special char.", "v7.0/69f7a957-acbe-4ab4-a323-4ef6e022cf83/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Chipercard&partner=webblends&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true&%$>!$&()@", true)]
        [DataRow(false, "Incoming request url is invalid. IgnoreMissingTaxId param value has special char.", "v7.0/69f7a957-acbe-4ab4-a323-4ef6e022cf83/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Chipercard&partner=oxowebdirect&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true&%$>!$&()@", true)]
        [DataRow(false, "Incoming request url is invalid. IgnoreMissingTaxId param value has special char and num.", "v7.0/47196e5a-5fda-4a12-aa47-90c1d3f99bad/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=officeoobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true147941$%^&*(){}@145723", true)]
        [DataRow(false, "Incoming request url is invalid. IgnoreMissingTaxId param value has special char and num.", "v7.0/47196e5a-5fda-4a12-aa47-90c1d3f99bad/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=oxooobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true147941$%^&*(){}@145723", true)]
        [DataRow(false, "Incoming request url is invalid. IgnoreMissingTaxId param value has num.", "v7.0/396ea48a-777a-49c1-bc46-6b2d4768eeb1/paymentMethodDescriptions?type=paypal&partner=amcxbox&operation=Add&country=br&language=pt-BR&family=ewallet&completePrerequisites=true&ignoreMissingTaxId=true789416", true)]
        [DataRow(false, "Incoming request url is invalid. IgnoreMissingTaxId param value has special char and num.", "v7.0/74faa584-c282-40f3-ba02-25eda8ebc437/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=officeoobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true1279%@#%457", true)]
        [DataRow(false, "Incoming request url is invalid. IgnoreMissingTaxId param value has special char and num.", "v7.0/74faa584-c282-40f3-ba02-25eda8ebc437/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercard&scenario=rs5&partner=oxooobe&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&classicProduct=Omex&ignoreMissingTaxId=true1279%@#%457", true)]
        [DataRow(false, "Incoming request url is invalid. IgnoreMissingTaxId param value is empty", "v7.0/67026729-fa7a-4f7c-ad95-542080762455/paymentMethodDescriptions?partner=amcweb&operation=Add&country=br&language=pt-BR&family=credit_card&completePrerequisites=true&ignoreMissingTaxId=", true)]

        [DataTestMethod]
        public async Task IgnoreMissingTaxIdParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool isURLValidForParametervalidaters = urlToTest.Contains("ignoreMissingTaxId=true&%$>!$&()@") ? true : false;
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            //  For isURLValidForParametervalidaters, skipping the test because the parameter value is invalid and fails at the check parameterValidators.ContainsKey(queryParam.Key). As a result, we are unable to get the response content as null with a success status code. Therefore, we are skipping this test.
            if (flightStatus && !isURLValidForParametervalidaters && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=webblends_inline&piid=TestPiid&type=cvv&sessionId=123456")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=oxowebdirect&piid=TestPiid&type=cvv&sessionId=123456")]
        [DataRow(true, "Incoming request url is valid", "v7.0/02a0df29-d9b1-4450-8eaa-d79b4a9f726b/AddressDescriptions?type=shipping&partner=cart&operation=Add&language=sv-SE%2Cang-Latn%2Cen-GB%2Cen-US%2Cja%2Cbxr-Cyrl%2Cru&country=US")]
        [DataRow(true, "Incoming request url is valid", " v7.0/f6fa34a2-34a8-44f3-9744-bd6127a2d778/TaxIdDescriptions?language=de-DE%2Cen-DE%2Cen-US%2Cen-GB&country=NL&operation=Add&partner=commercialstores&type=commercial_tax_id")]
        [DataRow(true, "Incoming request url is valid", " v7.0/c6b3e48e-10e2-4fd5-a332-3bde82f88427/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22m0nJAgAAAAALAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22cart%22%2C%22piCid%22%3A%22c6b3e48e-10e2-4fd5-a332-3bde82f88427%22%2C%22amount%22%3A29.99%2C%22currency%22%3A%22GBP%22%2C%22country%22%3A%22GB%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%7D&operation=Add&language=de-CH%2Cde-DE%2Csv-SE%2Cfr-CH")]
        [DataRow(true, "Incoming request url is valid", "v7.0/54e75782-ac14-4d39-901a-fe136bd445c2/paymentInstrumentsEx?country=in&language=de-DE_phoneb&partner=webblends&completePrerequisites=True&deviceId=6896139822538055")]
        [DataRow(true, "Incoming request url is valid", "v7.0/54e75782-ac14-4d39-901a-fe136bd445c2/paymentInstrumentsEx?country=in&language=de-DE_phoneb&partner=oxowebdirect&completePrerequisites=True&deviceId=6896139822538055")]
        [DataRow(false, "Incoming request url is invalid. Language param value has special char.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentmethodDescriptions?family=credit_card&language=es-MX@!%*&country=us&operation=Add")]
        [DataRow(false, "Incoming request url is invalid. Language param value is longer than 200(212).", "v7.0/f5122db7-ebd2-451e-b96c-f39f5b781e18/paymentInstrumentsEx?country=pt&language=en-US%2Ces-ES%2Ces-MX%2Cfr-FR%2Cfr-CA%2Cde-DE%2Cit-IT%2Cpt-PT%2Cru%2Cvi%2Czh-Hant-TW%2Cja%2Cko%2Car-EG%2Che%2Ctr%2Cfa%2Chi%2Czh-Hans-CN%2Cchr-Cher%2Cpl%2Cam%2Cen-BB%2Cen-BS%2Cen-AT%2Cen-AU%2Cen-AG%2Cen-AI%2Cen-AS%2Cen-US%2Cfr-CA%2Car-YE%2Cen-US%2Cfr-FR%2Car-TN%2Cen-TT%2Cen-AU%2Cen-US%2Ces-AR%2Ces-ES%2Cen-US&partner=webblends&completePrerequisites=True")]
        [DataRow(false, "Incoming request url is invalid. Language param value is longer than 200(212).", "v7.0/f5122db7-ebd2-451e-b96c-f39f5b781e18/paymentInstrumentsEx?country=pt&language=en-US%2Ces-ES%2Ces-MX%2Cfr-FR%2Cfr-CA%2Cde-DE%2Cit-IT%2Cpt-PT%2Cru%2Cvi%2Czh-Hant-TW%2Cja%2Cko%2Car-EG%2Che%2Ctr%2Cfa%2Chi%2Czh-Hans-CN%2Cchr-Cher%2Cpl%2Cam%2Cen-BB%2Cen-BS%2Cen-AT%2Cen-AU%2Cen-AG%2Cen-AI%2Cen-AS%2Cen-US%2Cfr-CA%2Car-YE%2Cen-US%2Cfr-FR%2Car-TN%2Cen-TT%2Cen-AU%2Cen-US%2Ces-AR%2Ces-ES%2Cen-US&partner=oxowebdirect&completePrerequisites=True")]
        [DataRow(false, "Incoming request url is invalid. Language param value special char and longer than 200(312).", "v7.0/3b2bf996-a508-4ece-87ef-bf00dbdb6a21/TaxIdDescriptions?language=sv-^)!$SE%2Cang-Latn%2Cen-GB%2Cen-US%2Cja%2Cbxr-Cyrl%2Cru%2Cen-GB%2Cen-ZA%2Cen-US%2Cel%2Ces-MX%2Ces!@&^%*{-VE%2Csv-SE%2Cen-US%2Cth%2Cen-US%2Cru%2Cde-AT%2Cen-AT%2Cen-US%2Cen-GB%2C de-$!*AT%2Cen-US%2C de-CH%2Cen-US%2C en-GB%2Cen-CA%2C es-MX%2Cen-US%2C sv-SE%2Cda%2C en-SA%2Cen-GB%2C en-US%2Cfi%2Cbxr-Cyrl%2Cel%2C zh-Hans-CN%2Cen-US%2Cja&country=IT&operation=Add&partner=commercialstores&type=commercial_tax_id")]
        [DataRow(false, "Incoming request url is invalid. Language param value is special char and longer than 200(410)", "v7.0/f49731d3-2b99-4bd1-8c08-2390fcaf6b82/AddressDescriptions?type=billing&partner=cart&operation=Add&language=en-US%2Cen!#&-BB%2Cen-BS%2Cen@)%*&-AT%2Cen-AU%2Cen-AG%2Cen-AI%2Cen!%*!&-AS%2Cde-IT%2Cde-DE%2Cen-US%2Cen-US%2Cru%2Che%2Cfr-BE%2Cen-US%2Cfr-FR%2C en-US%2Cro-RO%2Cen-IE%2Cen-US%2Cen-GB%2Cfr-F+<R%2Cit-IT%2Cde-DE%2Ces-ES%2Cen-GB%2Cda%2Czh-Hans-CN%2Czh-Hant-TW%2Cen-IE%2Cen-US%2Ces-419%2Cen-GB%2Ces-ES%2Cen-US%2Cru%2Chy%2Cen-DK%2Cda%2Cen-US%2Cen-US%2Cda%2Czh-Hans-CN%2Czh:-Hant-TW%2Cja%2Cen-US%2Cen-CZ%2Cen-GB%2Cro-RO")]
        [DataRow(false, "Incoming request url is invalid. Language param value is empty.", "v7.0/df1f9fc9-b056-494f-ab18-113bb8c88b45/challengeDescriptions?type=Sms&sessionId=b6024664-39f9-4272-8903-7cf334f4c486&piid=071d7a49-ed92-4872-9fbb-10b8a780dd53&partner=webblends&operation=RenderPidlPage&country=de&language=")]
        [DataRow(false, "Incoming request url is invalid. Language param value is empty.", "v7.0/df1f9fc9-b056-494f-ab18-113bb8c88b45/challengeDescriptions?type=Sms&sessionId=b6024664-39f9-4272-8903-7cf334f4c486&piid=071d7a49-ed92-4872-9fbb-10b8a780dd53&partner=oxowebdirect&operation=RenderPidlPage&country=de&language=")]
        [DataRow(false, "Incoming request url is invalid. Language param value is not match with regex", "v7.0/df1f9fc9-b056-494f-ab18-113bb8c88b45/paymentInstrumentsEx?language=en-US%27and(select%271%27from/**/cast(md5(1700811052)as/**/int))%3E%270&partner=amc&status=active")]     
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=webblends_inline&piid=TestPiid&type=cvv&sessionId=123456", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=oxowebdirect&piid=TestPiid&type=cvv&sessionId=123456", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/02a0df29-d9b1-4450-8eaa-d79b4a9f726b/AddressDescriptions?type=shipping&partner=cart&operation=Add&language=sv-SE%2Cang-Latn%2Cen-GB%2Cen-US%2Cja%2Cbxr-Cyrl%2Cru&country=US", true)]
        [DataRow(true, "Incoming request url is valid", " v7.0/f6fa34a2-34a8-44f3-9744-bd6127a2d778/TaxIdDescriptions?language=de-DE%2Cen-DE%2Cen-US%2Cen-GB&country=NL&operation=Add&partner=commercialstores&type=commercial_tax_id", true)]
        [DataRow(true, "Incoming request url is valid", " v7.0/c6b3e48e-10e2-4fd5-a332-3bde82f88427/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22m0nJAgAAAAALAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22cart%22%2C%22piCid%22%3A%22c6b3e48e-10e2-4fd5-a332-3bde82f88427%22%2C%22amount%22%3A29.99%2C%22currency%22%3A%22GBP%22%2C%22country%22%3A%22GB%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%7D&operation=Add&language=de-CH%2Cde-DE%2Csv-SE%2Cfr-CH", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/54e75782-ac14-4d39-901a-fe136bd445c2/paymentInstrumentsEx?country=in&language=de-DE_phoneb&partner=webblends&completePrerequisites=True&deviceId=6896139822538055", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/54e75782-ac14-4d39-901a-fe136bd445c2/paymentInstrumentsEx?country=in&language=de-DE_phoneb&partner=oxowebdirect&completePrerequisites=True&deviceId=6896139822538055", true)]
        [DataRow(false, "Incoming request url is invalid. Language param value has special char.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentmethodDescriptions?family=credit_card&language=es-MX@!%*&country=us&operation=Add", true)]
        [DataRow(false, "Incoming request url is invalid. Language param value is longer than 200(212).", "v7.0/f5122db7-ebd2-451e-b96c-f39f5b781e18/paymentInstrumentsEx?country=pt&language=en-US%2Ces-ES%2Ces-MX%2Cfr-FR%2Cfr-CA%2Cde-DE%2Cit-IT%2Cpt-PT%2Cru%2Cvi%2Czh-Hant-TW%2Cja%2Cko%2Car-EG%2Che%2Ctr%2Cfa%2Chi%2Czh-Hans-CN%2Cchr-Cher%2Cpl%2Cam%2Cen-BB%2Cen-BS%2Cen-AT%2Cen-AU%2Cen-AG%2Cen-AI%2Cen-AS%2Cen-US%2Cfr-CA%2Car-YE%2Cen-US%2Cfr-FR%2Car-TN%2Cen-TT%2Cen-AU%2Cen-US%2Ces-AR%2Ces-ES%2Cen-US&partner=webblends&completePrerequisites=True", true)]
        [DataRow(false, "Incoming request url is invalid. Language param value is longer than 200(212).", "v7.0/f5122db7-ebd2-451e-b96c-f39f5b781e18/paymentInstrumentsEx?country=pt&language=en-US%2Ces-ES%2Ces-MX%2Cfr-FR%2Cfr-CA%2Cde-DE%2Cit-IT%2Cpt-PT%2Cru%2Cvi%2Czh-Hant-TW%2Cja%2Cko%2Car-EG%2Che%2Ctr%2Cfa%2Chi%2Czh-Hans-CN%2Cchr-Cher%2Cpl%2Cam%2Cen-BB%2Cen-BS%2Cen-AT%2Cen-AU%2Cen-AG%2Cen-AI%2Cen-AS%2Cen-US%2Cfr-CA%2Car-YE%2Cen-US%2Cfr-FR%2Car-TN%2Cen-TT%2Cen-AU%2Cen-US%2Ces-AR%2Ces-ES%2Cen-US&partner=oxowebdirect&completePrerequisites=True", true)]
        [DataRow(false, "Incoming request url is invalid. Language param value special char and longer than 200(312).", "v7.0/3b2bf996-a508-4ece-87ef-bf00dbdb6a21/TaxIdDescriptions?language=sv-^)!$SE%2Cang-Latn%2Cen-GB%2Cen-US%2Cja%2Cbxr-Cyrl%2Cru%2Cen-GB%2Cen-ZA%2Cen-US%2Cel%2Ces-MX%2Ces!@&^%*{-VE%2Csv-SE%2Cen-US%2Cth%2Cen-US%2Cru%2Cde-AT%2Cen-AT%2Cen-US%2Cen-GB%2C de-$!*AT%2Cen-US%2C de-CH%2Cen-US%2C en-GB%2Cen-CA%2C es-MX%2Cen-US%2C sv-SE%2Cda%2C en-SA%2Cen-GB%2C en-US%2Cfi%2Cbxr-Cyrl%2Cel%2C zh-Hans-CN%2Cen-US%2Cja&country=IT&operation=Add&partner=commercialstores&type=commercial_tax_id", true)]
        [DataRow(false, "Incoming request url is invalid. Language param value is special char and longer than 200(410)", "v7.0/f49731d3-2b99-4bd1-8c08-2390fcaf6b82/AddressDescriptions?type=billing&partner=cart&operation=Add&language=en-US%2Cen!#&-BB%2Cen-BS%2Cen@)%*&-AT%2Cen-AU%2Cen-AG%2Cen-AI%2Cen!%*!&-AS%2Cde-IT%2Cde-DE%2Cen-US%2Cen-US%2Cru%2Che%2Cfr-BE%2Cen-US%2Cfr-FR%2C en-US%2Cro-RO%2Cen-IE%2Cen-US%2Cen-GB%2Cfr-F+<R%2Cit-IT%2Cde-DE%2Ces-ES%2Cen-GB%2Cda%2Czh-Hans-CN%2Czh-Hant-TW%2Cen-IE%2Cen-US%2Ces-419%2Cen-GB%2Ces-ES%2Cen-US%2Cru%2Chy%2Cen-DK%2Cda%2Cen-US%2Cen-US%2Cda%2Czh-Hans-CN%2Czh:-Hant-TW%2Cja%2Cen-US%2Cen-CZ%2Cen-GB%2Cro-RO", true)]
        [DataRow(false, "Incoming request url is invalid. Language param value is empty.", "v7.0/df1f9fc9-b056-494f-ab18-113bb8c88b45/challengeDescriptions?type=Sms&sessionId=b6024664-39f9-4272-8903-7cf334f4c486&piid=071d7a49-ed92-4872-9fbb-10b8a780dd53&partner=webblends&operation=RenderPidlPage&country=de&language=", true)]
        [DataRow(false, "Incoming request url is invalid. Language param value is empty.", "v7.0/df1f9fc9-b056-494f-ab18-113bb8c88b45/challengeDescriptions?type=Sms&sessionId=b6024664-39f9-4272-8903-7cf334f4c486&piid=071d7a49-ed92-4872-9fbb-10b8a780dd53&partner=oxowebdirect&operation=RenderPidlPage&country=de&language=", true)]
        [DataRow(false, "Incoming request url is invalid. Language param value is not match with regex", "v7.0/df1f9fc9-b056-494f-ab18-113bb8c88b45/paymentInstrumentsEx?language=en-US%27and(select%271%27from/**/cast(md5(1700811052)as/**/int))%3E%270&partner=amc&status=active", true)]
        [DataTestMethod]
        public async Task LanguageParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/e8edd0c1-7e4e-4bee-b01b-9ef7d0ddda83/paymentMethodDescriptions?type=paypal&partner=xbox&operation=Add&country=cz&language=en-CZ&family=ewallet&completePrerequisites=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/d0e99805-24ba-4224-858e-70cb635e82c2/TaxIdDescriptions?language=fr-fr&country=FR&operation=Add&partner=commercialstores&type=commercial_tax_id")]
        [DataRow(true, "Incoming request url is valid", "v7.0/d06cb846-b1c9-410a-9f9d-17bfe6174e89/challengeDescriptions?operation=RenderPidlPage&paymentSessionOrData=%7B%22piid%22%3A%224xJlhAAAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22commercialstores%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22challengeWindowSize%22%3A%2202%22%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22isLegacy%22%3Atrue%2C%22piCid%22%3A%22d06cb846-b1c9-410a-9f9d-17bfe6174e89%22%2C%22caid%22%3A%2201054882-a937-4a11-addd-a8a8950e07fe%22%7D&timezoneOffset=240&language=en-US")]
        [DataRow(true, "Incoming request url is valid", "v7.0/559337d6-5b8b-4349-8017-91c7b5bb8cca/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22RSq9EgAAAAAUAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22cart%22%2C%22piCid%22%3A%22559337d6-5b8b-4349-8017-91c7b5bb8cca%22%2C%22amount%22%3A359.1%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%7D&operation=Add&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. Operation param value has special char.", "v7.0/40c609cd-1d68-41e6-ab81-fd760605fd30/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22QSbChgAAAAABAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2240c609cd-1d68-41e6-ab81-fd760605fd30%22%2C%22amount%22%3A7.49%2C%22currency%22%3A%22GBP%22%2C%22country%22%3A%22GB%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=RenderPidlPage!@&*(@&language=en-GB")]
        [DataRow(false, "Incoming request url is invalid. Operation param value has special char.", "v7.0/40c609cd-1d68-41e6-ab81-fd760605fd30/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22QSbChgAAAAABAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22oxowebdirects%22%2C%22piCid%22%3A%2240c609cd-1d68-41e6-ab81-fd760605fd30%22%2C%22amount%22%3A7.49%2C%22currency%22%3A%22GBP%22%2C%22country%22%3A%22GB%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=RenderPidlPage!@&*(@&language=en-GB")]
        [DataRow(false, "Incoming request url is invalid. Operation param value is longer than 25.", "v7.0/46e5a36a-33c8-4480-b254-1e45fad1e573/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover&partner=xbox&operation=SelectAddSelectInstanceUpdateselectInstanceReplace&country=us&language=en-US&family=credit_card&completePrerequisites=true")]
        [DataRow(false, "Incoming request url is invalid. Operation param value special char and longer than 25.", "v7.0/f6fa34a2-34a8-44f3-9744-bd6127a2d778/TaxIdDescriptions?language=nl-nl&country=NL&operation=SelectSingleInstance%^&*!FundStoredValue&partner=commercialstores&type=commercial_tax_id")]
        [DataRow(false, "Incoming request url is invalid. Operation param value is special char and longer than 25", "v7.0/094f645d-4102-4ef1-abe1-595839fe8756/challengeDescriptions?operation=Show(*@$%Replace():{}>Validate?$%&&Instanceupdateselect&timezoneOffset=420&paymentSessionOrData=%7B%22amount%22%3A10.3%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%2C%22currency%22%3A%22eur%22%2C%22country%22%3A%22de%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22AppInsights%22%2C%22piid%22%3A%2250cd99ef-aa38-4123-ab10-6e8f2d375e6a%22%2C%22caid%22%3A%22%22%7D&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. Operation param value is empty.", "v7.0/0320e90a-74b7-4f87-87a5-7a2c25b50121/AddressDescriptions?type=shipping&partner=cart&operation=&language=en-GB&country=gb")]       
        [DataRow(true, "Incoming request url is valid", "v7.0/e8edd0c1-7e4e-4bee-b01b-9ef7d0ddda83/paymentMethodDescriptions?type=paypal&partner=xbox&operation=Add&country=cz&language=en-CZ&family=ewallet&completePrerequisites=true", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/d0e99805-24ba-4224-858e-70cb635e82c2/TaxIdDescriptions?language=fr-fr&country=FR&operation=Add&partner=commercialstores&type=commercial_tax_id", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/d06cb846-b1c9-410a-9f9d-17bfe6174e89/challengeDescriptions?operation=RenderPidlPage&paymentSessionOrData=%7B%22piid%22%3A%224xJlhAAAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22commercialstores%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22challengeWindowSize%22%3A%2202%22%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22isLegacy%22%3Atrue%2C%22piCid%22%3A%22d06cb846-b1c9-410a-9f9d-17bfe6174e89%22%2C%22caid%22%3A%2201054882-a937-4a11-addd-a8a8950e07fe%22%7D&timezoneOffset=240&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/559337d6-5b8b-4349-8017-91c7b5bb8cca/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22RSq9EgAAAAAUAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22cart%22%2C%22piCid%22%3A%22559337d6-5b8b-4349-8017-91c7b5bb8cca%22%2C%22amount%22%3A359.1%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%7D&operation=Add&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?country=us&language=en-US&partner=parentalconsentweb&operation=validateInstance", true)]
        [DataRow(false, "Incoming request url is invalid. Operation param value has special char.", "v7.0/40c609cd-1d68-41e6-ab81-fd760605fd30/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22QSbChgAAAAABAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2240c609cd-1d68-41e6-ab81-fd760605fd30%22%2C%22amount%22%3A7.49%2C%22currency%22%3A%22GBP%22%2C%22country%22%3A%22GB%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=RenderPidlPage!@&*(@&language=en-GB", true)]
        [DataRow(false, "Incoming request url is invalid. Operation param value has special char.", "v7.0/40c609cd-1d68-41e6-ab81-fd760605fd30/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22QSbChgAAAAABAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22oxowebdirects%22%2C%22piCid%22%3A%2240c609cd-1d68-41e6-ab81-fd760605fd30%22%2C%22amount%22%3A7.49%2C%22currency%22%3A%22GBP%22%2C%22country%22%3A%22GB%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=RenderPidlPage!@&*(@&language=en-GB", true)]
        [DataRow(false, "Incoming request url is invalid. Operation param value is longer than 25.", "v7.0/46e5a36a-33c8-4480-b254-1e45fad1e573/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover&partner=xbox&operation=SelectAddSelectInstanceUpdateselectInstanceReplace&country=us&language=en-US&family=credit_card&completePrerequisites=true", true)]
        [DataRow(false, "Incoming request url is invalid. Operation param value special char and longer than 25.", "v7.0/f6fa34a2-34a8-44f3-9744-bd6127a2d778/TaxIdDescriptions?language=nl-nl&country=NL&operation=SelectSingleInstance%^&*!FundStoredValue&partner=commercialstores&type=commercial_tax_id", true)]
        [DataRow(false, "Incoming request url is invalid. Operation param value is special char and longer than 25", "v7.0/094f645d-4102-4ef1-abe1-595839fe8756/challengeDescriptions?operation=Show(*@$%Replace():{}>Validate?$%&&Instanceupdateselect&timezoneOffset=420&paymentSessionOrData=%7B%22amount%22%3A10.3%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%2C%22currency%22%3A%22eur%22%2C%22country%22%3A%22de%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22AppInsights%22%2C%22piid%22%3A%2250cd99ef-aa38-4123-ab10-6e8f2d375e6a%22%2C%22caid%22%3A%22%22%7D&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. Operation param value is empty.", "v7.0/0320e90a-74b7-4f87-87a5-7a2c25b50121/AddressDescriptions?type=shipping&partner=cart&operation=&language=en-GB&country=gb", true)]

        [DataTestMethod]
        public async Task OperationParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/0f971873-f225-4ca7-bff6-e3b09151a6f6/paymentMethodDescriptions?sessionId=84fafb24-a06b-48dc-89f3-84e8af6d30f2&partner=oxowebdirect&orderId=35a5de70-d8f3-4d23-8102-106f60804415&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A0.99%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/72ab97cf-5cf3-4179-842b-6d4c18377e42/paymentMethodDescriptions?sessionId=56c35ad6-6bea-44db-9aa6-4debfc449fe4&partner=oxowebdirect&orderId=44db1ea8-77bc-47b9-8ccd-c9156c7175e8&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A0%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/0f971873-f225-4ca7-bff6-e3b09151a6f6/paymentMethodDescriptions?sessionId=84fafb24-a06b-48dc-89f3-84e8af6d30f2&partner=webblends&orderId=35a5de70-d8f3-4d23-8102-106f60804415&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A0.99%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/72ab97cf-5cf3-4179-842b-6d4c18377e42/paymentMethodDescriptions?sessionId=56c35ad6-6bea-44db-9aa6-4debfc449fe4&partner=webblends&orderId=44db1ea8-77bc-47b9-8ccd-c9156c7175e8&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A0%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/741cb388-ed85-44be-88ef-5eff70089eba/paymentMethodDescriptions?sessionId=bbba9a33-b441-4d18-9fc7-70d995300058&partner=xbox&orderId=967fc31b-0db7-48d7-9937-4f62a21fbee8&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A1.49%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/a7e24ee4-8cd9-4ef8-ac1c-16b32aecc78e/paymentMethodDescriptions?sessionId=e5e24da0-042d-4bc8-ab6f-03548c298782&partner=xbox&orderId=9ac76ab3-244a-4357-b23d-0de19dc43659&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A0.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/46114d1f-7093-42ca-b0a1-eac2f27797a0/paymentMethodDescriptions?sessionId=2ae6e619-4001-4069-8051-1009efbf5766&partner=xbox&orderId=0ac35258-f949-499d-8cbe-a0cfe377e36c&operation=Select&country=ca&language=en-CA&filters=%7B%22chargeThreshold%22%3A29.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(false, "Incoming request url is invalid. OrderId param value has special char.", "v7.0/99c4245c-fb4c-46a2-8764-7b4bf157485b/paymentMethodDescriptions?sessionId=99e445fd-63a5-4085-999b-3f355ca60021&partner=xbox&orderId=dbc76!@#$656-7bf8-4e39-96*&:”0b-c0b&34712a670&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A19.99%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(false, "Incoming request url is invalid. OrderId param value is longer than 50.", "v7.0/0f8e51ed-bebd-4be2-ab05-ba6c4984022c/paymentMethodDescriptions?sessionId=7ae136bb-062c-42bf-9183-da0282c62bef&partner=xbox&orderId=3b2886f2-2d58-4449-b7e3-1eec11cba8e676a4a48b-e7c7-401c-8082-cb6acab4c23c4f72eb42-1439-4be3-a15e-417fa8e2b02d3d86f61a-6a1f-4459-bd62-e0d3f15e26b9&operation=Select&country=ca&language=fr-CA&filters=%7B%22chargeThreshold%22%3A29.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D%7D")]
        [DataRow(false, "Incoming request url is invalid. OrderId param value special char and longer than 50.", "v7.0/01294c8a-5e6b-4343-9c22-c1217061f441/paymentMethodDescriptions?sessionId=e25f4ae8-2dee-40a9-9aa8-70ee974f55cd&partner=xbox&orderId=39735d98-%51d-4d62%8b46%29806bc83!@%*b120233ae78-11f7-47b5-b1+}<?cd-01984d79d04ff1d00b5d-aefe-448a-b627-99ff67!@*%+<>eea1e288d5cf90-75b4-4b6b-98c9-8b873c70d2c160&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A14.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D%7D")]
        [DataRow(false, "Incoming request url is invalid. OrderId param value special char and longer than 50.", "v7.0/6f87724e-d64c-4fbe-80cb-82f939d97a6f/paymentMethodDescriptions?sessionId=d2c1726c-59f9-4228-9778-a4a383355fff&partner=xbox&orderId=C!@KSf46)(!<2a1c-e606-404c-b47f-190e572e47bb19d53fbe-6978-42cc-bc2b-54a459cc7<>*!#_+~d4a&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A9.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D%7D")]
        [DataRow(false, "Incoming request url is invalid. OrderId param value is empty.", "v7.0/a1cec018-8952-429d-bc69-1622ccc896f4/paymentMethodDescriptions?sessionId=b885692b-48ba-478c-9fb4-f5e39f5cf6c6&partner=xbox&orderId=&operation=Select&country=mx&language=es-MX&filters=%7B%22chargeThreshold%22%3A192%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%2%7D")]       
        [DataRow(true, "Incoming request url is valid", "v7.0/0f971873-f225-4ca7-bff6-e3b09151a6f6/paymentMethodDescriptions?sessionId=84fafb24-a06b-48dc-89f3-84e8af6d30f2&partner=oxowebdirect&orderId=35a5de70-d8f3-4d23-8102-106f60804415&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A0.99%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/72ab97cf-5cf3-4179-842b-6d4c18377e42/paymentMethodDescriptions?sessionId=56c35ad6-6bea-44db-9aa6-4debfc449fe4&partner=oxowebdirect&orderId=44db1ea8-77bc-47b9-8ccd-c9156c7175e8&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A0%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/0f971873-f225-4ca7-bff6-e3b09151a6f6/paymentMethodDescriptions?sessionId=84fafb24-a06b-48dc-89f3-84e8af6d30f2&partner=webblends&orderId=35a5de70-d8f3-4d23-8102-106f60804415&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A0.99%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/72ab97cf-5cf3-4179-842b-6d4c18377e42/paymentMethodDescriptions?sessionId=56c35ad6-6bea-44db-9aa6-4debfc449fe4&partner=webblends&orderId=44db1ea8-77bc-47b9-8ccd-c9156c7175e8&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A0%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/741cb388-ed85-44be-88ef-5eff70089eba/paymentMethodDescriptions?sessionId=bbba9a33-b441-4d18-9fc7-70d995300058&partner=xbox&orderId=967fc31b-0db7-48d7-9937-4f62a21fbee8&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A1.49%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/a7e24ee4-8cd9-4ef8-ac1c-16b32aecc78e/paymentMethodDescriptions?sessionId=e5e24da0-042d-4bc8-ab6f-03548c298782&partner=xbox&orderId=9ac76ab3-244a-4357-b23d-0de19dc43659&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A0.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/46114d1f-7093-42ca-b0a1-eac2f27797a0/paymentMethodDescriptions?sessionId=2ae6e619-4001-4069-8051-1009efbf5766&partner=xbox&orderId=0ac35258-f949-499d-8cbe-a0cfe377e36c&operation=Select&country=ca&language=en-CA&filters=%7B%22chargeThreshold%22%3A29.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(false, "Incoming request url is invalid. OrderId param value has special char.", "v7.0/99c4245c-fb4c-46a2-8764-7b4bf157485b/paymentMethodDescriptions?sessionId=99e445fd-63a5-4085-999b-3f355ca60021&partner=xbox&orderId=dbc76!@#$656-7bf8-4e39-96*&:”0b-c0b&34712a670&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A19.99%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(false, "Incoming request url is invalid. OrderId param value is longer than 50.", "v7.0/0f8e51ed-bebd-4be2-ab05-ba6c4984022c/paymentMethodDescriptions?sessionId=7ae136bb-062c-42bf-9183-da0282c62bef&partner=xbox&orderId=3b2886f2-2d58-4449-b7e3-1eec11cba8e676a4a48b-e7c7-401c-8082-cb6acab4c23c4f72eb42-1439-4be3-a15e-417fa8e2b02d3d86f61a-6a1f-4459-bd62-e0d3f15e26b9&operation=Select&country=ca&language=fr-CA&filters=%7B%22chargeThreshold%22%3A29.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D%7D", true)]
        [DataRow(false, "Incoming request url is invalid. OrderId param value special char and longer than 50.", "v7.0/01294c8a-5e6b-4343-9c22-c1217061f441/paymentMethodDescriptions?sessionId=e25f4ae8-2dee-40a9-9aa8-70ee974f55cd&partner=xbox&orderId=39735d98-%51d-4d62%8b46%29806bc83!@%*b120233ae78-11f7-47b5-b1+}<?cd-01984d79d04ff1d00b5d-aefe-448a-b627-99ff67!@*%+<>eea1e288d5cf90-75b4-4b6b-98c9-8b873c70d2c160&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A14.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D%7D", true)]
        [DataRow(false, "Incoming request url is invalid. OrderId param value special char and longer than 50.", "v7.0/6f87724e-d64c-4fbe-80cb-82f939d97a6f/paymentMethodDescriptions?sessionId=d2c1726c-59f9-4228-9778-a4a383355fff&partner=xbox&orderId=C!@KSf46)(!<2a1c-e606-404c-b47f-190e572e47bb19d53fbe-6978-42cc-bc2b-54a459cc7<>*!#_+~d4a&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A9.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D%7D", true)]
        [DataRow(false, "Incoming request url is invalid. OrderId param value is empty.", "v7.0/a1cec018-8952-429d-bc69-1622ccc896f4/paymentMethodDescriptions?sessionId=b885692b-48ba-478c-9fb4-f5e39f5cf6c6&partner=xbox&orderId=&operation=Select&country=mx&language=es-MX&filters=%7B%22chargeThreshold%22%3A192%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%2%7D", true)]

        [DataTestMethod]
        public async Task OrderIdParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/8e342cdc-771b-4b19-84a0-bef4c44911f7/taxIdDescriptions?country=jp&type=consumer_tax_id&language=en-US&partner=bing")]
        [DataRow(true, "Incoming request url is valid", "v7.0/27375b18-0ef1-40e7-9fae-383940be580a/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover&partner=webblends&operation=Add&country=us&language=en-US&family=credit_card&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(true, "Incoming request url is valid", "v7.0/27375b18-0ef1-40e7-9fae-383940be580a/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover&partner=oxowebdirect&operation=Add&country=us&language=en-US&family=credit_card&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(true, "Incoming request url is valid", "v7.0/7350bc5b-40ea-4bae-a95e-6c4994347fe6/paymentMethodDescriptions?partner=setupoffice&operation=SelectInstance&language=zh-cn&country=cn&allowedPaymentMethods=%5B%22credit_card%22%2C%22ewallet.paypal%22%2C%22direct_debit.ach%22%2C%22direct_debit.sepa%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/252be156-abd0-4950-b7a8-3436663a5808/paymentMethodDescriptions?sessionId=aef6e30d-685c-49f0-8e7d-817f20697401&partner=xbox&orderId=2c5e7a6c-8948-4f5f-98ef-9ce34be20644&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A8.99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/1c653c2c-6d88-4032-99fc-437a66275c4a/paymentMethodDescriptions?type=paypal&partner=webblends_inline&operation=Add&country=us&language=en-US&family=ewallet&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(true, "Incoming request url is valid", "v7.0/1c653c2c-6d88-4032-99fc-437a66275c4a/paymentMethodDescriptions?type=paypal&partner=oxowebdirect&operation=Add&country=us&language=en-US&family=ewallet&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(false, "Incoming request url is invalid. Partner param value has special char.", "v7.0/958a690c-ee92-4257-a83d-c60f245542d3/paymentMethodDescriptions?sessionId=297a6543-3b94-4232-a2a1-971f0c64cee6&partner=webblends%&_-support&orderId=44ed50c4-3305-44fd-9d93-20a9c3e4b4cb&operation=Select&country=in&language=en-US&filters=%7B%22chargeThreshold%22%3A0%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%5D")]
        [DataRow(false, "Incoming request url is invalid. Partner param value has special char.", "v7.0/958a690c-ee92-4257-a83d-c60f245542d3/paymentMethodDescriptions?sessionId=297a6543-3b94-4232-a2a1-971f0c64cee6&partner=oxowebdirect%&_-support&orderId=44ed50c4-3305-44fd-9d93-20a9c3e4b4cb&operation=Select&country=in&language=en-US&filters=%7B%22chargeThreshold%22%3A0%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%5D")]
        [DataRow(false, " Incoming request url is invalid.Partner param value is longer than 25 & has special char.", "v7.0/2e11fe15-0a9a-45c6-8ef4-b5f2f75f4db2/paymentInstrumentsEx?country=ar&language=es-AR&partner=xbo%%12azuresetupoffice111!@#&completePrerequisites=True")]
        [DataRow(false, " Incoming request url is invalid.Partner param value is longer than 25 & has special char.", "v7.0/905f07d4-82b0-4eea-b472-503b68ced713/challengeDescriptions?type=Sms&sessionId=344b096d-433c-48d8-897d-e17b04a779d4&piid=ec0cd944-6437-4b3f-9927-255f9349ebc2&partner=xbox^(p:arenta0lconsentwebxbox&operation=RenderPidlPage&country=gb&language=en-GB")]
        [DataRow(false, " Incoming request url is invalid.Partner param value is empty ", "v7.0/aeb8f10d-48e3-4636-9c61-d72108015070/AddressDescriptions?language=en-us&country=NG&operation=Add&partner=&type=shipping")]      
        [DataRow(true, "Incoming request url is valid", "v7.0/8e342cdc-771b-4b19-84a0-bef4c44911f7/taxIdDescriptions?country=jp&type=consumer_tax_id&language=en-US&partner=bing", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/27375b18-0ef1-40e7-9fae-383940be580a/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover&partner=webblends&operation=Add&country=us&language=en-US&family=credit_card&completePrerequisites=true&classicProduct=Omex", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/27375b18-0ef1-40e7-9fae-383940be580a/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover&partner=oxowebdirect&operation=Add&country=us&language=en-US&family=credit_card&completePrerequisites=true&classicProduct=Omex", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/7350bc5b-40ea-4bae-a95e-6c4994347fe6/paymentMethodDescriptions?partner=setupoffice&operation=SelectInstance&language=zh-cn&country=cn&allowedPaymentMethods=%5B%22credit_card%22%2C%22ewallet.paypal%22%2C%22direct_debit.ach%22%2C%22direct_debit.sepa%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/252be156-abd0-4950-b7a8-3436663a5808/paymentMethodDescriptions?sessionId=aef6e30d-685c-49f0-8e7d-817f20697401&partner=xbox&orderId=2c5e7a6c-8948-4f5f-98ef-9ce34be20644&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A8.99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/1c653c2c-6d88-4032-99fc-437a66275c4a/paymentMethodDescriptions?type=paypal&partner=webblends_inline&operation=Add&country=us&language=en-US&family=ewallet&completePrerequisites=true&classicProduct=Omex", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/1c653c2c-6d88-4032-99fc-437a66275c4a/paymentMethodDescriptions?type=paypal&partner=oxowebdirect&operation=Add&country=us&language=en-US&family=ewallet&completePrerequisites=true&classicProduct=Omex", true)]
        [DataRow(false, "Incoming request url is invalid. Partner param value has special char.", "v7.0/958a690c-ee92-4257-a83d-c60f245542d3/paymentMethodDescriptions?sessionId=297a6543-3b94-4232-a2a1-971f0c64cee6&partner=webblends%&_-support&orderId=44ed50c4-3305-44fd-9d93-20a9c3e4b4cb&operation=Select&country=in&language=en-US&filters=%7B%22chargeThreshold%22%3A0%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%5D", true)]
        [DataRow(false, "Incoming request url is invalid. Partner param value has special char.", "v7.0/958a690c-ee92-4257-a83d-c60f245542d3/paymentMethodDescriptions?sessionId=297a6543-3b94-4232-a2a1-971f0c64cee6&partner=oxowebdirect%&_-support&orderId=44ed50c4-3305-44fd-9d93-20a9c3e4b4cb&operation=Select&country=in&language=en-US&filters=%7B%22chargeThreshold%22%3A0%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%5D", true)]
        [DataRow(false, " Incoming request url is invalid.Partner param value is longer than 25 & has special char.", "v7.0/2e11fe15-0a9a-45c6-8ef4-b5f2f75f4db2/paymentInstrumentsEx?country=ar&language=es-AR&partner=xbo%%12azuresetupoffice111!@#&completePrerequisites=True", true)]
        [DataRow(false, " Incoming request url is invalid.Partner param value is longer than 25 & has special char.", "v7.0/905f07d4-82b0-4eea-b472-503b68ced713/challengeDescriptions?type=Sms&sessionId=344b096d-433c-48d8-897d-e17b04a779d4&piid=ec0cd944-6437-4b3f-9927-255f9349ebc2&partner=xbox^(p:arenta0lconsentwebxbox&operation=RenderPidlPage&country=gb&language=en-GB", true)]
        [DataRow(false, " Incoming request url is invalid.Partner param value is empty ", "v7.0/aeb8f10d-48e3-4636-9c61-d72108015070/AddressDescriptions?language=en-us&country=NG&operation=Add&partner=&type=shipping", true)]

        [DataTestMethod]
        public async Task PartnerParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/cebd2391-279c-4b92-9944-915190d7819c/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22Q%2Bgh0wAAAAAHAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22cart%22%2C%22piCid%22%3A%22cebd2391-279c-4b92-9944-915190d7819c%22%2C%22amount%22%3A15%2C%22currency%22%3A%22GBP%22%2C%22country%22%3A%22GB%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%7D&operation=Add&language=en-US")]
        [DataRow(true, "Incoming request url is valid", "v7.0/cac16552-c507-42a3-a31a-c133c2d9ec9a/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22I71yhAAAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22cac16552-c507-42a3-a31a-c133c2d9ec9a%22%2C%22amount%22%3A29.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=en-US")]
        [DataRow(true, "Incoming request url is valid", "v7.0/3ed840ab-e6d0-4bcb-b315-7aea61e81649/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22r745WwAAAAACAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%223ed840ab-e6d0-4bcb-b315-7aea61e81649%22%2C%22amount%22%3A1.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=en-US")]
        [DataRow(true, "Incoming request url is valid", "v7.0/9b589ce7-9de0-4cab-a9be-132ee3353986/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22U9yHhAAAAAABAACA%22%2C%22language%22%3A%22ru-UA%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%229b589ce7-9de0-4cab-a9be-132ee3353986%22%2C%22amount%22%3A550%2C%22currency%22%3A%22UAH%22%2C%22country%22%3A%22UA%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=ru-UA")]
        [DataRow(true, "Incoming request url is valid", "v7.0/cac16552-c507-42a3-a31a-c133c2d9ec9a/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22I71yhAAAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22oxowebdirect%22%2C%22piCid%22%3A%22cac16552-c507-42a3-a31a-c133c2d9ec9a%22%2C%22amount%22%3A29.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=en-US")]
        [DataRow(true, "Incoming request url is valid", "v7.0/3ed840ab-e6d0-4bcb-b315-7aea61e81649/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22r745WwAAAAACAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22oxowebdirect%22%2C%22piCid%22%3A%223ed840ab-e6d0-4bcb-b315-7aea61e81649%22%2C%22amount%22%3A1.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=en-US")]
        [DataRow(true, "Incoming request url is valid", "v7.0/9b589ce7-9de0-4cab-a9be-132ee3353986/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22U9yHhAAAAAABAACA%22%2C%22language%22%3A%22ru-UA%22%2C%22partner%22%3A%22oxowebdirect%22%2C%22piCid%22%3A%229b589ce7-9de0-4cab-a9be-132ee3353986%22%2C%22amount%22%3A550%2C%22currency%22%3A%22UAH%22%2C%22country%22%3A%22UA%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=ru-UA")]
        [DataRow(true, "Incoming request url is valid", "v7.0/a0784d47-f749-4dfa-b833-6e748cc96506/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22MqvekwAAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22cart%22%2C%22piCid%22%3A%22a0784d47-f749-4dfa-b833-6e748cc96506%22%2C%22amount%22%3A99.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%7D&operation=Add&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionData param value is invalid Json format.", "v7.0/505283ee-6645-4374-9d64-af877b1ef0fb/PaymentSessionDescriptions?paymentSessionData=%22piid%22%3A%22vJ-3nQEAAAAIAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22ddf78758-ec82-4206-becd-f2679a1aa059%22%2C%22amount%22%3A8.51%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22fRyMTAAAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2285a142c1-cea9-42d2-a16b-339b8f421611%22%2C%22amount%22%3A9.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22peeV4wEAAAADAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22cart%22%2C%22piCid%22%3A%22d353db86-99de-4a8f-9420-1cafd2734e47%22%2C%22amount%22%3A43.52%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22x2uGhQAAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22031120d1-71ad-4458-8cd7-3525041a737b%22%2C%22amount%22%3A103.67%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%226eNy4gEAAAABAACA%22%2C%22language%22%3A%22pt-br%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22529947e8-47a7-4e27-90a0-b313d5a665f4%22%2C%22amount%22%3A6.27%2C%22currency%22%3A%22BRL%22%2C%22country%22%3A%22BR%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22&operation=Add&language=en-GB")]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionData param value is longer than 2048(2486).", "v7.0/f35fec5d-42db-4e6b-8e3c-ed8cdd19a675/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22if199QEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22f35fec5d-42db-4e6b-8e3c-ed8cdd19a675%22%2C%22amount%22%3A0.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22dja%2BegAAAAABAACA%22%2C%22language%22%3A%22ro-RO%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A7.99%2C%22currency%22%3A%22GBP%22%2C%22country%22%3A%22GB%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22-nsvfQAAAAABAACA%22%2C%22language%22%3A%22tr-TR%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A14.99%2C%22currency%22%3A%22TRY%22%2C%22country%22%3A%22TR%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22rZQd%2BgEAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%227cdacb05-e988-49ba-9f5f-eb47d2765d0f%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22en7VOQAAAAAEAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2235affb59-c4b3-4dea-8fb6-323e3d901e91%22%2C%22amount%22%3A5.48%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%22piid%22%3A%22ELhLngEAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2220031d9f-fd18-49db-8f47-2a9ba8b762f3%22%2C%22amount%22%3A1.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22uNlAtAEAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22e6a1e6f8-8aea-4e8d-bfc2-f5ea50287e33%22%2C%22amount%22%3A14.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=pt-BR")]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionData param value is invalid Json format.", "v7.0/505283ee-6645-4374-9d64-af877b1ef0fb/PaymentSessionDescriptions?paymentSessionData=%22piid%22%3A%22vJ-3nQEAAAAIAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22oxowebdirect%22%2C%22piCid%22%3A%22ddf78758-ec82-4206-becd-f2679a1aa059%22%2C%22amount%22%3A8.51%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22fRyMTAAAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2285a142c1-cea9-42d2-a16b-339b8f421611%22%2C%22amount%22%3A9.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22peeV4wEAAAADAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22cart%22%2C%22piCid%22%3A%22d353db86-99de-4a8f-9420-1cafd2734e47%22%2C%22amount%22%3A43.52%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22x2uGhQAAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22031120d1-71ad-4458-8cd7-3525041a737b%22%2C%22amount%22%3A103.67%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%226eNy4gEAAAABAACA%22%2C%22language%22%3A%22pt-br%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22529947e8-47a7-4e27-90a0-b313d5a665f4%22%2C%22amount%22%3A6.27%2C%22currency%22%3A%22BRL%22%2C%22country%22%3A%22BR%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22&operation=Add&language=en-GB")]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionData param value is longer than 2048(2486).", "v7.0/f35fec5d-42db-4e6b-8e3c-ed8cdd19a675/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22if199QEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22oxowebdirect%22%2C%22piCid%22%3A%22f35fec5d-42db-4e6b-8e3c-ed8cdd19a675%22%2C%22amount%22%3A0.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22dja%2BegAAAAABAACA%22%2C%22language%22%3A%22ro-RO%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A7.99%2C%22currency%22%3A%22GBP%22%2C%22country%22%3A%22GB%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22-nsvfQAAAAABAACA%22%2C%22language%22%3A%22tr-TR%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A14.99%2C%22currency%22%3A%22TRY%22%2C%22country%22%3A%22TR%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22rZQd%2BgEAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%227cdacb05-e988-49ba-9f5f-eb47d2765d0f%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22en7VOQAAAAAEAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2235affb59-c4b3-4dea-8fb6-323e3d901e91%22%2C%22amount%22%3A5.48%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%22piid%22%3A%22ELhLngEAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2220031d9f-fd18-49db-8f47-2a9ba8b762f3%22%2C%22amount%22%3A1.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22uNlAtAEAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22e6a1e6f8-8aea-4e8d-bfc2-f5ea50287e33%22%2C%22amount%22%3A14.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=pt-BR")]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionData param value is in invalid Json format and is longer than 2048(2845).", "v7.0/923a539e-8bf6-414a-b734-53ad4fbedffe/PaymentSessionDescriptions?paymentSessionData=&NA!$%22piid%22%3A%22T4mMWAAAAAABAACA%22%2C%22language%22%3A%22es-MX%22%2C%22partner%22%3A%22cart%22%2C%22piCid%22%3A%22923a539e-8bf6-414a-b734-53ad4fbedffe%22%2C%22amount%22%3A481%2C%22currency%22%3A%22MXN%22%2C%22country%22%3A%22MX%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%22piid%22%3A%22jpUHaAAAAAABAACA%22%2C%22language%22%3A%22pt-BR%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A39.99%2C%22currency%22%3A%22BRL%22%2C%22country%22%3A%22BR%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22069f633a-3d91-49ff-aae8-b35c794c95f4%22%2C%22language%22%3A%22pl-PL%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22PLN%22%2C%22country%22%3A%22PL%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%22piid%22%3A%22r1zQgwAAAAABAACA%22%2C%22language%22%3A%22de-de%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2290438131-da54-419c-96ed-49be6b22603d%22%2C%22amount%22%3A4.99%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22DE%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22id%22%3A%22Z10038AL5FLSa101dcb9-b379-4fd5-a19d-e685889af670%22%2C%22isChallengeRequired%22%3Atrue%2C%22signature%22%3A%22placeholder_for_paymentsession_signature_Z10038AL5FLSa101dcb9-b379-4fd5-a19d-e685889af670%22%2C%22challengeStatus%22%3A%22Unknown%22%2C%22piid%22%3A%22s7ANgwAAAAABAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22d6ca63bd-019a-41bd-b106-4353726e99cc%22%2C%22amount%22%3A2.49%2C%22currency%22%3A%22GBP%22%2C%22country%22%3A%22GB%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%2C%22cv%22%3A%22kNvBBHM%2BOkmC8PK4.49.2.1.13.9%22%22piid%22%3A%22ygKRwQEAAAACAACA%22%2C%22language%22%3A%22fr-FR%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A69%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22FR%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22JAH!^%#!^%22piid%22%3A%22PrAdxwAAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%220a9c05a3-5922-4f5a-bf78-45239a6c24ac%22%2C%22amount%22%3A39.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2201%22&operation=Add&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionData param value is in invalid Json format and is longer than 2048(2845).", "v7.0/923a539e-8bf6-414a-b734-53ad4fbedffe/PaymentSessionDescriptions?paymentSessionData=&NA!$%22piid%22%3A%22T4mMWAAAAAABAACA%22%2C%22language%22%3A%22es-MX%22%2C%22partner%22%3A%22cart%22%2C%22piCid%22%3A%22923a539e-8bf6-414a-b734-53ad4fbedffe%22%2C%22amount%22%3A481%2C%22currency%22%3A%22MXN%22%2C%22country%22%3A%22MX%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%22piid%22%3A%22jpUHaAAAAAABAACA%22%2C%22language%22%3A%22pt-BR%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A39.99%2C%22currency%22%3A%22BRL%22%2C%22country%22%3A%22BR%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22069f633a-3d91-49ff-aae8-b35c794c95f4%22%2C%22language%22%3A%22pl-PL%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22PLN%22%2C%22country%22%3A%22PL%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%22piid%22%3A%22r1zQgwAAAAABAACA%22%2C%22language%22%3A%22de-de%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2290438131-da54-419c-96ed-49be6b22603d%22%2C%22amount%22%3A4.99%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22DE%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22id%22%3A%22Z10038AL5FLSa101dcb9-b379-4fd5-a19d-e685889af670%22%2C%22isChallengeRequired%22%3Atrue%2C%22signature%22%3A%22placeholder_for_paymentsession_signature_Z10038AL5FLSa101dcb9-b379-4fd5-a19d-e685889af670%22%2C%22challengeStatus%22%3A%22Unknown%22%2C%22piid%22%3A%22s7ANgwAAAAABAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22oxowebdirect%22%2C%22piCid%22%3A%22d6ca63bd-019a-41bd-b106-4353726e99cc%22%2C%22amount%22%3A2.49%2C%22currency%22%3A%22GBP%22%2C%22country%22%3A%22GB%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%2C%22cv%22%3A%22kNvBBHM%2BOkmC8PK4.49.2.1.13.9%22%22piid%22%3A%22ygKRwQEAAAACAACA%22%2C%22language%22%3A%22fr-FR%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A69%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22FR%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22JAH!^%#!^%22piid%22%3A%22PrAdxwAAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%220a9c05a3-5922-4f5a-bf78-45239a6c24ac%22%2C%22amount%22%3A39.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2201%22&operation=Add&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionData param value is longer than 2048(2802).", "v7.0/3d7be1be-9b22-45a3-bebd-cb74de1542c9/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22YKebFQAAAAAHAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%223d7be1be-9b22-45a3-bebd-cb74de1542c9%22%2C%22amount%22%3A14.03%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22am4iCAAAAAAOAACA%22%2C%22language%22%3A%22fr-FR%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A12.99%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22FR%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22amount%22%3A6.58%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2205%22%2C%22currency%22%3A%22AUD%22%2C%22country%22%3A%22AU%22%2C%22language%22%3A%22en-AU%22%2C%22partner%22%3A%22xboxweb%22%2C%22piid%22%3A%22E8uJhAAAAAAFAACA%22%22piid%22%3A%22DNYufwAAAAABAACA%22%22piid%22%3A%22ac8jBAAAAAAOAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%222eefb05d-72dd-4859-bd17-b9a20d33a5bb%22%2C%22amount%22%3A31.79%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%223BP7aQAAAAACAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22819d6dd2-9c12-4e28-a438-5bb477e35da5%22%2C%22amount%22%3A54.29%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22Ad9QzQEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22515b5d9b-0d4c-4036-a52f-1a35d572f40c%22%2C%22amount%22%3A1.06%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22DTrP3gEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22b6eae662-b439-432d-aa2a-4e5f14d7e7b8%22%2C%22amount%22%3A9.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2201%22%22piid%22%3A%22rrgXiwEAAAAKAACA%22%2C%22language%22%3A%22es-ES%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2243f2a487-162c-44a1-8d1d-c95a9c6799ee%22%2C%22amount%22%3A9.99%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22ES%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionData param value is longer than 2048(2802).", "v7.0/3d7be1be-9b22-45a3-bebd-cb74de1542c9/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22YKebFQAAAAAHAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%223d7be1be-9b22-45a3-bebd-cb74de1542c9%22%2C%22amount%22%3A14.03%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22am4iCAAAAAAOAACA%22%2C%22language%22%3A%22fr-FR%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A12.99%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22FR%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22amount%22%3A6.58%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2205%22%2C%22currency%22%3A%22AUD%22%2C%22country%22%3A%22AU%22%2C%22language%22%3A%22en-AU%22%2C%22partner%22%3A%22xboxweb%22%2C%22piid%22%3A%22E8uJhAAAAAAFAACA%22%22piid%22%3A%22DNYufwAAAAABAACA%22%22piid%22%3A%22ac8jBAAAAAAOAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%222eefb05d-72dd-4859-bd17-b9a20d33a5bb%22%2C%22amount%22%3A31.79%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%223BP7aQAAAAACAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22819d6dd2-9c12-4e28-a438-5bb477e35da5%22%2C%22amount%22%3A54.29%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22Ad9QzQEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22515b5d9b-0d4c-4036-a52f-1a35d572f40c%22%2C%22amount%22%3A1.06%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22DTrP3gEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22oxowebdirect%22%2C%22piCid%22%3A%22b6eae662-b439-432d-aa2a-4e5f14d7e7b8%22%2C%22amount%22%3A9.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2201%22%22piid%22%3A%22rrgXiwEAAAAKAACA%22%2C%22language%22%3A%22es-ES%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2243f2a487-162c-44a1-8d1d-c95a9c6799ee%22%2C%22amount%22%3A9.99%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22ES%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionData param value is empty.", "v7.0/90438131-da54-419c-96ed-49be6b22603d/PaymentSessionDescriptions?paymentSessionData=&operation=Add&language=en-US")]
        [DataRow(true, "Incoming request url is valid", "v7.0/cebd2391-279c-4b92-9944-915190d7819c/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22Q%2Bgh0wAAAAAHAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22cart%22%2C%22piCid%22%3A%22cebd2391-279c-4b92-9944-915190d7819c%22%2C%22amount%22%3A15%2C%22currency%22%3A%22GBP%22%2C%22country%22%3A%22GB%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%7D&operation=Add&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/cac16552-c507-42a3-a31a-c133c2d9ec9a/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22I71yhAAAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22cac16552-c507-42a3-a31a-c133c2d9ec9a%22%2C%22amount%22%3A29.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/3ed840ab-e6d0-4bcb-b315-7aea61e81649/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22r745WwAAAAACAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%223ed840ab-e6d0-4bcb-b315-7aea61e81649%22%2C%22amount%22%3A1.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/9b589ce7-9de0-4cab-a9be-132ee3353986/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22U9yHhAAAAAABAACA%22%2C%22language%22%3A%22ru-UA%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%229b589ce7-9de0-4cab-a9be-132ee3353986%22%2C%22amount%22%3A550%2C%22currency%22%3A%22UAH%22%2C%22country%22%3A%22UA%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=ru-UA", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/cac16552-c507-42a3-a31a-c133c2d9ec9a/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22I71yhAAAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22oxowebdirect%22%2C%22piCid%22%3A%22cac16552-c507-42a3-a31a-c133c2d9ec9a%22%2C%22amount%22%3A29.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/3ed840ab-e6d0-4bcb-b315-7aea61e81649/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22r745WwAAAAACAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22oxowebdirect%22%2C%22piCid%22%3A%223ed840ab-e6d0-4bcb-b315-7aea61e81649%22%2C%22amount%22%3A1.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/9b589ce7-9de0-4cab-a9be-132ee3353986/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22U9yHhAAAAAABAACA%22%2C%22language%22%3A%22ru-UA%22%2C%22partner%22%3A%22oxowebdirect%22%2C%22piCid%22%3A%229b589ce7-9de0-4cab-a9be-132ee3353986%22%2C%22amount%22%3A550%2C%22currency%22%3A%22UAH%22%2C%22country%22%3A%22UA%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=ru-UA", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/a0784d47-f749-4dfa-b833-6e748cc96506/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22MqvekwAAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22cart%22%2C%22piCid%22%3A%22a0784d47-f749-4dfa-b833-6e748cc96506%22%2C%22amount%22%3A99.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%7D&operation=Add&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionData param value is invalid Json format.", "v7.0/505283ee-6645-4374-9d64-af877b1ef0fb/PaymentSessionDescriptions?paymentSessionData=%22piid%22%3A%22vJ-3nQEAAAAIAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22ddf78758-ec82-4206-becd-f2679a1aa059%22%2C%22amount%22%3A8.51%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22fRyMTAAAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2285a142c1-cea9-42d2-a16b-339b8f421611%22%2C%22amount%22%3A9.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22peeV4wEAAAADAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22cart%22%2C%22piCid%22%3A%22d353db86-99de-4a8f-9420-1cafd2734e47%22%2C%22amount%22%3A43.52%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22x2uGhQAAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22031120d1-71ad-4458-8cd7-3525041a737b%22%2C%22amount%22%3A103.67%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%226eNy4gEAAAABAACA%22%2C%22language%22%3A%22pt-br%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22529947e8-47a7-4e27-90a0-b313d5a665f4%22%2C%22amount%22%3A6.27%2C%22currency%22%3A%22BRL%22%2C%22country%22%3A%22BR%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22&operation=Add&language=en-GB", true)]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionData param value is longer than 2048(2486).", "v7.0/f35fec5d-42db-4e6b-8e3c-ed8cdd19a675/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22if199QEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22f35fec5d-42db-4e6b-8e3c-ed8cdd19a675%22%2C%22amount%22%3A0.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22dja%2BegAAAAABAACA%22%2C%22language%22%3A%22ro-RO%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A7.99%2C%22currency%22%3A%22GBP%22%2C%22country%22%3A%22GB%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22-nsvfQAAAAABAACA%22%2C%22language%22%3A%22tr-TR%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A14.99%2C%22currency%22%3A%22TRY%22%2C%22country%22%3A%22TR%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22rZQd%2BgEAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%227cdacb05-e988-49ba-9f5f-eb47d2765d0f%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22en7VOQAAAAAEAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2235affb59-c4b3-4dea-8fb6-323e3d901e91%22%2C%22amount%22%3A5.48%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%22piid%22%3A%22ELhLngEAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2220031d9f-fd18-49db-8f47-2a9ba8b762f3%22%2C%22amount%22%3A1.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22uNlAtAEAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22e6a1e6f8-8aea-4e8d-bfc2-f5ea50287e33%22%2C%22amount%22%3A14.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=pt-BR", true)]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionData param value is invalid Json format.", "v7.0/505283ee-6645-4374-9d64-af877b1ef0fb/PaymentSessionDescriptions?paymentSessionData=%22piid%22%3A%22vJ-3nQEAAAAIAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22oxowebdirect%22%2C%22piCid%22%3A%22ddf78758-ec82-4206-becd-f2679a1aa059%22%2C%22amount%22%3A8.51%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22fRyMTAAAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2285a142c1-cea9-42d2-a16b-339b8f421611%22%2C%22amount%22%3A9.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22peeV4wEAAAADAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22cart%22%2C%22piCid%22%3A%22d353db86-99de-4a8f-9420-1cafd2734e47%22%2C%22amount%22%3A43.52%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22x2uGhQAAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22031120d1-71ad-4458-8cd7-3525041a737b%22%2C%22amount%22%3A103.67%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%226eNy4gEAAAABAACA%22%2C%22language%22%3A%22pt-br%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22529947e8-47a7-4e27-90a0-b313d5a665f4%22%2C%22amount%22%3A6.27%2C%22currency%22%3A%22BRL%22%2C%22country%22%3A%22BR%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22&operation=Add&language=en-GB", true)]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionData param value is longer than 2048(2486).", "v7.0/f35fec5d-42db-4e6b-8e3c-ed8cdd19a675/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22if199QEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22oxowebdirect%22%2C%22piCid%22%3A%22f35fec5d-42db-4e6b-8e3c-ed8cdd19a675%22%2C%22amount%22%3A0.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22dja%2BegAAAAABAACA%22%2C%22language%22%3A%22ro-RO%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A7.99%2C%22currency%22%3A%22GBP%22%2C%22country%22%3A%22GB%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22-nsvfQAAAAABAACA%22%2C%22language%22%3A%22tr-TR%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A14.99%2C%22currency%22%3A%22TRY%22%2C%22country%22%3A%22TR%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22rZQd%2BgEAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%227cdacb05-e988-49ba-9f5f-eb47d2765d0f%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22en7VOQAAAAAEAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2235affb59-c4b3-4dea-8fb6-323e3d901e91%22%2C%22amount%22%3A5.48%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%22piid%22%3A%22ELhLngEAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2220031d9f-fd18-49db-8f47-2a9ba8b762f3%22%2C%22amount%22%3A1.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22uNlAtAEAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22e6a1e6f8-8aea-4e8d-bfc2-f5ea50287e33%22%2C%22amount%22%3A14.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=pt-BR", true)]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionData param value is in invalid Json format and is longer than 2048(2845).", "v7.0/923a539e-8bf6-414a-b734-53ad4fbedffe/PaymentSessionDescriptions?paymentSessionData=&NA!$%22piid%22%3A%22T4mMWAAAAAABAACA%22%2C%22language%22%3A%22es-MX%22%2C%22partner%22%3A%22cart%22%2C%22piCid%22%3A%22923a539e-8bf6-414a-b734-53ad4fbedffe%22%2C%22amount%22%3A481%2C%22currency%22%3A%22MXN%22%2C%22country%22%3A%22MX%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%22piid%22%3A%22jpUHaAAAAAABAACA%22%2C%22language%22%3A%22pt-BR%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A39.99%2C%22currency%22%3A%22BRL%22%2C%22country%22%3A%22BR%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22069f633a-3d91-49ff-aae8-b35c794c95f4%22%2C%22language%22%3A%22pl-PL%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22PLN%22%2C%22country%22%3A%22PL%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%22piid%22%3A%22r1zQgwAAAAABAACA%22%2C%22language%22%3A%22de-de%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2290438131-da54-419c-96ed-49be6b22603d%22%2C%22amount%22%3A4.99%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22DE%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22id%22%3A%22Z10038AL5FLSa101dcb9-b379-4fd5-a19d-e685889af670%22%2C%22isChallengeRequired%22%3Atrue%2C%22signature%22%3A%22placeholder_for_paymentsession_signature_Z10038AL5FLSa101dcb9-b379-4fd5-a19d-e685889af670%22%2C%22challengeStatus%22%3A%22Unknown%22%2C%22piid%22%3A%22s7ANgwAAAAABAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22d6ca63bd-019a-41bd-b106-4353726e99cc%22%2C%22amount%22%3A2.49%2C%22currency%22%3A%22GBP%22%2C%22country%22%3A%22GB%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%2C%22cv%22%3A%22kNvBBHM%2BOkmC8PK4.49.2.1.13.9%22%22piid%22%3A%22ygKRwQEAAAACAACA%22%2C%22language%22%3A%22fr-FR%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A69%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22FR%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22JAH!^%#!^%22piid%22%3A%22PrAdxwAAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%220a9c05a3-5922-4f5a-bf78-45239a6c24ac%22%2C%22amount%22%3A39.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2201%22&operation=Add&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionData param value is in invalid Json format and is longer than 2048(2845).", "v7.0/923a539e-8bf6-414a-b734-53ad4fbedffe/PaymentSessionDescriptions?paymentSessionData=&NA!$%22piid%22%3A%22T4mMWAAAAAABAACA%22%2C%22language%22%3A%22es-MX%22%2C%22partner%22%3A%22cart%22%2C%22piCid%22%3A%22923a539e-8bf6-414a-b734-53ad4fbedffe%22%2C%22amount%22%3A481%2C%22currency%22%3A%22MXN%22%2C%22country%22%3A%22MX%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%22piid%22%3A%22jpUHaAAAAAABAACA%22%2C%22language%22%3A%22pt-BR%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A39.99%2C%22currency%22%3A%22BRL%22%2C%22country%22%3A%22BR%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22069f633a-3d91-49ff-aae8-b35c794c95f4%22%2C%22language%22%3A%22pl-PL%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22PLN%22%2C%22country%22%3A%22PL%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%22piid%22%3A%22r1zQgwAAAAABAACA%22%2C%22language%22%3A%22de-de%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2290438131-da54-419c-96ed-49be6b22603d%22%2C%22amount%22%3A4.99%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22DE%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22id%22%3A%22Z10038AL5FLSa101dcb9-b379-4fd5-a19d-e685889af670%22%2C%22isChallengeRequired%22%3Atrue%2C%22signature%22%3A%22placeholder_for_paymentsession_signature_Z10038AL5FLSa101dcb9-b379-4fd5-a19d-e685889af670%22%2C%22challengeStatus%22%3A%22Unknown%22%2C%22piid%22%3A%22s7ANgwAAAAABAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22oxowebdirect%22%2C%22piCid%22%3A%22d6ca63bd-019a-41bd-b106-4353726e99cc%22%2C%22amount%22%3A2.49%2C%22currency%22%3A%22GBP%22%2C%22country%22%3A%22GB%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%2C%22cv%22%3A%22kNvBBHM%2BOkmC8PK4.49.2.1.13.9%22%22piid%22%3A%22ygKRwQEAAAACAACA%22%2C%22language%22%3A%22fr-FR%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A69%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22FR%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22JAH!^%#!^%22piid%22%3A%22PrAdxwAAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%220a9c05a3-5922-4f5a-bf78-45239a6c24ac%22%2C%22amount%22%3A39.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2201%22&operation=Add&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionData param value is longer than 2048(2802).", "v7.0/3d7be1be-9b22-45a3-bebd-cb74de1542c9/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22YKebFQAAAAAHAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%223d7be1be-9b22-45a3-bebd-cb74de1542c9%22%2C%22amount%22%3A14.03%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22am4iCAAAAAAOAACA%22%2C%22language%22%3A%22fr-FR%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A12.99%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22FR%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22amount%22%3A6.58%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2205%22%2C%22currency%22%3A%22AUD%22%2C%22country%22%3A%22AU%22%2C%22language%22%3A%22en-AU%22%2C%22partner%22%3A%22xboxweb%22%2C%22piid%22%3A%22E8uJhAAAAAAFAACA%22%22piid%22%3A%22DNYufwAAAAABAACA%22%22piid%22%3A%22ac8jBAAAAAAOAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%222eefb05d-72dd-4859-bd17-b9a20d33a5bb%22%2C%22amount%22%3A31.79%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%223BP7aQAAAAACAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22819d6dd2-9c12-4e28-a438-5bb477e35da5%22%2C%22amount%22%3A54.29%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22Ad9QzQEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22515b5d9b-0d4c-4036-a52f-1a35d572f40c%22%2C%22amount%22%3A1.06%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22DTrP3gEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22b6eae662-b439-432d-aa2a-4e5f14d7e7b8%22%2C%22amount%22%3A9.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2201%22%22piid%22%3A%22rrgXiwEAAAAKAACA%22%2C%22language%22%3A%22es-ES%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2243f2a487-162c-44a1-8d1d-c95a9c6799ee%22%2C%22amount%22%3A9.99%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22ES%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionData param value is longer than 2048(2802).", "v7.0/3d7be1be-9b22-45a3-bebd-cb74de1542c9/PaymentSessionDescriptions?paymentSessionData=%7B%22piid%22%3A%22YKebFQAAAAAHAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%223d7be1be-9b22-45a3-bebd-cb74de1542c9%22%2C%22amount%22%3A14.03%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22am4iCAAAAAAOAACA%22%2C%22language%22%3A%22fr-FR%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A12.99%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22FR%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22amount%22%3A6.58%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2205%22%2C%22currency%22%3A%22AUD%22%2C%22country%22%3A%22AU%22%2C%22language%22%3A%22en-AU%22%2C%22partner%22%3A%22xboxweb%22%2C%22piid%22%3A%22E8uJhAAAAAAFAACA%22%22piid%22%3A%22DNYufwAAAAABAACA%22%22piid%22%3A%22ac8jBAAAAAAOAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%222eefb05d-72dd-4859-bd17-b9a20d33a5bb%22%2C%22amount%22%3A31.79%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%223BP7aQAAAAACAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22819d6dd2-9c12-4e28-a438-5bb477e35da5%22%2C%22amount%22%3A54.29%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22Ad9QzQEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22515b5d9b-0d4c-4036-a52f-1a35d572f40c%22%2C%22amount%22%3A1.06%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22DTrP3gEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22oxowebdirect%22%2C%22piCid%22%3A%22b6eae662-b439-432d-aa2a-4e5f14d7e7b8%22%2C%22amount%22%3A9.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2201%22%22piid%22%3A%22rrgXiwEAAAAKAACA%22%2C%22language%22%3A%22es-ES%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%2243f2a487-162c-44a1-8d1d-c95a9c6799ee%22%2C%22amount%22%3A9.99%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22ES%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%7D&operation=Add&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionData param value is empty.", "v7.0/90438131-da54-419c-96ed-49be6b22603d/PaymentSessionDescriptions?paymentSessionData=&operation=Add&language=en-US", true)]

        [DataTestMethod]
        public async Task PaymentSessionDataParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));                

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", " v7.0/e67a4463-4c36-423a-bbb4-44138fac7586/challengeDescriptions?timezoneOffset=420&paymentSessionOrData=%7B%22piid%22%3A%22oIhKmQEAAAAIAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%7D&operation=RenderPidlPage&language=en-US")]
        [DataRow(true, "Incoming request url is valid", " v7.0/b9ba38c0-f252-451d-b342-c46a0de58b85/challengeDescriptions?timezoneOffset=240&paymentSessionOrData=%7B%22piid%22%3A%22FG6xcwEAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%7D&operation=RenderPidlPage&language=en-US")]
        [DataRow(true, "Incoming request url is valid", " v7.0/bbce2dae-ded9-4aff-acbc-932a4e810a33/challengeDescriptions?timezoneOffset=300&paymentSessionOrData=%7B%22piid%22%3A%226rJDZwEAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A75.23%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%7D&operation=RenderPidlPage&language=es-ES")]
        [DataRow(true, "Incoming request url is valid", " v7.0/b59c3821-bfdd-4834-9fdb-8a08aa80f8e3/challengeDescriptions?timezoneOffset=420&paymentSessionOrData=%7B%22piid%22%3A%22FbhWfgAAAAACAACA%22%2C%22piCid%22%3Anull%2C%22isLegacy%22%3Atrue%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22caid%22%3A%225207c0d2-c8fa-42e4-9417-c284f500ffd8%22%2C%22amount%22%3A0%2C%22currency%22%3A%22EUR%22%2C%22challengeWindowSize%22%3A%2203%22%2C%22country%22%3A%22CA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22commercialstores%22%7D&operation=RenderPidlPage&language=en-US")]
        [DataRow(true, "Incoming request url is valid", "v7.0/0df1d7a9-89d1-4eb7-8b31-6db990bee86c/challengeDescriptions?timezoneOffset=240&paymentSessionOrData=%7B%22piid%22%3A%22f6eE4gEAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22CAD%22%2C%22country%22%3A%22CA%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%7D&operation=RenderPidlPage&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionOrData param value is in invalid Json format.", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=01&paymentSessionOrData=%22piid%22%3A%223fxdEgAAAAADAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A9.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22")]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionOrData param value is longer than 2048(3384).", " v7.0/49cf445d-5239-4a72-a87c-b29fd03d0b9d/challengeDescriptions?timezoneOffset=360&paymentSessionOrData=%7B%22piid%22%3A%22rQqKhQAAAAABAACA%22%2C%22language%22%3A%22es-ES%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22GTQ%22%2C%22country%22%3A%22GT%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22b69033d1-3a2d-42dc-ae02-04430355cf2c%22%2C%22language%22%3A%22hu-HU%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A4190%2C%22currency%22%3A%22HUF%22%2C%22country%22%3A%22HU%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22qROM8gEAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%220bb3f4f5-6f15-41e3-b27e-2b9e9cf7ecc3%22%2C%22amount%22%3A1.06%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22IXLE9AEAAAACAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22c4e69485-9cad-4e2e-aade-729bdd864b9c%22%2C%22amount%22%3A64.2%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22PGp8egAAAAAEAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A13%2C%22currency%22%3A%22AUD%22%2C%22country%22%3A%22AU%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%221nxObwAAAAAPAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A54.99%2C%22currency%22%3A%22ILS%22%2C%22country%22%3A%22IL%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22aaFXQAAAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A10.65%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22ARh34QEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22commercialstores%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22challengeWindowSize%22%3A%2202%22%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22isLegacy%22%3Atrue%2C%22piCid%22%3A%22fdfdcb23-f4e0-4ef6-aa44-6c1ec26fdc14%22%2C%22caid%22%3A%227811547e-8f53-40fb-a71f-9c6a73863224%22%22challengeWindowSize%22%3A%2203%22%2C%22country%22%3A%22US%22%2C%22language%22%3A%22en%22%2C%22partner%22%3A%22commercialstores%22%2C%22amount%22%3A20%2C%22caid%22%3A%229cfb3ce6-5d36-4f6b-aa71-5dc36de1a128%22%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22currency%22%3A%22USD%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Atrue%2C%22isMOTO%22%3Afalse%2C%22paymentMethodType%22%3A%22visa%22%2C%22piCid%22%3A%22005b344d-0933-4fcd-82d1-0ea68ea6a814%22%2C%22piid%22%3A%22j9t4hAAAAAABAACA%22%7D&operation=RenderPidlPage&language=hu-hu")]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionOrData param value is longer than 2048(3384).", " v7.0/49cf445d-5239-4a72-a87c-b29fd03d0b9d/challengeDescriptions?timezoneOffset=360&paymentSessionOrData=%7B%22piid%22%3A%22rQqKhQAAAAABAACA%22%2C%22language%22%3A%22es-ES%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22GTQ%22%2C%22country%22%3A%22GT%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22b69033d1-3a2d-42dc-ae02-04430355cf2c%22%2C%22language%22%3A%22hu-HU%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A4190%2C%22currency%22%3A%22HUF%22%2C%22country%22%3A%22HU%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22qROM8gEAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22oxowebdirect%22%2C%22piCid%22%3A%220bb3f4f5-6f15-41e3-b27e-2b9e9cf7ecc3%22%2C%22amount%22%3A1.06%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22IXLE9AEAAAACAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22c4e69485-9cad-4e2e-aade-729bdd864b9c%22%2C%22amount%22%3A64.2%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22PGp8egAAAAAEAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A13%2C%22currency%22%3A%22AUD%22%2C%22country%22%3A%22AU%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%221nxObwAAAAAPAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A54.99%2C%22currency%22%3A%22ILS%22%2C%22country%22%3A%22IL%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22aaFXQAAAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A10.65%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22ARh34QEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22commercialstores%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22challengeWindowSize%22%3A%2202%22%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22isLegacy%22%3Atrue%2C%22piCid%22%3A%22fdfdcb23-f4e0-4ef6-aa44-6c1ec26fdc14%22%2C%22caid%22%3A%227811547e-8f53-40fb-a71f-9c6a73863224%22%22challengeWindowSize%22%3A%2203%22%2C%22country%22%3A%22US%22%2C%22language%22%3A%22en%22%2C%22partner%22%3A%22commercialstores%22%2C%22amount%22%3A20%2C%22caid%22%3A%229cfb3ce6-5d36-4f6b-aa71-5dc36de1a128%22%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22currency%22%3A%22USD%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Atrue%2C%22isMOTO%22%3Afalse%2C%22paymentMethodType%22%3A%22visa%22%2C%22piCid%22%3A%22005b344d-0933-4fcd-82d1-0ea68ea6a814%22%2C%22piid%22%3A%22j9t4hAAAAAABAACA%22%7D&operation=RenderPidlPage&language=hu-hu")]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionOrData param value is in invalid Json format and is longer than 2048(3185).", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=01&paymentSessionOrData=!&!HA!@$%22id%22:%22Z10037AMM01C3b93bbd2-b27d-4aaf-980e-8898ecbc38e9%22,%22isChallengeRequired%22:true,%22signature%22:%22placeholder_for_paymentsession_signature_Z10037AMM01C3b93bbd2-b27d-4aaf-980e-8898ecbc38e9%22,%22challengeStatus%22:%22Unknown%22,%22sessionToken%22:null,%22challengeType%22:null,%22piid%22:%22jxWigAAAAAABAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:220.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%22piid%22%3A%225FSBcgAAAAAFAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A16.04%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22w9bWSgAAAAAHAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A10.69%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22Qc7I4gEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22commercialstores%22%2C%22amount%22%3A0%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22MX%22%2C%22challengeWindowSize%22%3A%2202%22%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22isLegacy%22%3Atrue%2C%22piCid%22%3Anull%2C%22caid%22%3A%22bbef2f16-02a0-405c-9578-bee9e19872a9%22%22piid%22%3A%22pxAXhAAAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22bing%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22challengeScenario%22%3A%22AddCard%22%2C%22challengeWindowSize%22%3A%2204%22%22piid%22%3A%223iUduAEAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%22id%22%3Anull%2C%22piid%22%3A%22sSsbhQAAAAABAACA%22%2C%22paymentMethodType%22%3A%22paypal%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22setupoffice%22%2C%22piCid%22%3Anull%2C%22amount%22%3A69.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22caid%22%3Anull%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%22piid%22%3A%22KpFzrAAAAAABAACA%22%2C%22language%22%3A%22de-DE%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22DE%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22(*&!&operation=RenderPidlPage&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionOrData param value is longer than 2048(3416).", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=01&paymentSessionOrData=%7B%22piid%22:%22jxWigAAAAAABAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:210.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%22piid%22%3A%22JtEdHQAAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22challengeWindowSize%22%3A%2203%22%2C%22country%22%3A%22US%22%2C%22language%22%3A%22en%22%2C%22partner%22%3A%22commercialstores%22%2C%22amount%22%3A10.79%2C%22caid%22%3A%227df5da08-0976-4790-91e2-facc53401310%22%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22currency%22%3A%22USD%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Atrue%2C%22isMOTO%22%3Afalse%2C%22paymentMethodType%22%3A%22visa%22%2C%22piCid%22%3A%22797dfb0d-8794-4378-aa3f-0779e93f1c9f%22%2C%22piid%22%3A%22nGivdQAAAAACAACA%22%22piid%22%3A%223IazZgAAAAARAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%22piid%22%3A%22V8nI4gEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22commercialstores%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22challengeWindowSize%22%3A%2202%22%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22isLegacy%22%3Atrue%2C%22piCid%22%3A%22705e3762-e10d-4c31-9dd5-51effe815e6e%22%2C%22caid%22%3A%22c85f94a5-60db-4153-a929-c4227a1390aa%22%22piid%22%3A%2261ZXBQEAAAACAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%222E60zgEAAAABAACA%22%2C%22language%22%3A%22fr-CA%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A13.79%2C%22currency%22%3A%22CAD%22%2C%22country%22%3A%22CA%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22wcKgfgAAAAACAACA%22%2C%22language%22%3A%22es-MX%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A69.99%2C%22currency%22%3A%22MXN%22%2C%22country%22%3A%22MX%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22dWgBFAEAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22CAD%22%2C%22country%22%3A%22CA%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%7D&operation=RenderPidlPage&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionOrData param value is empty.", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=01&paymentSessionOrData=")]       
        [DataRow(true, "Incoming request url is valid", " v7.0/e67a4463-4c36-423a-bbb4-44138fac7586/challengeDescriptions?timezoneOffset=420&paymentSessionOrData=%7B%22piid%22%3A%22oIhKmQEAAAAIAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%7D&operation=RenderPidlPage&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", " v7.0/b9ba38c0-f252-451d-b342-c46a0de58b85/challengeDescriptions?timezoneOffset=240&paymentSessionOrData=%7B%22piid%22%3A%22FG6xcwEAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%7D&operation=RenderPidlPage&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", " v7.0/bbce2dae-ded9-4aff-acbc-932a4e810a33/challengeDescriptions?timezoneOffset=300&paymentSessionOrData=%7B%22piid%22%3A%226rJDZwEAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A75.23%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%7D&operation=RenderPidlPage&language=es-ES", true)]
        [DataRow(true, "Incoming request url is valid", " v7.0/b59c3821-bfdd-4834-9fdb-8a08aa80f8e3/challengeDescriptions?timezoneOffset=420&paymentSessionOrData=%7B%22piid%22%3A%22FbhWfgAAAAACAACA%22%2C%22piCid%22%3Anull%2C%22isLegacy%22%3Atrue%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22caid%22%3A%225207c0d2-c8fa-42e4-9417-c284f500ffd8%22%2C%22amount%22%3A0%2C%22currency%22%3A%22EUR%22%2C%22challengeWindowSize%22%3A%2203%22%2C%22country%22%3A%22CA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22commercialstores%22%7D&operation=RenderPidlPage&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/0df1d7a9-89d1-4eb7-8b31-6db990bee86c/challengeDescriptions?timezoneOffset=240&paymentSessionOrData=%7B%22piid%22%3A%22f6eE4gEAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22CAD%22%2C%22country%22%3A%22CA%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%7D&operation=RenderPidlPage&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionOrData param value is in invalid Json format.", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=01&paymentSessionOrData=%22piid%22%3A%223fxdEgAAAAADAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A9.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22", true)]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionOrData param value is longer than 2048(3384).", " v7.0/49cf445d-5239-4a72-a87c-b29fd03d0b9d/challengeDescriptions?timezoneOffset=360&paymentSessionOrData=%7B%22piid%22%3A%22rQqKhQAAAAABAACA%22%2C%22language%22%3A%22es-ES%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22GTQ%22%2C%22country%22%3A%22GT%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22b69033d1-3a2d-42dc-ae02-04430355cf2c%22%2C%22language%22%3A%22hu-HU%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A4190%2C%22currency%22%3A%22HUF%22%2C%22country%22%3A%22HU%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22qROM8gEAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%220bb3f4f5-6f15-41e3-b27e-2b9e9cf7ecc3%22%2C%22amount%22%3A1.06%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22IXLE9AEAAAACAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22c4e69485-9cad-4e2e-aade-729bdd864b9c%22%2C%22amount%22%3A64.2%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22PGp8egAAAAAEAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A13%2C%22currency%22%3A%22AUD%22%2C%22country%22%3A%22AU%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%221nxObwAAAAAPAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A54.99%2C%22currency%22%3A%22ILS%22%2C%22country%22%3A%22IL%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22aaFXQAAAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A10.65%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22ARh34QEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22commercialstores%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22challengeWindowSize%22%3A%2202%22%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22isLegacy%22%3Atrue%2C%22piCid%22%3A%22fdfdcb23-f4e0-4ef6-aa44-6c1ec26fdc14%22%2C%22caid%22%3A%227811547e-8f53-40fb-a71f-9c6a73863224%22%22challengeWindowSize%22%3A%2203%22%2C%22country%22%3A%22US%22%2C%22language%22%3A%22en%22%2C%22partner%22%3A%22commercialstores%22%2C%22amount%22%3A20%2C%22caid%22%3A%229cfb3ce6-5d36-4f6b-aa71-5dc36de1a128%22%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22currency%22%3A%22USD%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Atrue%2C%22isMOTO%22%3Afalse%2C%22paymentMethodType%22%3A%22visa%22%2C%22piCid%22%3A%22005b344d-0933-4fcd-82d1-0ea68ea6a814%22%2C%22piid%22%3A%22j9t4hAAAAAABAACA%22%7D&operation=RenderPidlPage&language=hu-hu", true)]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionOrData param value is longer than 2048(3384).", " v7.0/49cf445d-5239-4a72-a87c-b29fd03d0b9d/challengeDescriptions?timezoneOffset=360&paymentSessionOrData=%7B%22piid%22%3A%22rQqKhQAAAAABAACA%22%2C%22language%22%3A%22es-ES%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22GTQ%22%2C%22country%22%3A%22GT%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22b69033d1-3a2d-42dc-ae02-04430355cf2c%22%2C%22language%22%3A%22hu-HU%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A4190%2C%22currency%22%3A%22HUF%22%2C%22country%22%3A%22HU%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22qROM8gEAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22oxowebdirect%22%2C%22piCid%22%3A%220bb3f4f5-6f15-41e3-b27e-2b9e9cf7ecc3%22%2C%22amount%22%3A1.06%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22IXLE9AEAAAACAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22webblends%22%2C%22piCid%22%3A%22c4e69485-9cad-4e2e-aade-729bdd864b9c%22%2C%22amount%22%3A64.2%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22challengeWindowSize%22%3A%2202%22%22piid%22%3A%22PGp8egAAAAAEAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A13%2C%22currency%22%3A%22AUD%22%2C%22country%22%3A%22AU%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%221nxObwAAAAAPAACA%22%2C%22language%22%3A%22en-GB%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A54.99%2C%22currency%22%3A%22ILS%22%2C%22country%22%3A%22IL%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22aaFXQAAAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A10.65%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22ARh34QEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22commercialstores%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22challengeWindowSize%22%3A%2202%22%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22isLegacy%22%3Atrue%2C%22piCid%22%3A%22fdfdcb23-f4e0-4ef6-aa44-6c1ec26fdc14%22%2C%22caid%22%3A%227811547e-8f53-40fb-a71f-9c6a73863224%22%22challengeWindowSize%22%3A%2203%22%2C%22country%22%3A%22US%22%2C%22language%22%3A%22en%22%2C%22partner%22%3A%22commercialstores%22%2C%22amount%22%3A20%2C%22caid%22%3A%229cfb3ce6-5d36-4f6b-aa71-5dc36de1a128%22%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22currency%22%3A%22USD%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Atrue%2C%22isMOTO%22%3Afalse%2C%22paymentMethodType%22%3A%22visa%22%2C%22piCid%22%3A%22005b344d-0933-4fcd-82d1-0ea68ea6a814%22%2C%22piid%22%3A%22j9t4hAAAAAABAACA%22%7D&operation=RenderPidlPage&language=hu-hu", true)]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionOrData param value is in invalid Json format and is longer than 2048(3185).", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=01&paymentSessionOrData=!&!HA!@$%22id%22:%22Z10037AMM01C3b93bbd2-b27d-4aaf-980e-8898ecbc38e9%22,%22isChallengeRequired%22:true,%22signature%22:%22placeholder_for_paymentsession_signature_Z10037AMM01C3b93bbd2-b27d-4aaf-980e-8898ecbc38e9%22,%22challengeStatus%22:%22Unknown%22,%22sessionToken%22:null,%22challengeType%22:null,%22piid%22:%22jxWigAAAAAABAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:220.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%22piid%22%3A%225FSBcgAAAAAFAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A16.04%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22w9bWSgAAAAAHAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A10.69%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22Qc7I4gEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22commercialstores%22%2C%22amount%22%3A0%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22MX%22%2C%22challengeWindowSize%22%3A%2202%22%2C%22challengeScenario%22%3A%22PaymentTransaction%22%2C%22isLegacy%22%3Atrue%2C%22piCid%22%3Anull%2C%22caid%22%3A%22bbef2f16-02a0-405c-9578-bee9e19872a9%22%22piid%22%3A%22pxAXhAAAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22bing%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22challengeScenario%22%3A%22AddCard%22%2C%22challengeWindowSize%22%3A%2204%22%22piid%22%3A%223iUduAEAAAABAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%22id%22%3Anull%2C%22piid%22%3A%22sSsbhQAAAAABAACA%22%2C%22paymentMethodType%22%3A%22paypal%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22setupoffice%22%2C%22piCid%22%3Anull%2C%22amount%22%3A69.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22caid%22%3Anull%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%22piid%22%3A%22KpFzrAAAAAABAACA%22%2C%22language%22%3A%22de-DE%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22EUR%22%2C%22country%22%3A%22DE%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22(*&!&operation=RenderPidlPage&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionOrData param value is longer than 2048(3416).", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=01&paymentSessionOrData=%7B%22piid%22:%22jxWigAAAAAABAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:210.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%22piid%22%3A%22JtEdHQAAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22challengeWindowSize%22%3A%2203%22%2C%22country%22%3A%22US%22%2C%22language%22%3A%22en%22%2C%22partner%22%3A%22commercialstores%22%2C%22amount%22%3A10.79%2C%22caid%22%3A%227df5da08-0976-4790-91e2-facc53401310%22%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22currency%22%3A%22USD%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Atrue%2C%22isMOTO%22%3Afalse%2C%22paymentMethodType%22%3A%22visa%22%2C%22piCid%22%3A%22797dfb0d-8794-4378-aa3f-0779e93f1c9f%22%2C%22piid%22%3A%22nGivdQAAAAACAACA%22%22piid%22%3A%223IazZgAAAAARAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%22piid%22%3A%22V8nI4gEAAAABAACA%22%2C%22language%22%3A%22en-us%22%2C%22partner%22%3A%22commercialstores%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22challengeWindowSize%22%3A%2202%22%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22isLegacy%22%3Atrue%2C%22piCid%22%3A%22705e3762-e10d-4c31-9dd5-51effe815e6e%22%2C%22caid%22%3A%22c85f94a5-60db-4153-a929-c4227a1390aa%22%22piid%22%3A%2261ZXBQEAAAACAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%222E60zgEAAAABAACA%22%2C%22language%22%3A%22fr-CA%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A13.79%2C%22currency%22%3A%22CAD%22%2C%22country%22%3A%22CA%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22wcKgfgAAAAACAACA%22%2C%22language%22%3A%22es-MX%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A69.99%2C%22currency%22%3A%22MXN%22%2C%22country%22%3A%22MX%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%22piid%22%3A%22dWgBFAEAAAAEAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A0%2C%22currency%22%3A%22CAD%22%2C%22country%22%3A%22CA%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2204%22%7D&operation=RenderPidlPage&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. PaymentSessionOrData param value is empty.", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=01&paymentSessionOrData=", true)]

        [DataTestMethod]
        public async Task PaymentSessionOrDataParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));
                
                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/1f44ea98-db83-4893-9630-21e12d23b1e5/challengeDescriptions?type=Sms&sessionId=cc63ee99-91ad-4e1c-9358-ed827b8e93c9&piid=xTX4%2BwEAAAAdAACA&partner=xbox&operation=RenderPidlPage&country=us&language=en-US")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=true&partner=wallet&language=en-US")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&piid=pSJWRgAAAAA%2BAQCA&sessionId=123456")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=webblends&piid=TestPiid&type=cvv&sessionId=123456")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=oxowebdirect&piid=TestPiid&type=cvv&sessionId=123456")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=cart&piid=%2BigZdQAAAAAFAACA&type=cvv&sessionId=123456")]
        [DataRow(false, "Incoming request url is invalid. Piid param value has special char.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=webblends&piid=a08b641b-bb!@>_+4a-42**93-9c7d-c53437f6ba19&type=sms&sessionId=123456")]
        [DataRow(false, "Incoming request url is invalid. Piid param value is longer than 50.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=webblends_inline&piid=4bb7-bbe8-67b9a8ba766bcca20ac4-b92f-42ba-9f69-dcecd13dc1954f72eb42-1439-4be3-a15e-417fa8e2b02d&type=sms&sessionId=123456")]
        [DataRow(false, "Incoming request url is invalid. Piid param value is longer than 50.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=oxowebdirect&piid=4bb7-bbe8-67b9a8ba766bcca20ac4-b92f-42ba-9f69-dcecd13dc1954f72eb42-1439-4be3-a15e-417fa8e2b02d&type=sms&sessionId=123456")]
        [DataRow(false, "Incoming request url is invalid. Piid param value has special char.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=oxowebdirect&piid=a08b641b-bb!@>_+4a-42**93-9c7d-c53437f6ba19&type=sms&sessionId=123456")]
        [DataRow(false, "Incoming request url is invalid. Piid param value special char and longer than 50.", "v7.0/fdb92625-e512-4d48-adf6-0963945ca8ac/challengeDescriptions?type=Sms&sessionId=97ba02ec-a941-4892-99c2-26d67c70aaff&piid=e9768041$$3e1e$$4fcc__a29f-79b71cfc72666298!@%*)b375-0b13-4ab0-bc04-64$&#)+:”c291f180d9&partner=xbox&operation=RenderPidlPage&country=US&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. Piid param value is special char and longer than 50.", "v7.0/09e41d49-7cdf-4cd0-9866-6d8f8b881dda/challengeDescriptions?type=Sms&sessionId=4ef5d7ca-91db-45bd-9915-3b395f22e780&piid=1474098e%ec81%4f89%8233%8352330a95504a6cb62c-05ca-438d-ac5f-acf16aaa095)(@#^<>”{!@~48f1e0ca0-e4ff-479e-bdae-876d72c88ff4&partner=xbox&operation=RenderPidlPage&country=us&language=en-US")]
        [DataRow(false, "Incoming request url is invalid Piid param value is empty.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=webblends_inline&piid=&type=cvv&sessionId=123456")]
        [DataRow(false, "Incoming request url is invalid Piid param value is empty.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=oxowebdirect&piid=&type=cvv&sessionId=123456")]      
        [DataRow(true, "Incoming request url is valid", "v7.0/1f44ea98-db83-4893-9630-21e12d23b1e5/challengeDescriptions?type=Sms&sessionId=cc63ee99-91ad-4e1c-9358-ed827b8e93c9&piid=xTX4%2BwEAAAAdAACA&partner=xbox&operation=RenderPidlPage&country=us&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=true&partner=wallet&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&piid=pSJWRgAAAAA%2BAQCA&sessionId=123456", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=webblends&piid=TestPiid&type=cvv&sessionId=123456", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=oxowebdirect&piid=TestPiid&type=cvv&sessionId=123456", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=cart&piid=%2BigZdQAAAAAFAACA&type=cvv&sessionId=123456", true)]
        [DataRow(false, "Incoming request url is invalid. Piid param value has special char.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=webblends&piid=a08b641b-bb!@>_+4a-42**93-9c7d-c53437f6ba19&type=sms&sessionId=123456", true)]
        [DataRow(false, "Incoming request url is invalid. Piid param value is longer than 50.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=webblends_inline&piid=4bb7-bbe8-67b9a8ba766bcca20ac4-b92f-42ba-9f69-dcecd13dc1954f72eb42-1439-4be3-a15e-417fa8e2b02d&type=sms&sessionId=123456", true)]
        [DataRow(false, "Incoming request url is invalid. Piid param value is longer than 50.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=oxowebdirect&piid=4bb7-bbe8-67b9a8ba766bcca20ac4-b92f-42ba-9f69-dcecd13dc1954f72eb42-1439-4be3-a15e-417fa8e2b02d&type=sms&sessionId=123456", true)]
        [DataRow(false, "Incoming request url is invalid. Piid param value has special char.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=oxowebdirect&piid=a08b641b-bb!@>_+4a-42**93-9c7d-c53437f6ba19&type=sms&sessionId=123456", true)]
        [DataRow(false, "Incoming request url is invalid. Piid param value special char and longer than 50.", "v7.0/fdb92625-e512-4d48-adf6-0963945ca8ac/challengeDescriptions?type=Sms&sessionId=97ba02ec-a941-4892-99c2-26d67c70aaff&piid=e9768041$$3e1e$$4fcc__a29f-79b71cfc72666298!@%*)b375-0b13-4ab0-bc04-64$&#)+:”c291f180d9&partner=xbox&operation=RenderPidlPage&country=US&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. Piid param value is special char and longer than 50.", "v7.0/09e41d49-7cdf-4cd0-9866-6d8f8b881dda/challengeDescriptions?type=Sms&sessionId=4ef5d7ca-91db-45bd-9915-3b395f22e780&piid=1474098e%ec81%4f89%8233%8352330a95504a6cb62c-05ca-438d-ac5f-acf16aaa095)(@#^<>”{!@~48f1e0ca0-e4ff-479e-bdae-876d72c88ff4&partner=xbox&operation=RenderPidlPage&country=us&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid Piid param value is empty.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=webblends_inline&piid=&type=cvv&sessionId=123456", true)]
        [DataRow(false, "Incoming request url is invalid Piid param value is empty.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?language=en-us&country=us&partner=oxowebdirect&piid=&type=cvv&sessionId=123456", true)]

        [DataTestMethod]
        public async Task PiidParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=true&partner=wallet&language=en-US")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=true&partner=wallet&language=en-US")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=true&partner=wallet&language=en-US")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=true&partner=wallet&language=en-US")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=true&partner=wallet&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. RevertChallengeOption param value has special char.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=true%%^&**(#&partner=wallet&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. RevertChallengeOption param value has special char and num.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=False%^@!()$45791!@}%&partner=wallet&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. RevertChallengeOption param value has num.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=true8712&partner=wallet&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. RevertChallengeOption param value has special char and num.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=true%^&!@~{@14548&()_+544}&partner=wallet&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. RevertChallengeOption param value is empty", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=Fale&partner=wallet&language=en-US")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=true&partner=wallet&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=true&partner=wallet&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=true&partner=wallet&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=true&partner=wallet&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=true&partner=wallet&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. RevertChallengeOption param value has special char.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=true%%^&**(#&partner=wallet&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. RevertChallengeOption param value has special char and num.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=False%^@!()$45791!@}%&partner=wallet&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. RevertChallengeOption param value has num.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=true8712&partner=wallet&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. RevertChallengeOption param value has special char and num.", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=true%^&!@~{@14548&()_+544}&partner=wallet&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. RevertChallengeOption param value is empty", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/challengeDescriptions?piid=8b78ba36-900a-4f30-96ae-6155197c8067&revertChallengeOption=Fale&partner=wallet&language=en-US", true)]

        [DataTestMethod]
        public async Task RevertChallengeOptionParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));
                
                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/c97b6abb-849f-44ae-987e-37975fe7ecff/paymentInstrumentsEx?country=in&language=en-IN&partner=commercialstores&completePrerequisites=True&scenario=includecvv")]
        [DataRow(true, "Incoming request url is valid", "v7.0/fd03e12c-c9ea-406d-8188-76057d569b2c/TaxIdDescriptions?type=commercial_tax_id&scenario=departmentalPurchase&partner=commercialstores&operation=Add&country=BG&language=en-US")]
        [DataRow(true, "Incoming request url is valid", "v7.0/a5347349-1dde-4cdd-ad5a-5d6b2f0b2bd1/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=officeoobe&operation=Add&country=us&language=en-US&family=credit_card&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(true, "Incoming request url is valid", "v7.0/f9c1ba54-4838-4432-a724-3f245fbb0d9d/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=officeoobe&operation=Add&country=au&language=en-GB&family=credit_card&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(true, "Incoming request url is valid", "v7.0/a5347349-1dde-4cdd-ad5a-5d6b2f0b2bd1/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=oxooobe&operation=Add&country=us&language=en-US&family=credit_card&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(true, "Incoming request url is valid", "v7.0/f9c1ba54-4838-4432-a724-3f245fbb0d9d/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=oxooobe&operation=Add&country=au&language=en-GB&family=credit_card&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(true, "Incoming request url is valid", "v7.0/8e342cdc-771b-4b19-84a0-bef4c44911f7/taxIdDescriptions?country=za&type=commercial_tax_id&language=en-US&partner=commercialstores&operation=update&scenario=withCountryDropdown")]
        [DataRow(false, "Incoming request url is invalid. Scenario param value has special char.", "v7.0/01b4921e-5e2d-4e14-9514-5d9b8b545bcf/AddressDescriptions?type=billing&scenario=rs5%@!&partner=officeoobe&operation=Add&language=zh-Hans-CN&country=cn")]
        [DataRow(false, "Incoming request url is invalid. Scenario param value has special char.", "v7.0/01b4921e-5e2d-4e14-9514-5d9b8b545bcf/AddressDescriptions?type=billing&scenario=rs5%@!&partner=oxooobe&operation=Add&language=zh-Hans-CN&country=cn")]
        [DataRow(false, "Incoming request url is invalid. Scenario param value is longer than 35.", "v7.0/0b59c92d-8b46-4ae7-bc6c-99d01c49a002/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=monetaryCommitModernAccountsservice_usage_addressrs5&partner=officeoobe&operation=Add&country=tr&language=tr&family=credit_card&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(false, "Incoming request url is invalid. Scenario param value special char and longer than 35.", "v7.0/8e342cdc-771b-4b19-84a0-bef4c44911f7/taxIdDescriptions?country=nz&type=commercial_tax_id&language=en-US&partner=commercialstores&operation=update&scenario=signup%@!$rs5fixedcountryselection@#*)(+includecvv")]
        [DataRow(false, "Incoming request url is invalid. Scenario param value is special char and longer than 35", "v7.0/75feef88-e0a6-49ea-a25b-9a1ac55ba1d7/paymentInstrumentsEx?country=th&language=en-US&partner=Azure&classicProduct=azureClassic&billableAccountId=lYut8AEAAAAAAAAA&scenario=azureIbiza!@^:{}monetary#$#^*{_^$CommitModernAccounts")]
        [DataRow(false, "Incoming request url is invalid. Scenario param value is empty.", "v7.0/a2f6166d-c5f4-4bd6-98c5-59e02ef42113/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=&partner=officeoobe&operation=Add&country=ch&language=de-DE&family=credit_card&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(false, "Incoming request url is invalid. Scenario param value is empty.", "v7.0/a2f6166d-c5f4-4bd6-98c5-59e02ef42113/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=&partner=oxooobe&operation=Add&country=ch&language=de-DE&family=credit_card&completePrerequisites=true&classicProduct=Omex")]       
        [DataRow(true, "Incoming request url is valid", "v7.0/c97b6abb-849f-44ae-987e-37975fe7ecff/paymentInstrumentsEx?country=in&language=en-IN&partner=commercialstores&completePrerequisites=True&scenario=includecvv", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/fd03e12c-c9ea-406d-8188-76057d569b2c/TaxIdDescriptions?type=commercial_tax_id&scenario=departmentalPurchase&partner=commercialstores&operation=Add&country=BG&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/a5347349-1dde-4cdd-ad5a-5d6b2f0b2bd1/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=officeoobe&operation=Add&country=us&language=en-US&family=credit_card&completePrerequisites=true&classicProduct=Omex", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/f9c1ba54-4838-4432-a724-3f245fbb0d9d/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=officeoobe&operation=Add&country=au&language=en-GB&family=credit_card&completePrerequisites=true&classicProduct=Omex", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/a5347349-1dde-4cdd-ad5a-5d6b2f0b2bd1/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=oxooobe&operation=Add&country=us&language=en-US&family=credit_card&completePrerequisites=true&classicProduct=Omex", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/f9c1ba54-4838-4432-a724-3f245fbb0d9d/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=oxooobe&operation=Add&country=au&language=en-GB&family=credit_card&completePrerequisites=true&classicProduct=Omex", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/8e342cdc-771b-4b19-84a0-bef4c44911f7/taxIdDescriptions?country=za&type=commercial_tax_id&language=en-US&partner=commercialstores&operation=update&scenario=withCountryDropdown", true)]
        [DataRow(false, "Incoming request url is invalid. Scenario param value has special char.", "v7.0/01b4921e-5e2d-4e14-9514-5d9b8b545bcf/AddressDescriptions?type=billing&scenario=rs5%@!&partner=officeoobe&operation=Add&language=zh-Hans-CN&country=cn", true)]
        [DataRow(false, "Incoming request url is invalid. Scenario param value has special char.", "v7.0/01b4921e-5e2d-4e14-9514-5d9b8b545bcf/AddressDescriptions?type=billing&scenario=rs5%@!&partner=oxooobe&operation=Add&language=zh-Hans-CN&country=cn", true)]
        [DataRow(false, "Incoming request url is invalid. Scenario param value is longer than 35.", "v7.0/0b59c92d-8b46-4ae7-bc6c-99d01c49a002/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=monetaryCommitModernAccountsservice_usage_addressrs5&partner=officeoobe&operation=Add&country=tr&language=tr&family=credit_card&completePrerequisites=true&classicProduct=Omex", true)]
        [DataRow(false, "Incoming request url is invalid. Scenario param value special char and longer than 35.", "v7.0/8e342cdc-771b-4b19-84a0-bef4c44911f7/taxIdDescriptions?country=nz&type=commercial_tax_id&language=en-US&partner=commercialstores&operation=update&scenario=signup%@!$rs5fixedcountryselection@#*)(+includecvv", true)]
        [DataRow(false, "Incoming request url is invalid. Scenario param value is special char and longer than 35", "v7.0/75feef88-e0a6-49ea-a25b-9a1ac55ba1d7/paymentInstrumentsEx?country=th&language=en-US&partner=Azure&classicProduct=azureClassic&billableAccountId=lYut8AEAAAAAAAAA&scenario=azureIbiza!@^:{}monetary#$#^*{_^$CommitModernAccounts", true)]
        [DataRow(false, "Incoming request url is invalid. Scenario param value is empty.", "v7.0/a2f6166d-c5f4-4bd6-98c5-59e02ef42113/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=&partner=officeoobe&operation=Add&country=ch&language=de-DE&family=credit_card&completePrerequisites=true&classicProduct=Omex", true)]
        [DataRow(false, "Incoming request url is invalid. Scenario param value is empty.", "v7.0/a2f6166d-c5f4-4bd6-98c5-59e02ef42113/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=&partner=oxooobe&operation=Add&country=ch&language=de-DE&family=credit_card&completePrerequisites=true&classicProduct=Omex", true)]
        [DataTestMethod]
        public async Task ScenarioParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/c117b071-9067-4e65-9e86-134485d128ee/paymentMethodDescriptions?sessionId=e85cfe15-32b7-4762-9f54-6af59224d046&partner=xbox&orderId=082c6c03-4171-495c-9105-e9c1c3fcab30&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A4.99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/f4baae44-fd6d-4d2a-935f-d82d5c8ce668/paymentMethodDescriptions?sessionId=879df45b-f23c-464b-865f-38e41c514a8f&partner=webblends&orderId=ffa4ee2e-9bff-4772-9f8c-bb0839d9f969&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A4.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/940c0e62-bf2a-4581-bc74-716ef651aa30/paymentMethodDescriptions?sessionId=e24ebe7c-49e9-4fb7-aa95-b3836d4225c0&partner=webblends&orderId=2909489e-7d34-4036-aaca-5ef423832b8d&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A1%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/f4baae44-fd6d-4d2a-935f-d82d5c8ce668/paymentMethodDescriptions?sessionId=879df45b-f23c-464b-865f-38e41c514a8f&partner=oxowebdirect&orderId=ffa4ee2e-9bff-4772-9f8c-bb0839d9f969&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A4.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/940c0e62-bf2a-4581-bc74-716ef651aa30/paymentMethodDescriptions?sessionId=e24ebe7c-49e9-4fb7-aa95-b3836d4225c0&partner=oxowebdirect&orderId=2909489e-7d34-4036-aaca-5ef423832b8d&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A1%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/7bd85698-d948-4495-aef2-14d8f751f51a/paymentMethodDescriptions?sessionId=4caaf61c-6a0b-4971-8b4d-2c196851d77d&partner=xbox&orderId=313c3080-4094-4d9f-9d29-d72218acf7d7&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A4.99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/0981616a-0092-4e5a-bb64-5b93a396dda2/paymentMethodDescriptions?sessionId=f8b9cadd-d48a-4bf8-8992-dbad7446f78d&partner=xbox&orderId=be9799b6-acc2-4ba2-b7a9-8ded0b240d18&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A9.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(false, "Incoming request url is invalid. SessionId param value has special char.", "v7.0/015e268f-59c6-40e1-9420-75e86d33a0b0/paymentMethodDescriptions?sessionId=fab!@#$20(12)c-353f-4a9d-92c0-35387fcb41e1&partner=xbox&orderId=6438c1a4-76db-4632-9554-d7c36e3e9805&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A4.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D")]
        [DataRow(false, "Incoming request url is invalid. SessionId param value is longer than 60(180).", "v7.0/673a6c3a-dc41-489d-a0c1-27198c89acf0/paymentMethodDescriptions?sessionId=c1063fdc-b073-be6b-d47b-54aa07a24141d64b69be-3cd5-45be-85aa-41ef117a0e1dd68ff17c-2b32-41ae-83cc-7d87fd736835a9a343f7-c3b5-479c-845e-2ec2afef25a1aa2f6e21-8cba-425e-a6b4-9c5862de635d&operation=Select&country=us&language=en-us&filters=%7B%22chargeThreshold%22%3A1%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%5D")]
        [DataRow(false, "Incoming request url is invalid. SessionId param value special char and longer than 60(147).", "v7.0/9d110f06-d744-4367-8099-50e0de49338b/paymentMethodDescriptions?sessionId=3feeb986-ff43%4c11%96b1%e9d422&@$e0a2ef17208f70-2588-41c6-814b-8b64fcd291354f1675a7-d8da-495f-a7b6-f733fbb497eea81bfed2-a515-46a7-8b3e-94e03b677f57&partner=webblends&orderId=3b306951-2ba1-4feb-995e-945c417494)(+_{}<>?65&partner=webblends&orderId=3b306951-2ba1-4feb-995e-945c41749465&partner=xbox&operation=Select&country=mx&language=es-MX&filters=%7B%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%5D")]
        [DataRow(false, "Incoming request url is invalid. SessionId param value special char and longer than 60(147).", "v7.0/9d110f06-d744-4367-8099-50e0de49338b/paymentMethodDescriptions?sessionId=3feeb986-ff43%4c11%96b1%e9d422&@$e0a2ef17208f70-2588-41c6-814b-8b64fcd291354f1675a7-d8da-495f-a7b6-f733fbb497eea81bfed2-a515-46a7-8b3e-94e03b677f57&partner=oxowebdirect&orderId=3b306951-2ba1-4feb-995e-945c417494)(+_{}<>?65&partner=webblends&orderId=3b306951-2ba1-4feb-995e-945c41749465&partner=xbox&operation=Select&country=mx&language=es-MX&filters=%7B%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%5D")]
        [DataRow(false, "Incoming request url is invalid. SessionId param value is special char and longer than 60(134).", "v7.0/bbec2623-dd4c-41e3-ad2c-46d12d11893d/challengeDescriptions?type=Sms&sessionId=ac5f6cf7-f410-4ff2-a26f-d71e:”{}<>?dfe3f7f3cfb68dc4-46a*-8-4b97-8~!6a3-29c55de71c9d&piid=f90a82bd-8b09-4713-9449-14ae+_!@95f351f$%^&*6&partner=xbox&operation=RenderPidlPage&country=us&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. SessionId param value is empty.", "v7.0/89023fb7-3ef8-4e7d-b863-d297ed226ac1/addressDescriptions?partner=onedrive&country=US&language=en&sessionId=&completePrerequisites=true&type=billing&operation=Add")]
        [DataRow(true, "Incoming request url is valid", "v7.0/c117b071-9067-4e65-9e86-134485d128ee/paymentMethodDescriptions?sessionId=e85cfe15-32b7-4762-9f54-6af59224d046&partner=xbox&orderId=082c6c03-4171-495c-9105-e9c1c3fcab30&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A4.99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/f4baae44-fd6d-4d2a-935f-d82d5c8ce668/paymentMethodDescriptions?sessionId=879df45b-f23c-464b-865f-38e41c514a8f&partner=webblends&orderId=ffa4ee2e-9bff-4772-9f8c-bb0839d9f969&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A4.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/940c0e62-bf2a-4581-bc74-716ef651aa30/paymentMethodDescriptions?sessionId=e24ebe7c-49e9-4fb7-aa95-b3836d4225c0&partner=webblends&orderId=2909489e-7d34-4036-aaca-5ef423832b8d&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A1%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/f4baae44-fd6d-4d2a-935f-d82d5c8ce668/paymentMethodDescriptions?sessionId=879df45b-f23c-464b-865f-38e41c514a8f&partner=oxowebdirect&orderId=ffa4ee2e-9bff-4772-9f8c-bb0839d9f969&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A4.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/940c0e62-bf2a-4581-bc74-716ef651aa30/paymentMethodDescriptions?sessionId=e24ebe7c-49e9-4fb7-aa95-b3836d4225c0&partner=oxowebdirect&orderId=2909489e-7d34-4036-aaca-5ef423832b8d&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A1%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/7bd85698-d948-4495-aef2-14d8f751f51a/paymentMethodDescriptions?sessionId=4caaf61c-6a0b-4971-8b4d-2c196851d77d&partner=xbox&orderId=313c3080-4094-4d9f-9d29-d72218acf7d7&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A4.99%2C%22splitPaymentSupported%22%3A%22true%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/0981616a-0092-4e5a-bb64-5b93a396dda2/paymentMethodDescriptions?sessionId=f8b9cadd-d48a-4bf8-8992-dbad7446f78d&partner=xbox&orderId=be9799b6-acc2-4ba2-b7a9-8ded0b240d18&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A9.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(false, "Incoming request url is invalid. SessionId param value has special char.", "v7.0/015e268f-59c6-40e1-9420-75e86d33a0b0/paymentMethodDescriptions?sessionId=fab!@#$20(12)c-353f-4a9d-92c0-35387fcb41e1&partner=xbox&orderId=6438c1a4-76db-4632-9554-d7c36e3e9805&operation=Select&country=us&language=en-US&filters=%7B%22chargeThreshold%22%3A4.99%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22xboxonlycontent%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%2C%22invoice_credit.klarna%22%5D", true)]
        [DataRow(false, "Incoming request url is invalid. SessionId param value is longer than 60(180).", "v7.0/673a6c3a-dc41-489d-a0c1-27198c89acf0/paymentMethodDescriptions?sessionId=c1063fdc-b073-be6b-d47b-54aa07a24141d64b69be-3cd5-45be-85aa-41ef117a0e1dd68ff17c-2b32-41ae-83cc-7d87fd736835a9a343f7-c3b5-479c-845e-2ec2afef25a1aa2f6e21-8cba-425e-a6b4-9c5862de635d&operation=Select&country=us&language=en-us&filters=%7B%22chargeThreshold%22%3A1%2C%22splitPaymentSupported%22%3A%22false%22%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%%5D", true)]
        [DataRow(false, "Incoming request url is invalid. SessionId param value special char and longer than 60(147).", "v7.0/9d110f06-d744-4367-8099-50e0de49338b/paymentMethodDescriptions?sessionId=3feeb986-ff43%4c11%96b1%e9d422&@$e0a2ef17208f70-2588-41c6-814b-8b64fcd291354f1675a7-d8da-495f-a7b6-f733fbb497eea81bfed2-a515-46a7-8b3e-94e03b677f57&partner=webblends&orderId=3b306951-2ba1-4feb-995e-945c417494)(+_{}<>?65&partner=webblends&orderId=3b306951-2ba1-4feb-995e-945c41749465&partner=xbox&operation=Select&country=mx&language=es-MX&filters=%7B%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%5D", true)]
        [DataRow(false, "Incoming request url is invalid. SessionId param value special char and longer than 60(147).", "v7.0/9d110f06-d744-4367-8099-50e0de49338b/paymentMethodDescriptions?sessionId=3feeb986-ff43%4c11%96b1%e9d422&@$e0a2ef17208f70-2588-41c6-814b-8b64fcd291354f1675a7-d8da-495f-a7b6-f733fbb497eea81bfed2-a515-46a7-8b3e-94e03b677f57&partner=oxowebdirect&orderId=3b306951-2ba1-4feb-995e-945c417494)(+_{}<>?65&partner=webblends&orderId=3b306951-2ba1-4feb-995e-945c41749465&partner=xbox&operation=Select&country=mx&language=es-MX&filters=%7B%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22Subscriptions%22%5D%7D&allowedPaymentMethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%5D", true)]
        [DataRow(false, "Incoming request url is invalid. SessionId param value is special char and longer than 60(134).", "v7.0/bbec2623-dd4c-41e3-ad2c-46d12d11893d/challengeDescriptions?type=Sms&sessionId=ac5f6cf7-f410-4ff2-a26f-d71e:”{}<>?dfe3f7f3cfb68dc4-46a*-8-4b97-8~!6a3-29c55de71c9d&piid=f90a82bd-8b09-4713-9449-14ae+_!@95f351f$%^&*6&partner=xbox&operation=RenderPidlPage&country=us&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. SessionId param value is empty.", "v7.0/89023fb7-3ef8-4e7d-b863-d297ed226ac1/addressDescriptions?partner=onedrive&country=US&language=en&sessionId=&completePrerequisites=true&type=billing&operation=Add", true)]

        [DataTestMethod]
        public async Task SessionIdParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));
                
                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/d4c7c1a5-f398-44e1-b898-8ef4de1f18d0/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true&country=us&deviceId=6966507344448396")]
        [DataRow(true, "Incoming request url is valid", "v7.0/15d4d127-9a4e-49e8-bef4-bf5908cdeb71/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true&country=us&deviceId=6966509679510669")]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentInstrumentsEx?status=active&status=pending&status=deactivated&country=us")]
        [DataRow(true, "Incoming request url is valid", "v7.0/d1e555de-98b8-4b6c-a098-728143e0083a/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true&country=us&deviceId=6825771001206580")]
        [DataRow(true, "Incoming request url is valid", "v7.0/b5c1bf79-c0a8-4c39-bb63-a0356248d5f4/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true&country=us&deviceId=6966498945232033")]
        [DataRow(false, "Incoming request url is invalid. Status param value has special char.", "v7.0/71429758-f6d0-4b46-9d2d-dd1c74b544fa/paymentInstrumentsEx?status=active%$&!@&status=pending%^&*!&status=deactivated%^!@&partner=wallet&deviceIdFilter=true&country=us&deviceId=6966500933271712")]
        [DataRow(false, "Incoming request url is invalid. Status param value is longer than 15.", "v7.0/50b90927-d80f-4951-b8d0-20891ad9e45d/paymentInstrumentsEx?status=activeactiveactivestatus=pendingpendingpendingpending&status=deactivatedeactivatedeactivate&partner=wallet&deviceIdFilter=true&country=us&deviceId=6966497113600108")]
        [DataRow(false, "Incoming request url is invalid. Status param value has special char & is longer than 15.", "v7.0/b5da549e-87ea-41f6-8f80-59f0d1befedc/paymentInstrumentsEx?status=active126&active!@#$&active*#@status=pending3125#$@&&!*):{&status=deactivated%128#^@&*#(_}:<>&partner=wallet&deviceIdFilter=true&country=us&deviceId=6825780105280333")]
        [DataRow(false, "Incoming request url is invalid. Status param value has special char & is longer than 15.", "v7.0/838f453e-2d34-4306-88c2-33384b236cef/paymentInstrumentsEx?status=activedeactivated@#@#^@*23242&status=pendingdeactivated@$@*#%$^_)><:&status=deactivatedactive!@$!%@<>”%^31&partner=wallet&deviceIdFilter=true&country=us&deviceId=6755404292638273")]
        [DataRow(false, "Incoming request url is invalid. Status param value is empty.", "v7.0/c7c49e13-5a74-4ac9-8be7-9e04d86ec6ef/paymentInstrumentsEx?status=&status=&status=&partner=wallet&deviceIdFilter=true&country=us&deviceId=6825772359880452")]
        [DataRow(true, "Incoming request url is valid", "v7.0/d4c7c1a5-f398-44e1-b898-8ef4de1f18d0/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true&country=us&deviceId=6966507344448396", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/15d4d127-9a4e-49e8-bef4-bf5908cdeb71/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true&country=us&deviceId=6966509679510669", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentInstrumentsEx?status=active&status=pending&status=deactivated&country=us", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/d1e555de-98b8-4b6c-a098-728143e0083a/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true&country=us&deviceId=6825771001206580", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/b5c1bf79-c0a8-4c39-bb63-a0356248d5f4/paymentInstrumentsEx?status=active&status=pending&status=deactivated&partner=wallet&deviceIdFilter=true&country=us&deviceId=6966498945232033", true)]
        [DataRow(false, "Incoming request url is invalid. Status param value has special char.", "v7.0/71429758-f6d0-4b46-9d2d-dd1c74b544fa/paymentInstrumentsEx?status=active%$&!@&status=pending%^&*!&status=deactivated%^!@&partner=wallet&deviceIdFilter=true&country=us&deviceId=6966500933271712", true)]
        [DataRow(false, "Incoming request url is invalid. Status param value is longer than 15.", "v7.0/50b90927-d80f-4951-b8d0-20891ad9e45d/paymentInstrumentsEx?status=activeactiveactivestatus=pendingpendingpendingpending&status=deactivatedeactivatedeactivate&partner=wallet&deviceIdFilter=true&country=us&deviceId=6966497113600108", true)]
        [DataRow(false, "Incoming request url is invalid. Status param value has special char & is longer than 15.", "v7.0/b5da549e-87ea-41f6-8f80-59f0d1befedc/paymentInstrumentsEx?status=active126&active!@#$&active*#@status=pending3125#$@&&!*):{&status=deactivated%128#^@&*#(_}:<>&partner=wallet&deviceIdFilter=true&country=us&deviceId=6825780105280333", true)]
        [DataRow(false, "Incoming request url is invalid. Status param value has special char & is longer than 15.", "v7.0/838f453e-2d34-4306-88c2-33384b236cef/paymentInstrumentsEx?status=activedeactivated@#@#^@*23242&status=pendingdeactivated@$@*#%$^_)><:&status=deactivatedactive!@$!%@<>”%^31&partner=wallet&deviceIdFilter=true&country=us&deviceId=6755404292638273", true)]
        [DataRow(false, "Incoming request url is invalid. Status param value is empty.", "v7.0/c7c49e13-5a74-4ac9-8be7-9e04d86ec6ef/paymentInstrumentsEx?status=&status=&status=&partner=wallet&deviceIdFilter=true&country=us&deviceId=6825772359880452", true)]

        [DataTestMethod]
        public async Task StatusParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/3fc7c60f-368d-49cf-b9f9-85aa04a7adb2/challengeDescriptions?timezoneOffset=-345&paymentSessionOrData=%7B%22piid%22%3A%22qNXOuAEAAAABAACA%22%2C%22paymentMethodType%22%3A%22mc%22%2C%22partner%22%3A%22Azure%22%2C%22country%22%3A%22NP%22%2C%22language%22%3A%22en-us%22%2C%22piCid%22%3A%223fc7c60f-368d-49cf-b9f9-85aa04a7adb2%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22caid%22%3A%2248511152-f99f-467a-8d48-b50b6638b8c8%22%2C%22isLegacy%22%3Atrue%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22billableAccountId%22%3A%22qNXOuAEAAAAAAAAA%22%2C%22classicProduct%22%3A%22azureClassic%22%2C%22challengeWindowSize%22%3A%2205%22%7D&operation=RenderPidlPage&classicProduct=azureClassic&billableAccountId=qNXOuAEAAAAAAAAA&language=en-GB")]
        [DataRow(true, "Incoming request url is valid", "v7.0/0f642591-15cf-49db-bda8-658bc5897911/challengeDescriptions?timezoneOffset=420&paymentSessionOrData=%7B%22piid%22%3A%223KCxqgEAAAACAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A14.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%7D&operation=RenderPidlPage&language=en-US")]
        [DataRow(true, "Incoming request url is valid", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=-600&paymentSessionOrData=%7B%22piid%22:%22jxWigAAAAAABAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:220.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%7D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=120&paymentSessionOrData=%7B%22id%22:%22Z10038AK5ULG26aafa91-6924-4043-bfc2-77a6533b0454%22,%22isChallengeRequired%22:true,%22signature%22:%22placeholder_for_paymentsession_signature_Z10038AK5ULG26aafa91-6924-4043-bfc2-77a6533b0454%22,%22challengeStatus%22:%22Unknown%22,%22sessionToken%22:null,%22challengeType%22:null,%22piid%22:%22jxWigAAAAAABAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:220.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%7D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=01&paymentSessionOrData=%7B%22piid%22:%22jxWigAAAAAABAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:210.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%7D")]
        [DataRow(false, "Incoming request url is invalid. TimezoneOffset param value is longer than 6.", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=-3744596731798212&paymentSessionOrData=%7B%22piid%22:%22jxWigAAAAAACAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:210.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%7D")]
        [DataRow(false, "Incoming request url is invalid. TimezoneOffset param value has special char.", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=8@#%*!&paymentSessionOrData=%7B%22id%22:%22Z10039AK5ULNc394281a-326b-434f-9c24-e321a4030a3e%22,%22isChallengeRequired%22:true,%22signature%22:%22placeholder_for_paymentsession_signature_Z10039AK5ULNc394281a-326b-434f-9c24-e321a4030a3e%22,%22challengeStatus%22:%22Unknown%22,%22sessionToken%22:null,%22challengeType%22:null,%22piid%22:%22jxWigAAAAAACAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:210.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%7D")]
        [DataRow(false, "Incoming request url is invalid. TimezoneOffset param value has special char and letters.", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=7<>?AS&paymentSessionOrData=%7B%22piid%22:%22jxWigAAAAAABAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:200.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%7D")]
        [DataRow(false, "Incoming request url is invalid. TimezoneOffset param value has special char, letters and is is longer than 6", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=-480163!@!%$%!(!*&klahAHAU10927__!82102&paymentSessionOrData=%7B%22id%22:%22Z10038AK5ULQa19207ab-8fce-4c74-a0a7-f9ad2aee479c%22,%22isChallengeRequired%22:true,%22signature%22:%22placeholder_for_paymentsession_signature_Z10038AK5ULQa19207ab-8fce-4c74-a0a7-f9ad2aee479c%22,%22challengeStatus%22:%22Unknown%22,%22sessionToken%22:null,%22challengeType%22:null,%22piid%22:%22jxWigAAAAAABAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:200.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%7D")]
        [DataRow(false, "Incoming request url is invalid. TimezoneOffset param value is empty", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=&paymentSessionOrData=%7B%22id%22:%22Z10039AK5ULK4f79f77c-7753-4495-8c6d-58e52a53dc9d%22,%22isChallengeRequired%22:true,%22signature%22:%22placeholder_for_paymentsession_signature_Z10039AK5ULK4f79f77c-7753-4495-8c6d-58e52a53dc9d%22,%22challengeStatus%22:%22Unknown%22,%22sessionToken%22:null,%22challengeType%22:null,%22piid%22:%22jxWigAAAAAABAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:210.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%7D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/3fc7c60f-368d-49cf-b9f9-85aa04a7adb2/challengeDescriptions?timezoneOffset=-345&paymentSessionOrData=%7B%22piid%22%3A%22qNXOuAEAAAABAACA%22%2C%22paymentMethodType%22%3A%22mc%22%2C%22partner%22%3A%22Azure%22%2C%22country%22%3A%22NP%22%2C%22language%22%3A%22en-us%22%2C%22piCid%22%3A%223fc7c60f-368d-49cf-b9f9-85aa04a7adb2%22%2C%22amount%22%3A0%2C%22currency%22%3A%22USD%22%2C%22caid%22%3A%2248511152-f99f-467a-8d48-b50b6638b8c8%22%2C%22isLegacy%22%3Atrue%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22billableAccountId%22%3A%22qNXOuAEAAAAAAAAA%22%2C%22classicProduct%22%3A%22azureClassic%22%2C%22challengeWindowSize%22%3A%2205%22%7D&operation=RenderPidlPage&classicProduct=azureClassic&billableAccountId=qNXOuAEAAAAAAAAA&language=en-GB", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/0f642591-15cf-49db-bda8-658bc5897911/challengeDescriptions?timezoneOffset=420&paymentSessionOrData=%7B%22piid%22%3A%223KCxqgEAAAACAACA%22%2C%22language%22%3A%22en-US%22%2C%22partner%22%3A%22amcweb%22%2C%22amount%22%3A14.99%2C%22currency%22%3A%22USD%22%2C%22country%22%3A%22US%22%2C%22hasPreOrder%22%3Afalse%2C%22isLegacy%22%3Afalse%2C%22isMOTO%22%3Afalse%2C%22challengeScenario%22%3A%22RecurringTransaction%22%2C%22challengeWindowSize%22%3A%2203%22%7D&operation=RenderPidlPage&language=en-US", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=-600&paymentSessionOrData=%7B%22piid%22:%22jxWigAAAAAABAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:220.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%7D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=120&paymentSessionOrData=%7B%22id%22:%22Z10038AK5ULG26aafa91-6924-4043-bfc2-77a6533b0454%22,%22isChallengeRequired%22:true,%22signature%22:%22placeholder_for_paymentsession_signature_Z10038AK5ULG26aafa91-6924-4043-bfc2-77a6533b0454%22,%22challengeStatus%22:%22Unknown%22,%22sessionToken%22:null,%22challengeType%22:null,%22piid%22:%22jxWigAAAAAABAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:220.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%7D", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=01&paymentSessionOrData=%7B%22piid%22:%22jxWigAAAAAABAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:210.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%7D", true)]
        [DataRow(false, "Incoming request url is invalid. TimezoneOffset param value is longer than 6.", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=-3744596731798212&paymentSessionOrData=%7B%22piid%22:%22jxWigAAAAAACAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:210.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%7D", true)]
        [DataRow(false, "Incoming request url is invalid. TimezoneOffset param value has special char.", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=8@#%*!&paymentSessionOrData=%7B%22id%22:%22Z10039AK5ULNc394281a-326b-434f-9c24-e321a4030a3e%22,%22isChallengeRequired%22:true,%22signature%22:%22placeholder_for_paymentsession_signature_Z10039AK5ULNc394281a-326b-434f-9c24-e321a4030a3e%22,%22challengeStatus%22:%22Unknown%22,%22sessionToken%22:null,%22challengeType%22:null,%22piid%22:%22jxWigAAAAAACAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:210.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%7D", true)]
        [DataRow(false, "Incoming request url is invalid. TimezoneOffset param value has special char and letters.", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=7<>?AS&paymentSessionOrData=%7B%22piid%22:%22jxWigAAAAAABAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:200.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%7D", true)]
        [DataRow(false, "Incoming request url is invalid. TimezoneOffset param value has special char, letters and is is longer than 6", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=-480163!@!%$%!(!*&klahAHAU10927__!82102&paymentSessionOrData=%7B%22id%22:%22Z10038AK5ULQa19207ab-8fce-4c74-a0a7-f9ad2aee479c%22,%22isChallengeRequired%22:true,%22signature%22:%22placeholder_for_paymentsession_signature_Z10038AK5ULQa19207ab-8fce-4c74-a0a7-f9ad2aee479c%22,%22challengeStatus%22:%22Unknown%22,%22sessionToken%22:null,%22challengeType%22:null,%22piid%22:%22jxWigAAAAAABAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:200.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%7D", true)]
        [DataRow(false, "Incoming request url is invalid. TimezoneOffset param value is empty", "v7.0/8e22c40d-9011-411c-a09c-c64921959f15/challengeDescriptions?timezoneOffset=&paymentSessionOrData=%7B%22id%22:%22Z10039AK5ULK4f79f77c-7753-4495-8c6d-58e52a53dc9d%22,%22isChallengeRequired%22:true,%22signature%22:%22placeholder_for_paymentsession_signature_Z10039AK5ULK4f79f77c-7753-4495-8c6d-58e52a53dc9d%22,%22challengeStatus%22:%22Unknown%22,%22sessionToken%22:null,%22challengeType%22:null,%22piid%22:%22jxWigAAAAAABAACA%22,%22language%22:%22en%22,%22partner%22:%22PX.COT%22,%22piCid%22:%228e22c40d-9011-411c-a09c-c64921959f15%22,%22amount%22:210.0,%22currency%22:%22EUR%22,%22country%22:%22GB%22,%22hasPreOrder%22:false,%22caid%22:null,%22isLegacy%22:false,%22isMOTO%22:false,%22challengeScenario%22:%22PaymentTransaction%22,%22challengeWindowSize%22:%2204%22,%22billableAccountId%22:null,%22classicProduct%22:null%7D", true)]

        [DataTestMethod]
        public async Task TimezoneOffsetParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));

                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/899e6db5-886a-4d4f-92f6-9c3c6cc8127b/paymentMethodDescriptions?type=visa%2C+mc%2C+amex%2C+discover%2C+jcb&partner=xboxweb&operation=Add&language=en-US&family=credit_card&country=US&completePrerequisites=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/b874cb26-1780-4e5b-88be-6e7f33520883/paymentInstrumentsEx/oSygggAAAAABAACA?type=visa&scenario=azureIbiza&partner=Azure&language=en-us&family=credit_card&country=IN")]
        [DataRow(true, "Incoming request url is valid", "v7.0/832a4acf-ecbe-46ba-a5f5-cd08ffced26e/paymentMethodDescriptions?type=visa%2Cmc%2Camex%2Cdiscover%2Cjcb&scenario=azureIbiza&partner=Azure&operation=Add&language=fr-fr&family=credit_card&country=MA&classicProduct=azureClassic&billableAccountId=Y1OR2gEAAAAAAAAA")]
        [DataRow(true, "Incoming request url is valid", "v v7.0/d5dc8830-1e44-4e6e-bb48-7a0b3ecc2987/addressDescriptions?partner=onedrive&country=US&language=en&sessionId=1c071e02-dcd2-1e2e-5c83-9fee6af971ad&completePrerequisites=true&type=billing&operation=Add 7.0/6c5f1ccc-cca9-45fe-a070-150f04c6330b/paymentMethodDescriptions?type=visa%2Cmc&partner=xbox&operation=Add&country=ar&language=es-AR&family=credit_card&completePrerequisites=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/ae61eee1-7aca-4ad6-920e-9b6b37e7faf3/TaxIdDescriptions?language=en-gb&country=GB&operation=Add&partner=commercialstores&type=commercial_tax_id")]
        [DataRow(false, "Incoming request url is invalid. Type param has special char.", " v7.0/009f0b70-da4e-4446-b991-f815521bb575/paymentInstrumentsEx/KPMQXwAAAAACAACA?type=mc$#@&scenario=azureIbiza&partner=Azure&language=en-us&family=credit_card&country=CO&classicProduct=azureClassic&billableAccountId=KPMQXwAAAAAAAAAA ")]
        [DataRow(false, "Incoming request url is invalid. Type is longer than 100.", "v7.0/c8990f48-0330-4e9b-b751-3ab38b40165a/TaxIdDescriptions?language=en-us&country=PL&operation=Add&partner=commercialstores&scenario=withCountryDropdown&type=commercial_tax_id invoice_basicinvoice_checkit3-it-nonsim%2Ciwi-it-nonsimit3-it-nonsim%2Ciwi-it-nonsim%)2Cbku-it-n(onsi@m%2^Ctim-it-nonsim%2Cvod-it-nonsim$@#*")]
        [DataRow(false, "Incoming request url is invalid. Type param is empty.", "v7.0/2b52b879-5a48-4abb-bddd-fd6aa8a2cc06/paymentMethodDescriptions?type=&partner=Azure&operation=Add&language=en&family=credit_card&country=US&classicProduct=azureClassic&billableAccountId=xbmg1AAAAAAAAAAA")]
        [DataRow(false, "Incoming request url is invalid. Type param has special char and is longer than 100.", "v7.0/11f37a49-e0d2-4d6d-a286-c5fd94f4a715/challengeDescriptions?type=Smsvisa:%2C”mc%’2Camex%2Cdiscovervisa%2Cmc%2Camex%2Cdisco[ver%2Cjcb!org-gb-nons{imorg-pl-nonsimorg-pl-nonsim%2Cpla-pl-nonsim&sessionId=7cb4c533-4e9f-4763-a47d-7cbdd56a0609&piid=b42a821b-7178-45f8-a6cc-73d20da380d4&partner=xbox&operation=RenderPidlPage&country=us&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. Type param is longer than 100", "v7.0/27588702-d31e-4f49-8c7f-aeea3e52a088/AddressDescriptions?language=en-us&country=US&operation=Add&partner=commercialstores&type=shippingvisa%2Camex%2Cmcvisa%2Camex%2Cmc%2Cdiscovervisa%2Camex%2Cmc%2Cdiscover%2Cjcbvisa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercardvisa%2Camex%2Cmc%2Chipercardvisa%2Camex%2Cmc%2Cjcb")]
        [DataRow(true, "Incoming request url is valid", "v7.0/899e6db5-886a-4d4f-92f6-9c3c6cc8127b/paymentMethodDescriptions?type=visa%2C+mc%2C+amex%2C+discover%2C+jcb&partner=xboxweb&operation=Add&language=en-US&family=credit_card&country=US&completePrerequisites=true", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/b874cb26-1780-4e5b-88be-6e7f33520883/paymentInstrumentsEx/oSygggAAAAABAACA?type=visa&scenario=azureIbiza&partner=Azure&language=en-us&family=credit_card&country=IN", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/832a4acf-ecbe-46ba-a5f5-cd08ffced26e/paymentMethodDescriptions?type=visa%2Cmc%2Camex%2Cdiscover%2Cjcb&scenario=azureIbiza&partner=Azure&operation=Add&language=fr-fr&family=credit_card&country=MA&classicProduct=azureClassic&billableAccountId=Y1OR2gEAAAAAAAAA", true)]
        [DataRow(true, "Incoming request url is valid", "v v7.0/d5dc8830-1e44-4e6e-bb48-7a0b3ecc2987/addressDescriptions?partner=onedrive&country=US&language=en&sessionId=1c071e02-dcd2-1e2e-5c83-9fee6af971ad&completePrerequisites=true&type=billing&operation=Add 7.0/6c5f1ccc-cca9-45fe-a070-150f04c6330b/paymentMethodDescriptions?type=visa%2Cmc&partner=xbox&operation=Add&country=ar&language=es-AR&family=credit_card&completePrerequisites=true", true)]
        [DataRow(true, "Incoming request url is valid", "v7.0/ae61eee1-7aca-4ad6-920e-9b6b37e7faf3/TaxIdDescriptions?language=en-gb&country=GB&operation=Add&partner=commercialstores&type=commercial_tax_id", true)]
        [DataRow(false, "Incoming request url is invalid. Type param has special char.", " v7.0/009f0b70-da4e-4446-b991-f815521bb575/paymentInstrumentsEx/KPMQXwAAAAACAACA?type=mc$#@&scenario=azureIbiza&partner=Azure&language=en-us&family=credit_card&country=CO&classicProduct=azureClassic&billableAccountId=KPMQXwAAAAAAAAAA ", true)]
        [DataRow(false, "Incoming request url is invalid. Type is longer than 100.", "v7.0/c8990f48-0330-4e9b-b751-3ab38b40165a/TaxIdDescriptions?language=en-us&country=PL&operation=Add&partner=commercialstores&scenario=withCountryDropdown&type=commercial_tax_id invoice_basicinvoice_checkit3-it-nonsim%2Ciwi-it-nonsimit3-it-nonsim%2Ciwi-it-nonsim%)2Cbku-it-n(onsi@m%2^Ctim-it-nonsim%2Cvod-it-nonsim$@#*", true)]
        [DataRow(false, "Incoming request url is invalid. Type param is empty.", "v7.0/2b52b879-5a48-4abb-bddd-fd6aa8a2cc06/paymentMethodDescriptions?type=&partner=Azure&operation=Add&language=en&family=credit_card&country=US&classicProduct=azureClassic&billableAccountId=xbmg1AAAAAAAAAAA", true)]
        [DataRow(false, "Incoming request url is invalid. Type param has special char and is longer than 100.", "v7.0/11f37a49-e0d2-4d6d-a286-c5fd94f4a715/challengeDescriptions?type=Smsvisa:%2C”mc%’2Camex%2Cdiscovervisa%2Cmc%2Camex%2Cdisco[ver%2Cjcb!org-gb-nons{imorg-pl-nonsimorg-pl-nonsim%2Cpla-pl-nonsim&sessionId=7cb4c533-4e9f-4763-a47d-7cbdd56a0609&piid=b42a821b-7178-45f8-a6cc-73d20da380d4&partner=xbox&operation=RenderPidlPage&country=us&language=en-US", true)]
        [DataRow(false, "Incoming request url is invalid. Type param is longer than 100", "v7.0/27588702-d31e-4f49-8c7f-aeea3e52a088/AddressDescriptions?language=en-us&country=US&operation=Add&partner=commercialstores&type=shippingvisa%2Camex%2Cmcvisa%2Camex%2Cmc%2Cdiscovervisa%2Camex%2Cmc%2Cdiscover%2Cjcbvisa%2Camex%2Cmc%2Cdiscover%2Cjcb%2Chipercardvisa%2Camex%2Cmc%2Chipercardvisa%2Camex%2Cmc%2Cjcb", true)]

        [DataTestMethod]
        public async Task TypeParameterValidation(bool isValidUrl, string description, string urlToTest, bool flightStatus = false)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            // Act
            if (flightStatus && !isValidUrl)
            {
                await ValidateUrlWithFlightingAndAssert(urlToTest);
            }
            else
            {
                var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));
                
                // Assert
                Assert.AreEqual(isValidUrl, didValidationSucceed, description);
            }
        }

        [DataRow(true, "Incoming request url is valid", "v7.0/094f645d-4102-4ef1-abe1-595839fe8756/paymentmethodDescriptions?FAMILY=credit_card&Country=us&lanGUAGE=en-us&PartneR=webblends&OpeRaTion=add&completeprerequisites=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/094f645d-4102-4ef1-abe1-595839fe8756/paymentmethodDescriptions?FAMILY=credit_card&Country=us&lanGUAGE=en-us&PartneR=oxowebdirect&OpeRaTion=add&completeprerequisites=true")]
        [DataRow(true, "Incoming request url is valid", "v7.0/32c681d4-9b3c-450f-b6f4-63b1b63a0933/paymentInstrumentsEx?COUNTRY=gr&Language=el-GR&Partner=amcweb&billableaccountid=z1qDfwAAAAAAAAAA&completeprerequisites=True")]
        [DataRow(true, "Incoming request url is valid", "v7.0/161383da-1645-41d6-85a6-742b582dc0f9/paymentMethodDescriptions?sessionid=896e4f42-3313-4a85-a552-28b55c003334&PARTNER=webblends&Orderid=837a34ec-5044-4fa2-8514-65ed94f6c247&OperatioN=Select&CouNtrY=us&LanGUAGE=en-us&filters=%7B%22chargeThreshold%22%3A6.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&Allowedpaymentmethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/161383da-1645-41d6-85a6-742b582dc0f9/paymentMethodDescriptions?sessionid=896e4f42-3313-4a85-a552-28b55c003334&PARTNER=oxowebdirect&Orderid=837a34ec-5044-4fa2-8514-65ed94f6c247&OperatioN=Select&CouNtrY=us&LanGUAGE=en-us&filters=%7B%22chargeThreshold%22%3A6.99%2C%22exclusionTags%22%3A%5B%22ModernSubscriptions%22%2C%22O365Subscription%22%2C%22StoredValue%22%2C%22Subscriptions%22%5D%7D&Allowedpaymentmethods=%5B%22credit_card.visa%22%2C%22credit_card.amex%22%2C%22credit_card.mc%22%2C%22credit_card.discover%22%2C%22credit_card.jcb%22%2C%22credit_card.hipercard%22%2C%22credit_card.unionpay_creditcard%22%2C%22credit_card.unionpay_debitcard%22%2C%22ewallet.paypal%22%2C%22ewallet.alipay_billing_agreement%22%2C%22mobile_billing_non_sim%22%2C%22direct_debit.sepa%22%2C%22direct_debit.ideal_billing_agreement%22%2C%22direct_debit.ach%22%2C%22ewallet.stored_value%22%5D")]
        [DataRow(true, "Incoming request url is valid", "v7.0/e3f8fe62-2ec1-473f-b368-6b4d19085e8c/paymentMethodDescriptions?PartNER=amcweb&OPeraTION=Add&COUNTRY=us&LanGuaGe=en-US&FAMILY=credit_card&completeprerequisites=true")]
        [DataRow(true, "Incoming request url is valid", " v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentInstrumentsEx?cOUntRy=us&lAngUAge=en-US&pARTneR=Azure&billableaccountid=2PAlegAAAAAAAAAA")]
        [DataRow(false, "Incoming request url is invalid. CompletePrerequisites param is mispelled(completPrerequists).", " v7.0/6a73bfbf-e824-4ea0-851a-05cb76e26ddb/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=officeoobe&operation=Add&country=mx&language=es-MX&family=credit_card&completPrerequists=true&classicProduct=Omex")]
        [DataRow(false, "Incoming request url is invalid. Family param is mispelled(familee).", " v7.0/4015c80e-f369-43a4-8ffe-6e9e7fdca4d6/paymentMethodDescriptions?familee=credit_card&country=US&language=en-US&partner=xbox&complete=true")]
        [DataRow(false, "Incoming request url is invalid. Partner param is has number characters(C0UNTRY) .", " v7.0/9ee65bd3-e82d-420b-9933-2b03f32388b8/paymentMethodDescriptions?type=hut-gb-nonsim%2Co2o-gb-nonsim%2Ctmo-gb-nonsim&partner=xbox&operation=Add&C0UNTRY=gb&language=en-GB&family=mobile_billing_non_sim&completePrerequisites=true")]
        [DataRow(false, "Incoming request url is invalid. Language param has special char(|ANGUAGE). ", " v7.0/3236c2b9-52da-405a-9b88-b1ee0b944fa0/paymentMethodDescriptions?type=visa%2Camex%2Cmc%2Cdiscover%2Cjcb&scenario=rs5&partner=officeoobe&operation=Add&country=gb&|ANGUAGE=en-GB&family=credit_card&completePrerequisites=true&classicProduct=Omex")]
        [DataRow(false, "Incoming request url is invalid. Operation Param is empty. ", " v7.0/61dd35f1-69f6-49fe-9189-49601434740e/challengeDescriptions?type=Sms&sessionId=63d41cc5-d771-4c9e-8388-1586f28c7287&piid=793d77e3-7b4a-4477-a822-dba24bac4d34&partner=webblends&=RenderPidlPage&country=us&language=en-US")]
        [DataRow(false, "Incoming request url is invalid. Operation Param is empty. ", " v7.0/61dd35f1-69f6-49fe-9189-49601434740e/challengeDescriptions?type=Sms&sessionId=63d41cc5-d771-4c9e-8388-1586f28c7287&piid=793d77e3-7b4a-4477-a822-dba24bac4d34&partner=oxowebdirect&=RenderPidlPage&country=us&language=en-US")]

        [DataTestMethod]
        public async Task ParameterValidation(bool isValidUrl, string description, string urlToTest)
        {
            // Arrange
            bool didValidationSucceed = true;
            PXHandler.PreProcess = (request) =>
            {
                if (request.GetProperties().ContainsKey("InputValidationFailed"))
                {
                    didValidationSucceed = !(bool)request.GetProperties()["InputValidationFailed"];
                }
            };

            var response = await PXClient.GetAsync(GetPXServiceUrl(urlToTest));
            Assert.AreEqual(isValidUrl, didValidationSucceed, description);
        }

        private async Task ValidateUrlWithFlightingAndAssert(string urlToTest)
        {
            Dictionary<string, string> headers = new Dictionary<string, string>()
            {
                { "x-ms-flight", "PXEnableThrowInvalidUrlParameterException" }
            };

            await GetRequest(
                urlToTest,
                requestHeaders: headers,
                null,
                (responseCode, responseBody, responseHeaders) =>
                {
                    // Assert
                    Assert.AreEqual(HttpStatusCode.BadRequest, responseCode);
                    dynamic error = JsonConvert.DeserializeObject(responseBody);
                    Assert.AreEqual(Constants.PXServiceErrorCodes.InvalidParameter, error.ErrorCode.ToString());
                });
        }
    }
}
