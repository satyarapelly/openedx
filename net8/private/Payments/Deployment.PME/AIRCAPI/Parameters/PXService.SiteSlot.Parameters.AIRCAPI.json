{
  "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "alwaysOn": {
      "value": true
    },
    "environmentName": {
      "value": "STORECORE-PST-PX-AIRCAPI"
    },
    "keyVaultName": {
      "value": "PX-KV-AIRCAPI"
    },
    "managedIdentity": {
      "value": "PXService-AIRCAPI"
    },
    "managedIdentityClientId": {
      "value": "21ea69c2-af45-45b9-89e4-827f32bbb1da"
    },
    "managedIdentityResourceGroup": {
      "value": "PX-Infra-AIRCAPI-CentralUS"
    },
    "mintlsVersion": {
      "value": "1.2"
    },
    "servicePlanName": {
      "value": "PaymentExperience-AIRCAPI"
    },
    "siteName": {
      "value": "PaymentExperience-AIRCAPI"
    },
    "stageName": {
      "value": "Staging"
    },
    "sslClientCertificateName": {
      "value": "SslCertificate"
    },
    "customHostname": {
      "value": "paymentexperience.aircapi.cp.microsoft-int.com"
    },
    "autoHealEnabled": {
      "value": true
    },
    "autoHealRules": {
      "value": {
        "triggers": {
          // auto heal will be triggered when 15 503 returns with 5 mins per instance
          "statusCodes": [
            {
              "status": 503,
              "count": 15,
              "timeInterval": "00:05:00"
            }
          ]
        },
        "actions": {
          // start the instance
          "actionType": "Recycle",
          // Let's say the app triggers the metric you configured it to, 
          // but it has been just a minute since the last autohealing action took place, 
          // so now the Autohealing will need to wait the ammount of time you configure in there to perform another action,
          // for the app to startup and let it get ready before restarting it again 
          "minProcessExecutionTime": "00:10:00"
        }
      }
    },
    "websiteLocalCachedOption": {
      // Per best practice: You typically don't set the staging slot to use Local Cache to enable a seamless build-deploy-test lifecycle for staging if you get the benefits of Local Cache for the production slot.
      // See: https://docs.microsoft.com/en-us/azure/app-service/overview-local-cache
      "value": "Never"
    },
    "websiteLocalCacheSize": {
      "value": ""
    }
  }
}
